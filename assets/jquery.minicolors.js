!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):i(jQuery)}(function(i){"use strict";function t(i){var t=i.parent();i.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),t.before(i).remove()}function o(i){var t=i.parent(),o=t.find(".minicolors-panel"),n=i.data("minicolors-settings");!i.data("minicolors-initialized")||i.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus")||(s(),t.addClass("minicolors-focus"),o.stop(!0,!0).fadeIn(n.showSpeed,function(){n.show&&n.show.call(i.get(0))}))}function s(){i(".minicolors-focus").each(function(){var t=i(this),o=t.find(".minicolors-input"),s=t.find(".minicolors-panel"),n=o.data("minicolors-settings");s.fadeOut(n.hideSpeed,function(){n.hide&&n.hide.call(o.get(0)),t.removeClass("minicolors-focus")})})}function n(i,t,o){var s,n,r,e,c=i.parents(".minicolors").find(".minicolors-input"),l=c.data("minicolors-settings"),h=i.find("[class$=-picker]"),d=i.offset().left,$=i.offset().top,p=Math.round(t.pageX-d),u=Math.round(t.pageY-$),g=o?l.animationSpeed:0;t.originalEvent.changedTouches&&(p=t.originalEvent.changedTouches[0].pageX-d,u=t.originalEvent.changedTouches[0].pageY-$),p<0&&(p=0),u<0&&(u=0),p>i.width()&&(p=i.width()),u>i.height()&&(u=i.height()),i.parent().is(".minicolors-slider-wheel")&&h.parent().is(".minicolors-grid")&&(r=Math.sqrt((s=75-p)*s+(n=75-u)*n),(e=Math.atan2(n,s))<0&&(e+=2*Math.PI),r>75&&(r=75,p=75-75*Math.cos(e),u=75-75*Math.sin(e)),p=Math.round(p),u=Math.round(u)),i.is(".minicolors-grid")?h.stop(!0).animate({top:u+"px",left:p+"px"},g,l.animationEasing,function(){a(c,i)}):h.stop(!0).animate({top:u+"px"},g,l.animationEasing,function(){a(c,i)})}function a(i,t){function o(i,t){var o,s;return i.length&&t?(o=i.offset().left,s=i.offset().top,{x:o-t.offset().left+i.outerWidth()/2,y:s-t.offset().top+i.outerHeight()/2}):null}var s,n,a,e,l,h,d,$=i.val(),u=i.attr("data-opacity"),g=i.parent(),m=i.data("minicolors-settings"),f=g.find(".minicolors-input-swatch"),v=g.find(".minicolors-grid"),b=g.find(".minicolors-slider"),w=g.find(".minicolors-opacity-slider"),y=v.find("[class$=-picker]"),C=b.find("[class$=-picker]"),k=w.find("[class$=-picker]"),x=o(y,v),S=o(C,b),z=o(k,w);if(t.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(m.control){case"wheel":h=Math.sqrt((e=v.width()/2-x.x)*e+(l=v.height()/2-x.y)*l),(d=Math.atan2(l,e))<0&&(d+=2*Math.PI),h>75&&(h=75,x.x=69-75*Math.cos(d),x.y=69-75*Math.sin(d)),n=p(h/.75,0,100),$=_({h:s=p(180*d/Math.PI,0,360),s:n,b:a=p(100-Math.floor(S.y*(100/b.height())),0,100)}),b.css("backgroundColor",_({h:s,s:n,b:100}));break;case"saturation":s=p(parseInt(x.x*(360/v.width()),10),0,360),$=_({h:s,s:n=p(100-Math.floor(S.y*(100/b.height())),0,100),b:a=p(100-Math.floor(x.y*(100/v.height())),0,100)}),b.css("backgroundColor",_({h:s,s:100,b:a})),g.find(".minicolors-grid-inner").css("opacity",n/100);break;case"brightness":s=p(parseInt(x.x*(360/v.width()),10),0,360),$=_({h:s,s:n=p(100-Math.floor(x.y*(100/v.height())),0,100),b:a=p(100-Math.floor(S.y*(100/b.height())),0,100)}),b.css("backgroundColor",_({h:s,s:n,b:100})),g.find(".minicolors-grid-inner").css("opacity",1-a/100);break;default:s=p(360-parseInt(S.y*(360/b.height()),10),0,360),$=_({h:s,s:n=p(Math.floor(x.x*(100/v.width())),0,100),b:a=p(100-Math.floor(x.y*(100/v.height())),0,100)}),v.css("backgroundColor",_({h:s,s:100,b:100}))}r(i,$,u=m.opacity?parseFloat(1-z.y/w.height()).toFixed(2):1)}else f.find("span").css({backgroundColor:$,opacity:u}),c(i,$,u)}function r(i,t,o){var s,n=i.parent(),a=i.data("minicolors-settings"),r=n.find(".minicolors-input-swatch");a.opacity&&i.attr("data-opacity",o),"rgb"===a.format?(s=u(t)?d(t,!0):v(h(t,!0)),(isNaN(o=""===i.attr("data-opacity")?1:p(parseFloat(i.attr("data-opacity")).toFixed(2),0,1))||!a.opacity)&&(o=1),t=i.minicolors("rgbObject").a<=1&&s&&a.opacity?"rgba("+s.r+", "+s.g+", "+s.b+", "+parseFloat(o)+")":"rgb("+s.r+", "+s.g+", "+s.b+")"):(u(t)&&(t=m(t)),t=l(t,a.letterCase)),i.val(t),r.find("span").css({backgroundColor:t,opacity:o}),c(i,t,o)}function e(t,o){var s,n,a,r,e,f,b,w,y,C,k,x,S,z,D,F,T,j=t.parent(),L=t.data("minicolors-settings"),q=j.find(".minicolors-input-swatch"),E=j.find(".minicolors-grid"),I=j.find(".minicolors-slider"),P=j.find(".minicolors-opacity-slider"),O=E.find("[class$=-picker]"),V=I.find("[class$=-picker]"),A=P.find("[class$=-picker]");switch(u(t.val())?(s=m(t.val()),(e=p(parseFloat(g(t.val())).toFixed(2),0,1))&&t.attr("data-opacity",e)):s=l(h(t.val(),!0),L.letterCase),s||(s=l($(L.defaultValue,!0),L.letterCase)),n=(k=s,T=(x=v(k),S={h:0,s:0,b:0},z=Math.min(x.r,x.g,x.b),D=Math.max(x.r,x.g,x.b),F=D-z,S.b=D,S.s=0!==D?255*F/D:0,0!==S.s?x.r===D?S.h=(x.g-x.b)/F:x.g===D?S.h=2+(x.b-x.r)/F:S.h=4+(x.r-x.g)/F:S.h=-1,S.h*=60,S.h<0&&(S.h+=360),S.s*=100/255,S.b*=100/255,S),0===T.s&&(T.h=360),T),r=L.keywords?i.map(L.keywords.split(","),function(t){return i.trim(t.toLowerCase())}):[],f=""!==t.val()&&i.inArray(t.val().toLowerCase(),r)>-1?l(t.val()):u(t.val())?d(t.val()):s,o||t.val(f),L.opacity&&(isNaN(a=""===t.attr("data-opacity")?1:p(parseFloat(t.attr("data-opacity")).toFixed(2),0,1))&&(a=1),t.attr("data-opacity",a),q.find("span").css("opacity",a),w=p(P.height()-P.height()*a,0,P.height()),A.css("top",w+"px")),"transparent"===t.val().toLowerCase()&&q.find("span").css("opacity",0),q.find("span").css("backgroundColor",s),L.control){case"wheel":y=p(Math.ceil(.75*n.s),0,E.height()/2),b=p(75-Math.cos(C=n.h*Math.PI/180)*y,0,E.width()),w=p(75-Math.sin(C)*y,0,E.height()),O.css({top:w+"px",left:b+"px"}),w=150-n.b/(100/E.height()),""===s&&(w=0),V.css("top",w+"px"),I.css("backgroundColor",_({h:n.h,s:n.s,b:100}));break;case"saturation":b=p(5*n.h/12,0,150),w=p(E.height()-Math.ceil(n.b/(100/E.height())),0,E.height()),O.css({top:w+"px",left:b+"px"}),w=p(I.height()-n.s*(I.height()/100),0,I.height()),V.css("top",w+"px"),I.css("backgroundColor",_({h:n.h,s:100,b:n.b})),j.find(".minicolors-grid-inner").css("opacity",n.s/100);break;case"brightness":b=p(5*n.h/12,0,150),w=p(E.height()-Math.ceil(n.s/(100/E.height())),0,E.height()),O.css({top:w+"px",left:b+"px"}),w=p(I.height()-n.b*(I.height()/100),0,I.height()),V.css("top",w+"px"),I.css("backgroundColor",_({h:n.h,s:n.s,b:100})),j.find(".minicolors-grid-inner").css("opacity",1-n.b/100);break;default:b=p(Math.ceil(n.s/(100/E.width())),0,E.width()),w=p(E.height()-Math.ceil(n.b/(100/E.height())),0,E.height()),O.css({top:w+"px",left:b+"px"}),w=p(I.height()-n.h/(360/I.height()),0,I.height()),V.css("top",w+"px"),E.css("backgroundColor",_({h:n.h,s:100,b:100}))}t.data("minicolors-initialized")&&c(t,f,a)}function c(i,t,o){var s,n,a,r=i.data("minicolors-settings"),e=i.data("minicolors-lastChange");if(!e||e.value!==t||e.opacity!==o){if(i.data("minicolors-lastChange",{value:t,opacity:o}),r.swatches&&0!==r.swatches.length){for(a=0,s=u(t)?d(t,!0):v(t),n=-1;a<r.swatches.length;++a)if(s.r===r.swatches[a].r&&s.g===r.swatches[a].g&&s.b===r.swatches[a].b&&s.a===r.swatches[a].a){n=a;break}i.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==n&&i.parent().find(".minicolors-swatches .minicolors-swatch").eq(a).addClass("selected")}r.change&&(r.changeDelay?(clearTimeout(i.data("minicolors-changeTimeout")),i.data("minicolors-changeTimeout",setTimeout(function(){r.change.call(i.get(0),t,o)},r.changeDelay))):r.change.call(i.get(0),t,o)),i.trigger("change").trigger("input")}}function l(i,t){return"uppercase"===t?i.toUpperCase():i.toLowerCase()}function h(i,t){return(i=i.replace(/^#/g,"")).match(/^[A-F0-9]{3,6}/ig)&&(3===i.length||6===i.length)?(3===i.length&&t&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),"#"+i):""}function d(i,t){var o=i.replace(/[^\d,.]/g,"").split(",");return(o[0]=p(parseInt(o[0],10),0,255),o[1]=p(parseInt(o[1],10),0,255),o[2]=p(parseInt(o[2],10),0,255),o[3]&&(o[3]=p(parseFloat(o[3],10),0,1)),t)?o[3]?{r:o[0],g:o[1],b:o[2],a:o[3]}:{r:o[0],g:o[1],b:o[2]}:void 0!==o[3]&&o[3]<=1?"rgba("+o[0]+", "+o[1]+", "+o[2]+", "+o[3]+")":"rgb("+o[0]+", "+o[1]+", "+o[2]+")"}function $(i,t){return u(i)?d(i):h(i,t)}function p(i,t,o){return i<t&&(i=t),i>o&&(i=o),i}function u(i){var t=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!!t&&4===t.length}function g(i){return(i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===i.length?i[4]:"1"}function m(i){return(i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===i.length?"#"+("0"+parseInt(i[1],10).toString(16)).slice(-2)+("0"+parseInt(i[2],10).toString(16)).slice(-2)+("0"+parseInt(i[3],10).toString(16)).slice(-2):""}function f(t){var o=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return i.each(o,function(i,t){1===t.length&&(o[i]="0"+t)}),"#"+o.join("")}function _(i){return f(function i(t){var o={},s=Math.round(t.h),n=Math.round(255*t.s/100),a=Math.round(255*t.b/100);if(0===n)o.r=o.g=o.b=a;else{var r=a,e=(255-n)*a/255,c=(r-e)*(s%60)/60;360===s&&(s=0),s<60?(o.r=r,o.b=e,o.g=e+c):s<120?(o.g=r,o.b=e,o.r=r-c):s<180?(o.g=r,o.r=e,o.b=e+c):s<240?(o.b=r,o.r=e,o.g=r-c):s<300?(o.b=r,o.g=e,o.r=e+c):s<360?(o.r=r,o.g=e,o.b=r-c):(o.r=0,o.g=0,o.b=0)}return{r:Math.round(o.r),g:Math.round(o.g),b:Math.round(o.b)}}(i))}function v(i){return{r:(i=parseInt(i.indexOf("#")>-1?i.substring(1):i,16))>>16,g:(65280&i)>>8,b:255&i}}i.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom",show:null,showSpeed:100,theme:"default",swatches:[]}},i.extend(i.fn,{minicolors:function(n,a){var r,c,l,$,g,m,_;switch(n){case"destroy":return i(this).each(function(){t(i(this))}),i(this);case"hide":return s(),i(this);case"opacity":if(void 0===a)return i(this).attr("data-opacity");return i(this).each(function(){e(i(this).attr("data-opacity",a))}),i(this);case"rgbObject":return r=i(this),l=i(r).attr("data-opacity"),(c=u(i(r).val())?d(i(r).val(),!0):v(h(i(r).val(),!0)))?(void 0!==l&&i.extend(c,{a:parseFloat(l)}),c):null;case"rgbString":case"rgbaString":return $=i(this),g="rgbaString"===n,_=i($).attr("data-opacity"),(m=u(i($).val())?d(i($).val(),!0):v(h(i($).val(),!0)))?(void 0===_&&(_=1),g)?"rgba("+m.r+", "+m.g+", "+m.b+", "+parseFloat(_)+")":"rgb("+m.r+", "+m.g+", "+m.b+")":null;case"settings":if(void 0===a)return i(this).data("minicolors-settings");return i(this).each(function(){var o=i(this).data("minicolors-settings")||{};t(i(this)),i(this).minicolors(i.extend(!0,o,a))}),i(this);case"show":return o(i(this).eq(0)),i(this);case"value":if(void 0===a)return i(this).val();return i(this).each(function(){"object"==typeof a&&null!==a?(void 0!==a.opacity&&i(this).attr("data-opacity",p(a.opacity,0,1)),a.color&&i(this).val(a.color)):i(this).val(a),e(i(this))}),i(this);default:return"create"!==n&&(a=n),i(this).each(function(){(function t(o,s){var n,a,r,c,l,$,p=i('<div class="minicolors" />'),g=i.minicolors.defaults;if(!o.data("minicolors-initialized")){if(s=i.extend(!0,{},g,s),p.addClass("minicolors-theme-"+s.theme).toggleClass("minicolors-with-opacity",s.opacity),void 0!==s.position&&i.each(s.position.split(" "),function(){p.addClass("minicolors-position-"+this)}),a="rgb"===s.format?s.opacity?"25":"20":s.keywords?"11":"7",o.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",s).prop("size",a).wrap(p).after('<div class="minicolors-panel minicolors-slider-'+s.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),s.inline||(o.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),o.next(".minicolors-input-swatch").on("click",function(i){i.preventDefault(),o.focus()})),(l=o.parent().find(".minicolors-panel")).on("selectstart",function(){return!1}).end(),s.swatches&&0!==s.swatches.length)for(l.addClass("minicolors-with-swatches"),r=i('<ul class="minicolors-swatches"></ul>').appendTo(l),$=0;$<s.swatches.length;++$)"object"===i.type(s.swatches[$])?(n=s.swatches[$].name,c=s.swatches[$].color):(n="",c=s.swatches[$]),c=u(c)?d(c,!0):v(h(c,!0)),i('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color" title="'+n+'"></span></li>').appendTo(r).data("swatch-color",s.swatches[$]).find(".minicolors-swatch-color").css({backgroundColor:f(c),opacity:c.a}),s.swatches[$]=c;s.inline&&o.parent().addClass("minicolors-inline"),e(o,!1),o.data("minicolors-initialized",!0)}})(i(this),a)}),i(this)}}}),i([document]).on("mousedown.minicolors touchstart.minicolors",function(t){i(t.target).parents().add(t.target).hasClass("minicolors")||s()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(t){var o=i(this);t.preventDefault(),i(t.delegateTarget).data("minicolors-target",o),n(o,t,!0)}).on("mousemove.minicolors touchmove.minicolors",function(t){var o=i(t.delegateTarget).data("minicolors-target");o&&n(o,t)}).on("mouseup.minicolors touchend.minicolors",function(){i(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(t){t.preventDefault();var o=i(this),s=o.parents(".minicolors").find(".minicolors-input"),n=o.data("swatch-color");r(s,n,g(n)),e(s)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(t){var s=i(this).parent().find(".minicolors-input");t.preventDefault(),o(s)}).on("focus.minicolors",".minicolors-input",function(){var t=i(this);t.data("minicolors-initialized")&&o(t)}).on("blur.minicolors",".minicolors-input",function(){var t,o,s,n,a,r=i(this),e=r.data("minicolors-settings");r.data("minicolors-initialized")&&(t=e.keywords?i.map(e.keywords.split(","),function(t){return i.trim(t.toLowerCase())}):[],a=""!==r.val()&&i.inArray(r.val().toLowerCase(),t)>-1?r.val():null===(s=u(r.val())?d(r.val(),!0):(o=h(r.val(),!0))?v(o):null)?e.defaultValue:"rgb"===e.format?e.opacity?d("rgba("+s.r+","+s.g+","+s.b+","+r.attr("data-opacity")+")"):d("rgb("+s.r+","+s.g+","+s.b+")"):f(s),n=e.opacity?r.attr("data-opacity"):1,"transparent"===a.toLowerCase()&&(n=0),r.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",n),r.val(a),""===r.val()&&r.val($(e.defaultValue,!0)),r.val(l(r.val(),e.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(t){var o=i(this);if(o.data("minicolors-initialized"))switch(t.which){case 9:s();break;case 13:case 27:s(),o.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var t=i(this);t.data("minicolors-initialized")&&e(t,!0)}).on("paste.minicolors",".minicolors-input",function(){var t=i(this);t.data("minicolors-initialized")&&setTimeout(function(){e(t,!0)},1)})});