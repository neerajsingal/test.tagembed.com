"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[6447],{76447:(t,e,o)=>{o.r(e),o.d(e,{default:()=>S});var i=o(89379),a=o(9950),s=o(43927),l=o(52867),n=o(1391),r=o(41881),d=o(73878),u=o(98596),p=o(23419),h=o(66345),c=(o(47208),o(1480)),v=o(28981),g=o(44414);class m extends a.Component{constructor(){super(...arguments),this.state={init:!1,showFrePlan:!1,shopifyLogin:localStorage.getItem("shopifyLogin"),loading:!1,changePrice:!0,showContactUs:!1},this.SignUpPlanUpdate=async t=>{const{authorized:e}=this.props;this.setState({loading:!0});const o=(0,l.HA)(),i=new r.A;try{var a,n,d,u,v,g,m;if(200!==(await(0,s.yL)(t)).data.response_code)throw new Error("Plan update failed");const r=(null===e||void 0===e||null===(a=e.token)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.id)||(null===e||void 0===e||null===(d=e.userData)||void 0===d||null===(u=d.user_data)||void 0===u?void 0:u.user.id)||localStorage.getItem("ownerId"),S="shopify"===(null===e||void 0===e||null===(v=e.userData)||void 0===v||null===(g=v.user_data)||void 0===g||null===(m=g.sessionData)||void 0===m?void 0:m.createFrom),I=()=>{this.setState({loading:!1,init:!0}),localStorage.removeItem("steps"),i.remove("shoponUrl"),setTimeout((()=>{this.props.history("/home")}),100)};if(S)localStorage.removeItem("shopifyLogin"),localStorage.removeItem("steps"),setTimeout((()=>{(0,c.Tn)(localStorage.getItem("shopId"),(()=>{this.props.getUserInfo(this.props.history,"".concat(h.btP,"init/index/shopify"))}))}),100);else{(0,p.c)("planUpdated",{id:r,plan:""});const t=(0,l.UM)("shoponUrl");await I(t)}(0,l.b)(o)}catch(S){this.setState({loading:!1}),(0,l.b)(o)}}}componentDidMount(){this.props.PLAN__DETAILS(!0),this.setState({shopifyLogin:localStorage.getItem("shopifyLogin")}),setTimeout((()=>{var t,e,o,i,a,s,l,n,r,d,u,h;(0,p.MR)("getPlanUpdated".concat(null!=(null===(t=this.props.authorized)||void 0===t||null===(e=t.token)||void 0===e||null===(o=e.user)||void 0===o?void 0:o.id)?null===(i=this.props.authorized)||void 0===i||null===(a=i.token)||void 0===a||null===(s=a.user)||void 0===s?void 0:s.id:null!==(l=this.props.authorized)&&void 0!==l&&null!==(n=l.userData)&&void 0!==n&&null!==(r=n.user_data)&&void 0!==r&&r.user.id?null===(d=this.props.authorized)||void 0===d||null===(u=d.userData)||void 0===u||null===(h=u.user_data)||void 0===h?void 0:h.user.id:localStorage.getItem("ownerId")),(t=>{localStorage.removeItem("steps"),this.props.history("/home")}))}),1500),window.fpr("referral",{email:localStorage.getItem("emailId")})}render(){return(0,g.jsx)(u.A,(0,i.A)((0,i.A)({},this.props),{},{signUpPlan:!0,loading:this.state.loading,SignUpPlanUpdate:this.SignUpPlanUpdate}))}}const S=(0,d.Ng)((t=>{var e;return{authorized:t.authorized,priceDetail:null===(e=t.planPriceDetail)||void 0===e?void 0:e.planPrice}}),(t=>({PLAN__DETAILS:e=>t((0,s.mT)(e)),getUserInfo:(e,o)=>t((0,v.ug)(e,o))})))((0,n.A)(m))}}]);