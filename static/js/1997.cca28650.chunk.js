"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[1997],{1997:(e,s,t)=>{t.r(s),t.d(s,{default:()=>I});var a=t(9950),l=t(45358),r=t(471),i=t(1093),o=t(4342),n=t(34483),c=t(21432),d=t(95942),m=t(97937),h=t(42074),x=t(88053),b=t(59051),p=t.n(b),u=t(18633),g=t(54810),j=t(26806),y=t(73878),f=t(80322),v=t(54480),C=t(4695),w=t.n(C),N=t(1391),A=t(52867),k=t(43929),U=t(44414);const D=[{name:"Collaborator",width:160},{name:"Invited",width:130},{name:"Status",width:100},{name:"Permission",width:100},{name:"Invited By",width:120},{name:"Actions",width:70}];class S extends a.Component{constructor(){super(...arguments),this.state={loading:!0,userRole:null},this.getCollaborators=e=>{const{setCollaboratorList:s}=this.props;(0,f.xl)().then((t=>{const a=""==e.collaborator||0==e.collaborator.activeAccount?3:0,{workspace:l}=t.data.responseData;s(l),this.setState({loading:!1,userRole:a})})).catch((e=>{this.setState({loading:!1},(()=>{}))}))},this.modifyCollaborator=(e,s)=>{const{updateCollaboratorPermission:t,deleteCollaborator:a}=this.props;w().fire({title:"Are you sure?",text:"delete"==s?"Do you wish to continue and delete the chosen item?":"Modifying this setting will lead to alterations in permissions.",icon:"warning",showCancelButton:!0,confirmButtonText:"delete"==s?"Yes, delete it!":"Yes, change permission!",confirmButtonColor:"delete"!=s?"var(--bs-success)":""}).then((l=>{l.isConfirmed&&("delete"==s?a({collaborators:String(e)}):t(e))}))}}componentDidMount(){const{userData:e}=this.props;e&&this.getCollaborators(e)}componentWillReceiveProps(e){const{userData:s}=e;JSON.stringify(s)!=JSON.stringify(this.props.userData)&&this.getCollaborators(s)}render(){var e;const{loading:s,userRole:t}=this.state,{collaboratorList:a,userData:b}=this.props;return(0,U.jsx)(k.A,{userData:b,crumbs:[{name:"Collaborator",link:"/home",icon:"grid-2",imgUrl:null===b||void 0===b||null===(e=b.user)||void 0===e?void 0:e.picture},{name:"Home",link:"/Home"},{name:"Collaborator"}],children:(0,U.jsx)(l.A,{className:"container-collaborator",children:(0,U.jsxs)(r.A,{children:[(0,U.jsxs)(r.A.Header,{className:"f-between d-flex",children:[(0,U.jsx)("h2",{className:"me-2 h4 my-3",children:"Collaborator panel"}),(0,U.jsx)("div",{className:"f-center",children:(0,U.jsxs)(h.N_,{to:"/collaborator/add",className:"btn btn-primary my-2 btn-sm",title:"Invite Collaborator",children:[(0,U.jsx)(g.gc,{icon:"plus"}),"Invite collaborator"]})})]}),(0,U.jsx)(r.A.Body,{style:{height:"calc(100vh - 255px)",overflowY:"auto"},children:(0,U.jsx)("div",{style:{minHeight:"calc(100vh - 260px)"},children:s?(0,U.jsx)(u.a,{}):a.length>0?(0,U.jsx)("div",{className:"table-responsive",style:{minHeight:300},children:(0,U.jsxs)(i.A,{size:"lg",className:"align-middle gs-0 gy-3",children:[(0,U.jsx)("thead",{className:"thead-light",children:(0,U.jsx)("tr",{children:D.map(((e,s)=>(0,U.jsx)("th",{className:"fw-bold text-nowrap "+("Actions"==e.name?"text-end":""),style:{minWidth:e.width},children:e.name},s)))})}),(0,U.jsx)("tbody",{children:a.map((e=>(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsxs)("div",{className:"d-flex align-items-center",children:[(0,U.jsx)(x.A,{className:"symbol symbol-40 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:40,symbolClass:"symbol-label fs-6 bg-primary",name:e["UserCollab.name"],profileUrl:e["UserCollab.picture"],networkId:""}),(0,U.jsxs)("div",{className:"overflow-hidden",style:{maxWidth:200},children:[(0,U.jsx)("p",{className:"text-gray-dark fw-semibold mb-0 text-ellipsis fs-8",children:e["UserCollab.name"]}),(0,U.jsx)("span",{className:"fs-9 mb-0 text-gray-500 fw-medium text-ellipsis d-block",children:e["UserCollab.emailId"]})]})]})}),(0,U.jsxs)("td",{children:[(0,U.jsx)("p",{className:"text-gray-900 fw-medium mb-0 text-nowrap",children:p()(e["UserCollab.created"]).format("Do MMM YYYY")}),(0,U.jsx)("span",{className:"fs-9 fw-medium text-gray-500 text-nowrap",children:p().utc(new Date(e["UserCollab.created"])).format("h:mm a")})]}),(0,U.jsx)("td",{children:2!=e.status?(0,U.jsx)("label",{className:"form-check form-switch",children:(0,U.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1==e.status,onChange:()=>this.props.updateStatus(e)})}):(0,U.jsx)(o.A,{bg:"",className:"badge-light-warning",children:"Pending"})}),(0,U.jsx)("td",{children:(0,U.jsx)("div",{className:"d-flex align-items-center",children:3==t?(0,U.jsxs)(n.A,{style:{minWidth:200},children:[(0,U.jsx)(n.A.Toggle,{variant:"secondary",className:"d-flex align-items-center w-100 justify-content-between bg-white fs-9",children:1==e.role?"Admin":"Manager"}),(0,U.jsxs)(n.A.Menu,{className:"w-100",children:[(0,U.jsx)(n.A.Item,{onClick:()=>1==e.role?(0,A.r$)("Collaborator is already an admin."):this.modifyCollaborator(e,"change"),children:"Admin"},0),(0,U.jsx)(n.A.Item,{onClick:()=>2==e.role?(0,A.r$)("Collaborator is already a manager."):this.props.navigate(`/collaborator/edit/${e.id}?permission=1`),children:"Manager"},1)]})]}):1==e.role?"Admin":"Manager"})}),(0,U.jsx)("td",{children:(0,U.jsxs)("div",{className:"d-flex align-items-center cursor-pointer text-decoration-none",children:[(0,U.jsx)(x.A,{className:"symbol symbol-36 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:36,symbolClass:"symbol-label fs-6 bg-primary",name:e["UserAdmin.name"],profileUrl:e["UserAdmin.picture"]}),(0,U.jsx)("p",{className:"text-gray-dark fw-medium mb-0 text-ellipsis",children:e["UserAdmin.name"]})]})}),(0,U.jsx)("td",{className:"pr-0 text-end",children:(0,U.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[(0,U.jsx)(c.A,{placement:"top",overlay:(0,U.jsx)(d.A,{children:"Edit"}),children:(0,U.jsx)(h.N_,{to:`/collaborator/edit/${e.id}`,id:`col-edit-${e.id}`,className:"btn btn-icon btn-sm btn-active-primary ms-2",title:"Edit Collaborator",children:(0,U.jsx)(g.gc,{type:"solid",icon:"pen"})})}),(0,U.jsx)(c.A,{placement:"top",overlay:(0,U.jsx)(d.A,{children:"Remove"}),children:(0,U.jsx)(m.A,{id:`col-remove-${e.id}`,variant:"icon",size:"sm",className:"btn-active-danger ms-2","aria-label":"delete",onClick:()=>this.modifyCollaborator(e.id,"delete"),children:(0,U.jsx)(g.gc,{type:"solid",icon:"trash-can"})})})]})})]})))})]})}):(0,U.jsx)("div",{className:"f-center",style:{minHeight:"calc(100vh - 260px)"},children:(0,U.jsx)(j.A,{title:"Uh-oh! Nothing to see here.",desc:"You can start adding new collaborators here.",icon:"user-plus",button:{text:"Invite Collaborator",action:()=>this.props.navigate("/collaborator/add")},isFullScreen:!1})})})})]})})})}}const I=(0,y.Ng)((e=>{var s,t;return{collaboratorList:e.collaborator.collaboratorList,userData:null===(s=e.authorized)||void 0===s||null===(t=s.userData)||void 0===t?void 0:t.user_data}}),(e=>({deleteCollaborator:s=>e((0,f.gS)(s)),setCollaboratorList:s=>e({type:v.J_g,payload:s}),updateCollaboratorPermission:s=>e((0,f.LA)(s)),updateStatus:s=>e((0,f.yB)(s))})))((0,N.A)(S))}}]);