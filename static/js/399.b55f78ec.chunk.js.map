{"version":3,"file":"static/js/399.b55f78ec.chunk.js","mappings":"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","sources":["app/Layout/Main/CommonComponents/Notifications.js"],"sourcesContent":["import React, { Component, Fragment, memo } from 'react';\nimport { connect } from \"react-redux\";\nimport { Tab, Nav, Image } from 'react-bootstrap';\nimport moment from 'moment';\nimport { Link } from 'react-router-dom';\nimport { ImagePlaceholder } from \"../../../../Assets/AssetsHelper\";\nimport { geturl } from \"../../../../utils\"\nimport { getAllNotification } from '../../../../actions/notificationAction';\n\n\nexport const getNotifyLoad = (notifications) => {\n    var data = {}\n    if (notifications && notifications.length > 0) {\n        notifications.map((item) => {\n            if (data[moment(new Date(item.message.time * 1000)).fromNow()]) {\n                if (!data[moment(new Date(item.message.time * 1000)).fromNow()].includes(item.id)) {\n                    data[moment(new Date(item.message.time * 1000)).fromNow()].push(item)\n                }\n            }\n            else data[moment(new Date(item.message.time * 1000)).fromNow()] = [item]\n        })\n        return data\n    }\n    else return data\n}\nclass Notifications extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            notifications: getNotifyLoad(props.notificationList),\n        }\n    }\n    \n\n    getUnreadNotifications = (notifications) => {\n        if (notifications && Object.keys(notifications).length > 0) {\n            const unreadList = Object.entries(notifications).reduce((acc, [key, notify]) => {\n                const filtered = notify.filter(item => item.status == 0)\n                if (filtered.length > 0) acc.push([key, filtered])\n                return acc;\n            }, [])\n            return Object.fromEntries(unreadList)\n        }\n        else return {}\n    }\n\n    componentWillReceiveProps(nextProps) {\n        const { notificationList } = nextProps\n        if (JSON.stringify(notificationList) != JSON.stringify(this.state.notifications)) this.setState({ notifications: getNotifyLoad(notificationList) })\n    }\n\n    render() {\n        const { onNotificationToggle } = this.props\n        const { notifications } = this.state;\n        const unreadNotifications = this.getUnreadNotifications(notifications)\n        const content = window?.APP_CONTENT?.notification ?? {};\n\n        return <div className=\"w-100\">\n            <Tab.Container id=\"notifications_tab_panel\" defaultActiveKey=\"all-notifications\">\n                <div className=\"f-between px-3 border-bottom\">\n                    <Nav variant=\"underline\" className=\"nav\">\n                        <Nav.Item className=\"\">\n                            <Nav.Link className=\"me-3 py-3 px-0 fw-medium\" eventKey=\"all-notifications\">{content?.tabAll ?? ''}</Nav.Link>\n                        </Nav.Item>\n                        <Nav.Item className=\"\">\n                            <Nav.Link className=\"px-0 py-3 fw-medium\" eventKey=\"unread-notifications\">{content?.tabUnread ?? ''}</Nav.Link>\n                        </Nav.Item>\n                    </Nav>\n                    <div>\n\n                    {Object.keys(unreadNotifications).length > 0 ?   <button type=\"button\" className=\"btn btn-link btn-sm px-0 h-auto fw-bold text-decoration-none btn-active-color-primary\" onClick={() =>this.props.getAllNotification('markread','')}> {content?.markAll} </button>:''}\n                    </div>\n                </div>\n                <div className='overflow-auto' style={{height:380}}>\n                    {notifications && Object.keys(notifications).length > 0 ? <Tab.Content>\n                        <Tab.Pane eventKey=\"all-notifications\" className=\"pb-3 min-h-100\">\n                            {\n                                notifications && Object.keys(notifications).map((iNot, index) => {\n                                    return <Fragment key={index}><div className=\"f-between px-3 py-1\" >\n                                        <span className=\"fw-bold\">{iNot}</span>\n                                        <span className=\"bg-primary badge rounded-5 min-w-30 d-none\">{(notifications[iNot] && notifications[iNot].length > 0) ? notifications[iNot].length : 0}</span>\n                                    </div>\n                                        {notifications[iNot] && notifications[iNot].length > 0 ? <div className=\"\">\n\n                                            {\n                                                notifications[iNot].map((Item) => {\n                                                    return <Link to={geturl(Item.url)} key={Item.id} className={`px-3 d-flex align-items-start border-bottom notification-item${Item.status == 0 ? ` bg-gray-100` : ``}`}  onClick={() =>{ if(Item.status == 0) this.props.getAllNotification('all',Item.id); onNotificationToggle()}} title={Item.message.subject}>\n                                                        <div className=\"symbol symbol-38 rounded-1 overflow-hidden me-2 p-2\">\n                                                            <Image src={Item.message.photo} height=\"40\" width=\"40\" onError={event => event.target.src = ImagePlaceholder} alt={Item.message.subject} title={Item.message.subject} />\n                                                        </div>\n                                                        <div className=\"d-flex align-items-start flex-column flex-grow-1\">\n                                                            <div className=\"d-flex algin-items-center justify-content-between w-100\">\n                                                            {Item.message.subject != '' ? <span className=\"text-hover-primary text-gray-800 fw-bold me-2\">{Item.message.subject}</span>: null}\n                                                                <span className=\"text-gray-500 fs-9\">{moment(new Date(Item.message.time * 1000)).format(\"hh:mma\")}</span>\n                                                            </div>\n                                                            <div className=\"d-flex algin-items-start\">\n                                                                <span className=\"text-gray-700 fs-9\">\n                                                                    {Item.message.text}\n                                                                </span>\n                                                            </div>\n                                                        </div>\n                                                    </Link>\n\n                                                })\n                                            }\n\n                                        </div> : index == 0 ?\n                                            <div className=\"f-center\" style={{ height: 350 }}>\n                                                <p className=\"mb-0 text-muted\">{content?.msgall ?? ''}</p>\n                                            </div>\n                                            : null}\n                                    </Fragment>\n\n                                })\n                            }\n                        </Tab.Pane>\n                        <Tab.Pane eventKey=\"unread-notifications\" className=\"pb-3 min-h-100\">\n                            {unreadNotifications && Object.keys(unreadNotifications).length > 0 ? Object.keys(unreadNotifications).map((iNot, index) => {\n                                return <Fragment key={index}>\n                                    <div className=\"f-between px-3 py-1\">\n                                        <span className=\"fw-bold\">{iNot}</span>\n                                        <span className=\"bg-primary badge rounded-5 min-w-30 d-none\">{unreadNotifications[iNot] && unreadNotifications[iNot].length > 0 && unreadNotifications[iNot].filter((a) => a.status == 0).length > 0 ? unreadNotifications[iNot].filter((a) => a.status == 0).length : 0}</span>\n                                    </div>\n                                    {unreadNotifications[iNot] && unreadNotifications[iNot].length > 0 ?\n                                        <div className=\"\">\n                                            {unreadNotifications[iNot].map((Item, index) => {\n                                                return Item.status == 0 ?\n                                                    <Link to={Item.getNotificationUrl ? Item.getNotificationUrl : `#`} key={index} className=\"px-3 d-flex align-items-start border-bottom notification-item text-decoration-none\" onClick={() =>{ if(Item.status ==0) this.props.getAllNotification('all',Item.id); onNotificationToggle()}} title={Item.message.subject}>\n                                                        <div className=\"symbol symbol-38 rounded-1 overflow-hidden me-2 p-2\">\n                                                            <Image src={Item.message.photo} height=\"40\" width=\"40\" onError={event => event.target.src = ImagePlaceholder} alt={Item.message.subject} title={Item.message.subject}/>\n                                                        </div>\n                                                        <div className=\"d-flex align-items-start flex-column flex-grow-1\">\n                                                            <div className=\"d-flex algin-items-center justify-content-between w-100\">\n                                                                {Item.message.subject != '' ? <span className=\"text-hover-primary fw-bold text-decoration-none me-2\">{Item.message.subject}</span> : null}\n                                                                <span className=\"text-gray-500 fs-9\">{moment(new Date(Item.message.time * 1000)).format(\"hh:mma\")}</span>\n                                                            </div>\n                                                            <div className=\"d-flex algin-items-start\">\n                                                                <span className=\"text-gray-700 fs-9\">\n                                                                    {Item.message.text}\n                                                                </span>\n                                                            </div>\n                                                        </div>\n                                                    </Link> : null\n\n                                            })}\n                                        </div>\n                                        : null}\n                                </Fragment>\n                            }) :\n                                <div className=\"f-center\" style={{ height: 350 }}>\n                                    <p className=\"mb-0 text-gray-500 fs-8\">{content?.msgUnread ?? ''}</p>\n                                </div>\n                            }\n                        </Tab.Pane>\n                    </Tab.Content> : <div className=\"f-center\" style={{ height: 150 }}>\n                        <p className=\"mb-0 text-gray-500 fs-8\">{content?.msgall ?? ''}</p>\n                    </div>}\n                </div>\n            </Tab.Container>\n        </div>\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        notificationList: state.notification.notificationList\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        getAllNotification: (type,id) => dispatch(getAllNotification(type,id)),\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(memo(Notifications));"],"names":["getNotifyLoad","notifications","data","length","map","item","moment","Date","message","time","fromNow","includes","id","push","Notifications","Component","constructor","props","super","getUnreadNotifications","Object","keys","unreadList","entries","reduce","acc","_ref","key","notify","filtered","filter","status","fromEntries","this","state","notificationList","componentWillReceiveProps","nextProps","JSON","stringify","setState","render","_window$APP_CONTENT$n","_window","_window$APP_CONTENT","_content$tabAll","_content$tabUnread","_content$msgUnread","_content$msgall2","onNotificationToggle","unreadNotifications","content","window","APP_CONTENT","notification","_jsx","className","children","_jsxs","Tab","Container","defaultActiveKey","Nav","variant","Item","Link","eventKey","tabAll","tabUnread","type","onClick","getAllNotification","markAll","style","height","Content","Pane","iNot","index","_content$msgall","Fragment","to","geturl","url","concat","title","subject","Image","src","photo","width","onError","event","target","ImagePlaceholder","alt","format","text","msgall","a","getNotificationUrl","msgUnread","connect","dispatch","memo"],"sourceRoot":""}