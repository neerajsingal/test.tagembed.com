"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[5273],{55273:(e,l,o)=>{o.r(l),o.d(l,{default:()=>y});var s=o(89379),i=o(9950),n=o(34483),t=o(8966),a=o(97937),d=o(88053),r=o(52867),c=o(42074),u=o(66345),v=o(28981),m=o(73878),h=o(80322),p=o(54480),x=o(1391),b=o(44414);const f=e=>{let{progress:l,children:o}=e;return(0,b.jsxs)("div",{className:"progress-wrapper",children:[(0,b.jsxs)("div",{className:"progress-circle",children:[o,(0,b.jsxs)("svg",{className:"progress-ring",viewBox:"0 0 120 120",children:[(0,b.jsx)("circle",{className:"progress-bg",cx:"60",cy:"60",r:"54"}),(0,b.jsx)("circle",{className:"progress-bar",cx:"60",cy:"60",r:"54",style:{strokeDashoffset:339.292-l/100*339.292}})]})]}),(0,b.jsxs)("div",{className:"progress-label",children:[l,"%"]})]})};class g extends i.Component{constructor(e){var l,o,s;super(e),this.appContent=null!==(l=null===(o=window)||void 0===o||null===(s=o.APP_CONTENT)||void 0===s?void 0:s.header)&&void 0!==l?l:{},this.logOutAccount=e=>{e?(localStorage.clear(),this.setState({loading:!0}),window.location.href="https://".concat(u.Kmu,".taggbox.com/web-admin/users")):(this.setState({logOutSpinner:!0}),(0,v.y4)().then((e=>{localStorage.clear(),(0,r.Q$)("__TagshopLogin","tagshop.ai"),(0,r.Q$)("mfa_users"),setTimeout((()=>window.location.reload()),100)})).catch((e=>{})))},this.onEmailCopy=e=>l=>(0,r.x_)(e),this.handleToggle=()=>{this.setState((e=>({isOpen:!e.isOpen})))},this.handleOutsideClick=e=>{this.dropdownRef.current&&!this.dropdownRef.current.contains(e.target)&&this.setState({isOpen:!1})},this.collaboratorSwitcher=(e,l)=>{var o,s,i;const{setUserToken:n,setAuthentication:t,authorized:a}=this.props;if((null===a||void 0===a||null===(o=a.userData)||void 0===o?void 0:o.user_data).collaborator.activeAccount!=l){const l=(0,r.HA)();(0,h.pY)(e).then((e=>{var o,s,i;localStorage.clear();var{responseData:a}=e.data;localStorage.setItem("emailId",a.user.emailId),localStorage.setItem("token",a.token),n(a.token),t(a),(0,r._q)(l,"success",null!==(o=null===this||void 0===this||null===(s=this.appContent)||void 0===s?void 0:s.account_switched)&&void 0!==o?o:""),window.location.href="".concat(u.btP).concat(null!==a&&void 0!==a&&null!==(i=a.collaborator)&&void 0!==i&&i.activeAccount?"content":"home")})).catch((e=>{var o,s;(0,r._q)(l,"error",null!==(o=null===this||void 0===this||null===(s=this.appContent)||void 0===s?void 0:s.some_error_occured)&&void 0!==o?o:"")}))}else(0,r.r$)(null!==(s=null===this||void 0===this||null===(i=this.appContent)||void 0===i?void 0:i.already_login)&&void 0!==s?s:"")},this.state={logOutSpinner:!1,isOpen:!1,loading:!1},this.dropdownRef=i.createRef()}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick)}render(){var e,l,o,s,i,u,v,m,p,x,g,y,w,N,j,k,A,C,_,S,O,I,P,U,T,z,E,K,R,D,L,M,W,B,$;const{authorized:q,navigate:H}=this.props,{logOutSpinner:Q,show:Y,loading:J}=this.state,F=null!==(e=null===q||void 0===q||null===(l=q.userData)||void 0===l?void 0:l.user_data)&&void 0!==e?e:{},G=null!==(o=null===F||void 0===F||null===(s=F.user)||void 0===s?void 0:s.picture)&&void 0!==o?o:"",V=(0,r.lL)("accountExpire");return(0,b.jsxs)(n.A,{className:"f-center user_profile_ ms-lg-1 h-100",align:"end",show:this.state.isOpen,ref:this.dropdownRef,children:[(0,b.jsx)("span",{className:"h-24px border-start d-none d-lg-flex"}),(0,b.jsx)(n.A.Toggle,{variant:"link",id:"user_profile_",className:"btn author_profile p-0 border-0 text-decoration-none d-block overflow-hidden arrow_disabled ms-2",onClick:this.handleToggle,children:100==(null===F||void 0===F||null===(i=F.user)||void 0===i?void 0:i.profileProgress)?(0,b.jsx)(d.A,{className:"symbol symbol-34 rounded-circle overflow-hidden",imageSize:34,symbolClass:"symbol-label rounded-circle fs-6",name:null===F||void 0===F||null===(u=F.user)||void 0===u?void 0:u.name,profileUrl:G,networkId:0}):(0,b.jsx)(f,{progress:null===F||void 0===F||null===(v=F.user)||void 0===v?void 0:v.profileProgress,children:(0,b.jsx)(d.A,{className:"symbol symbol-34 rounded-circle overflow-hidden",imageSize:34,symbolClass:"symbol-label rounded-circle fs-6",name:null===F||void 0===F||null===(m=F.user)||void 0===m?void 0:m.name,profileUrl:G,networkId:0})})}),(0,b.jsxs)(n.A.Menu,{className:"p-0",show:Y,children:[(0,b.jsx)("div",{className:"f-center flex-column w-100 p-3 border-bottom custom-notifiction",children:(0,b.jsxs)("div",{className:"f-center flex-column w-100",children:[(0,b.jsx)(c.N_,{to:"/profile",className:"mb-2 p-1 rounded-circle",title:"Profile",children:100==(null===F||void 0===F||null===(p=F.user)||void 0===p?void 0:p.profileProgress)?(0,b.jsx)(d.A,{className:"symbol symbol-80 rounded-circle flex-shrink-0 overflow-hidden",imageSize:80,symbolClass:"symbol-label fw-bold text-uppercase display-2",name:null===F||void 0===F||null===(x=F.user)||void 0===x?void 0:x.name,profileUrl:G,networkId:0}):(0,b.jsx)(f,{progress:null===F||void 0===F||null===(g=F.user)||void 0===g?void 0:g.profileProgress,children:(0,b.jsx)(d.A,{className:"symbol symbol-80 rounded-circle flex-shrink-0 overflow-hidden",imageSize:80,symbolClass:"symbol-label fw-bold text-uppercase display-2",name:null===F||void 0===F||null===(y=F.user)||void 0===y?void 0:y.name,profileUrl:G,networkId:0})})}),(0,b.jsxs)("div",{className:"f-center flex-column w-100 ".concat(V?"text-muted":""),style:V?{pointerEvents:"none"}:{},children:[(0,b.jsx)("p",{className:" mb-0",children:(0,b.jsx)(c.N_,{to:"/profile",className:"fs-6 fw-bold text-break",title:"Profile",children:null===F||void 0===F||null===(w=F.user)||void 0===w?void 0:w.name})}),(0,b.jsx)("span",{className:"mb-0 text-gray-700 text-break fs-8 cursor-pointer mb-3",id:"headerProfileEmail",onClick:this.onEmailCopy("headerProfileEmail"),children:null===F||void 0===F||null===(N=F.user)||void 0===N?void 0:N.emailId}),(0,b.jsx)(c.N_,{to:"/profile",className:"btn btn-secondary rounded-pill w-100",style:{maxWidth:230},onClick:this.handleToggle,title:"Profile",children:null!==(j=null===this||void 0===this||null===(k=this.appContent)||void 0===k?void 0:k.profile_button)&&void 0!==j?j:""})]}),null!==F&&void 0!==F&&F.collaborator&&Object.keys(F.collaborator).length>0?(0,b.jsx)(t.A,{className:"w-100 mt-3 bg-body",defaultActiveKey:1==(null===F||void 0===F?void 0:F.collaborator.workplaces.length)&&null==(null===F||void 0===F?void 0:F.UserPlan.activatedAt)?0:"",children:(0,b.jsxs)(t.A.Item,{eventKey:0,className:"overflow-hidden",style:{borderRadius:30},children:[(0,b.jsx)(t.A.Header,{children:"".concat(null!=(null===F||void 0===F?void 0:F.UserPlan.activatedAt)||(null===F||void 0===F?void 0:F.collaborator.workplaces.length)>1?"Switch":"Collaborator"," Account")}),(0,b.jsxs)(t.A.Body,{className:"p-3",children:[F.collaborator.workplaces.map((e=>{var l,o,s,i;return(0,b.jsxs)(a.A,{variant:F.collaborator.activeAccount==(null===e||void 0===e?void 0:e.parent)?"light":"light-outline",size:"sm",className:"p-2 border-0 d-flex align-items-center w-100 mb-1 rounded-pill",onClick:()=>null!=(null===F||void 0===F?void 0:F.UserPlan.activatedAt)||(null===F||void 0===F?void 0:F.collaborator.workplaces.length)>1?this.collaboratorSwitcher(null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.parent):{},children:[(0,b.jsx)(d.A,{className:"symbol symbol-34 rounded-circle flex-shrink-0 overflow-hidden me-2",imageSize:34,symbolClass:"symbol-label fw-bold text-uppercase fs-6 bg-warning",name:"Shlok Bajoria",profileUrl:null===(l=e.UserAdmin)||void 0===l?void 0:l.picture,networkId:0}),(0,b.jsxs)("div",{className:"overflow-hidden w-100 text-start",style:{maxWidth:210},children:[(0,b.jsx)("p",{className:"mb-0 w-100 fw-bold text-ellipsis fs-9",children:null===(o=e.UserAdmin)||void 0===o?void 0:o.name}),(0,b.jsxs)("div",{className:"f-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:1==(null===e||void 0===e?void 0:e.role)?"Admin":"Manager"}),F.collaborator.activeAccount==(null===e||void 0===e?void 0:e.parent)?(0,b.jsx)("i",{className:"text-gray-500",children:null!==(s=null===this||void 0===this||null===(i=this.appContent)||void 0===i?void 0:i.role_current)&&void 0!==s?s:""}):null]})]})]})})),null!=(null===F||void 0===F?void 0:F.UserPlan.activatedAt)?(0,b.jsxs)(a.A,{variant:0==F.collaborator.activeAccount?"light":"light-outline",size:"sm",className:"p-2 border-0 d-flex align-items-center w-100 mb-1 rounded-pill",onClick:()=>this.collaboratorSwitcher(0,0),children:[(0,b.jsx)(d.A,{className:"symbol symbol-34 rounded-circle flex-shrink-0 overflow-hidden me-2",imageSize:34,symbolClass:"symbol-label fw-bold text-uppercase fs-6 bg-primary",name:null===F||void 0===F||null===(A=F.user)||void 0===A?void 0:A.name,profileUrl:null===F||void 0===F||null===(C=F.user)||void 0===C?void 0:C.picture,networkId:0}),(0,b.jsx)("div",{className:"overflow-hidden w-100 text-start",style:{maxWidth:210},children:(0,b.jsxs)("div",{className:"f-between",children:[(0,b.jsx)("p",{className:"mb-0 w-100 fw-bold text-ellipsis fs-9",children:null!==(_=null===this||void 0===this||null===(S=this.appContent)||void 0===S?void 0:S.my_account)&&void 0!==_?_:""}),0==F.collaborator.activeAccount?(0,b.jsx)("i",{className:"text-gray-500",children:null!==(O=null===this||void 0===this||null===(I=this.appContent)||void 0===I?void 0:I.role_current)&&void 0!==O?O:""}):null]})})]}):null]})]})}):null]})}),(0,b.jsxs)("div",{className:"px-5 mb-3",children:[JSON.parse(localStorage.getItem("isAdmin"))?(0,b.jsxs)(n.A.Item,{eventKey:"1",className:"navi-item px-0 py-2 py-xxl-3 border-bottom dropdown-item rounded-0 ".concat(J?"disabled":""),onClick:()=>this.logOutAccount(!0),children:[(0,b.jsx)("div",{className:"symbol symbol-36 me-3",children:(0,b.jsx)("div",{className:"symbol-label text-warning",children:(0,b.jsx)("i",{className:"fa-duotone me-0 fa-solid fa-user-gear"})})}),(0,b.jsx)("div",{className:"navi-text",children:(0,b.jsx)("div",{className:"fs-8 fw-semibold text-warning ".concat(J?"spinner spinner-gray":""),children:null!==(P=null===this||void 0===this||null===(U=this.appContent)||void 0===U?void 0:U.back_to_admin)&&void 0!==P?P:""})})]}):null,!F||""!=F.collaborator&&0!=(null===(T=F.collaborator)||void 0===T?void 0:T.activeAccount)?null:(0,b.jsxs)(c.N_,{eventKey:"2",className:"navi-item px-0 py-2 py-xxl-3 border-bottom dropdown-item rounded-0 dropdown-item",to:"/transactions",onClick:this.handleToggle,title:"Account",children:[(0,b.jsx)("div",{className:"symbol symbol-36 me-3",children:(0,b.jsx)("div",{className:"symbol-label",children:(0,b.jsx)("i",{className:"fa-duotone me-0 fa-solid fa-user-gear"})})}),(0,b.jsxs)("div",{className:"navi-text",children:[(0,b.jsx)("div",{className:"fs-8 fw-semibold mb-0",children:null!==(z=null===this||void 0===this||null===(E=this.appContent)||void 0===E?void 0:E.my_account)&&void 0!==z?z:""}),(0,b.jsx)("div",{className:"text-gray-700 fs-9",children:null!==(K=null===this||void 0===this||null===(R=this.appContent)||void 0===R?void 0:R.my_account_desc)&&void 0!==K?K:""})]})]}),(0,b.jsxs)("button",{eventKey:"3",className:"navi-item px-0 py-2 py-xxl-3 ".concat(localStorage.getItem("shopifyLogin")?"":"border-bottom"," dropdown-item rounded-0 dropdown-item ").concat(V?"text-muted":""),onClick:()=>(0,h.Yj)("networkManager","manageAccount")?this.setState({isOpen:!1},(()=>H("/social-account"))):{},style:V?{pointerEvents:"none"}:{},children:[(0,b.jsx)("div",{className:"symbol symbol-36 me-3",children:(0,b.jsx)("div",{className:"symbol-label",children:(0,b.jsx)("i",{className:"fa-duotone me-0 fa-solid fa-users-gear"})})}),(0,b.jsxs)("div",{className:"navi-text",children:[(0,b.jsx)("div",{className:"fs-8 fw-semibold mb-0",children:null!==(D=null===this||void 0===this||null===(L=this.appContent)||void 0===L?void 0:L.social_accounts)&&void 0!==D?D:""}),(0,b.jsx)("div",{className:"text-gray-700 fs-9",children:null!==(M=null===this||void 0===this||null===(W=this.appContent)||void 0===W?void 0:W.social_accounts_desc)&&void 0!==M?M:""})]})]}),(0,r.t9)()?"":(0,b.jsxs)(n.A.Item,{eventKey:"4",onClick:()=>this.logOutAccount(!1),className:"navi-item px-0 py-2 py-xxl-3 dropdown-item rounded-0 ".concat(Q?"disabled":""),children:[(0,b.jsx)("div",{className:"symbol symbol-36 me-3",children:(0,b.jsx)("div",{className:"symbol-label ".concat(Q?"text-gray-500":""),children:(0,b.jsx)("i",{className:"fa-duotone me-0 fa-solid fa-right-from-bracket"})})}),(0,b.jsx)("div",{className:"navi-text",children:(0,b.jsx)("div",{className:"fs-8 fw-semibold ".concat(Q?"spinner spinner-gray text-gray-500":""),children:null!==(B=null===this||void 0===this||null===($=this.appContent)||void 0===$?void 0:$.sign_out)&&void 0!==B?B:""})})]})]})]})]})}}const y=(0,m.Ng)(null,(e=>({checkCollaborator:(l,o)=>e((0,h.TU)(l,o)),setUserToken:l=>e({type:p.C01,payload:l}),setAuthentication:l=>e({type:p.wxv,payload:(0,s.A)({},l)})})))((0,x.A)(g))}}]);