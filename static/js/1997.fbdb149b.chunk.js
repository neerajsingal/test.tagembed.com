"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[1997],{1997:(l,e,i)=>{i.r(e),i.d(e,{default:()=>_});var o=i(9950),n=i(45358),a=i(471),s=i(1093),t=i(4342),d=i(34483),r=i(21432),c=i(95942),m=i(97937),v=i(42074),u=i(88053),h=i(59051),x=i.n(h),b=i(18633),p=i(54810),g=i(26806),j=i(73878),y=i(80322),f=i(54480),N=i(1391),w=i(52867),C=i(43929),A=i(44414);class k extends o.Component{constructor(){super(...arguments),this.state={loading:!0,userRole:null},this.getCollaborators=l=>{const{setCollaboratorList:e}=this.props;(0,y.xl)().then((i=>{const o=""==l.collaborator||0==l.collaborator.activeAccount?3:0,{workspace:n}=i.data.responseData;e(n),this.setState({loading:!1,userRole:o})})).catch((l=>{this.setState({loading:!1},(()=>{}))}))},this.modifyCollaborator=(l,e)=>{var i,o,n,a,s,t,d,r,c;const{updateCollaboratorPermission:m,deleteCollaborator:v}=this.props,u=null!==(i=null===(o=window)||void 0===o||null===(n=o.APP_CONTENT)||void 0===n?void 0:n.common)&&void 0!==i?i:null;(0,w.l1)({title:null!==(a=null===u||void 0===u?void 0:u.are_you_sure)&&void 0!==a?a:"",text:"delete"==e?null!==(s=null===u||void 0===u?void 0:u.delete_item)&&void 0!==s?s:"":null!==(t=null===u||void 0===u?void 0:u.modifying_setting)&&void 0!==t?t:"",icon:"warning",showCancelButton:!0,confirmButtonText:"delete"==e?null!==(d=null===u||void 0===u?void 0:u.yes_delete)&&void 0!==d?d:"":null!==(r=null===u||void 0===u?void 0:u.yes_change)&&void 0!==r?r:"",confirmButtonColor:"delete"!=e?"var(--bs-success)":"",cancelButtonText:null!==(c=null===u||void 0===u?void 0:u.cancel)&&void 0!==c?c:""}).then((i=>{i.isConfirmed&&("delete"==e?v({collaborators:String(l)}):m(l))}))}}componentDidMount(){const{userData:l}=this.props;l&&this.getCollaborators(l)}componentWillReceiveProps(l){const{userData:e}=l;JSON.stringify(e)!=JSON.stringify(this.props.userData)&&this.getCollaborators(e)}render(){var l,e,i,o,h,j,y,f,N,k,_,D,U,S,P,T,B,L,z;const{loading:M,userRole:O}=this.state,{collaboratorList:Y,userData:H}=this.props,I=null!==(l=null===(e=window)||void 0===e||null===(i=e.APP_CONTENT)||void 0===i?void 0:i.common)&&void 0!==l?l:null,R=null!==(o=null===(h=window)||void 0===h||null===(j=h.APP_CONTENT)||void 0===j?void 0:j.collab)&&void 0!==o?o:null;return(0,A.jsx)(C.A,{userData:H,crumbs:[{name:"Collaborator",link:"/home",icon:"grid-2",imgUrl:null===H||void 0===H||null===(y=H.user)||void 0===y?void 0:y.picture},{name:"Home",link:"/home"},{name:"Collaborator"}],children:(0,A.jsx)(n.A,{className:"container-collaborator",children:(0,A.jsxs)(a.A,{children:[(0,A.jsxs)(a.A.Header,{className:"f-between d-flex",children:[(0,A.jsx)("h2",{className:"me-2 h4 my-3",children:null!==(f=null===R||void 0===R?void 0:R.title)&&void 0!==f?f:""}),(0,A.jsx)("div",{className:"f-center",children:(0,A.jsxs)(v.N_,{to:"/collaborator/add",className:"btn btn-primary my-2 btn-sm",title:null!==(N=null===R||void 0===R?void 0:R.invite)&&void 0!==N?N:"",children:[(0,A.jsx)(p.gc,{icon:"plus"}),null!==(k=null===R||void 0===R?void 0:R.invite)&&void 0!==k?k:""]})})]}),(0,A.jsx)(a.A.Body,{style:{height:"calc(100vh - 255px)",overflowY:"auto"},children:(0,A.jsx)("div",{style:{minHeight:"calc(100vh - 287px)"},children:M?(0,A.jsx)(b.a,{}):Y.length>0?(0,A.jsx)("div",{className:"table-responsive",children:(0,A.jsxs)(s.A,{size:"lg",className:"align-middle gs-0 gy-3",children:[(0,A.jsx)("thead",{className:"thead-light",children:(0,A.jsx)("tr",{children:[{name:null!==(_=null===I||void 0===I?void 0:I.collaborator)&&void 0!==_?_:"",width:160},{name:null!==(D=null===I||void 0===I?void 0:I.invited)&&void 0!==D?D:"",width:130},{name:null!==(U=null===I||void 0===I?void 0:I.status)&&void 0!==U?U:"",width:100},{name:null!==(S=null===I||void 0===I?void 0:I.permission)&&void 0!==S?S:"",width:100},{name:null!==(P=null===I||void 0===I?void 0:I.invited_by)&&void 0!==P?P:"",width:120},{name:null!==(T=null===I||void 0===I?void 0:I.action)&&void 0!==T?T:"",width:70}].map(((l,e)=>(0,A.jsx)("th",{className:"fw-bold text-nowrap ".concat("Actions"==l.name?"text-end":""),style:{minWidth:l.width},children:l.name},e)))})}),(0,A.jsx)("tbody",{children:Y.map((l=>{var e,i,o,n,a,s,h,b,g,j;return(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:(0,A.jsxs)("div",{className:"d-flex align-items-center",children:[(0,A.jsx)(u.A,{className:"symbol symbol-40 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:40,symbolClass:"symbol-label fs-6 bg-primary",name:l["UserCollab.name"],profileUrl:l["UserCollab.picture"],networkId:""}),(0,A.jsxs)("div",{className:"overflow-hidden",style:{maxWidth:200},children:[(0,A.jsx)("p",{className:"text-gray-dark fw-semibold mb-0 text-ellipsis fs-8",children:l["UserCollab.name"]}),(0,A.jsx)("span",{className:"fs-9 mb-0 text-gray-500 fw-medium text-ellipsis d-block",children:l["UserCollab.emailId"]})]})]})}),(0,A.jsxs)("td",{children:[(0,A.jsx)("p",{className:"text-gray-900 fw-medium mb-0 text-nowrap",children:x()(l["UserCollab.created"]).format("Do MMM YYYY")}),(0,A.jsx)("span",{className:"fs-9 fw-medium text-gray-500 text-nowrap",children:x().utc(new Date(l["UserCollab.created"])).format("h:mm a")})]}),(0,A.jsx)("td",{children:2!=l.status?(0,A.jsx)("label",{className:"form-check form-switch",children:(0,A.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1==l.status,onChange:()=>this.props.updateStatus(l)})}):(0,A.jsx)(t.A,{bg:"",className:"badge-light-warning",children:null!==(e=null===I||void 0===I?void 0:I.pending)&&void 0!==e?e:""})}),(0,A.jsx)("td",{children:(0,A.jsx)("div",{className:"d-flex align-items-center",children:3==O?(0,A.jsxs)(d.A,{style:{minWidth:200},children:[(0,A.jsx)(d.A.Toggle,{variant:"secondary",className:"d-flex align-items-center w-100 justify-content-between bg-white fs-9",children:1==l.role?null!==(i=null===I||void 0===I?void 0:I.admin)&&void 0!==i?i:"":null!==(o=null===I||void 0===I?void 0:I.manager)&&void 0!==o?o:""}),(0,A.jsxs)(d.A.Menu,{className:"w-100",children:[(0,A.jsx)(d.A.Item,{onClick:()=>1==l.role?(0,w.r$)("Collaborator is already an admin."):this.modifyCollaborator(l,"change"),children:null!==(n=null===I||void 0===I?void 0:I.admin)&&void 0!==n?n:""},0),(0,A.jsx)(d.A.Item,{onClick:()=>2==l.role?(0,w.r$)("Collaborator is already a manager."):this.props.navigate("/collaborator/edit/".concat(l.id,"?permission=1")),children:null!==(a=null===I||void 0===I?void 0:I.manager)&&void 0!==a?a:""},1)]})]}):1==l.role?null!==(s=null===I||void 0===I?void 0:I.admin)&&void 0!==s?s:"":null!==(h=null===I||void 0===I?void 0:I.manager)&&void 0!==h?h:""})}),(0,A.jsx)("td",{children:(0,A.jsxs)("div",{className:"d-flex align-items-center cursor-pointer text-decoration-none",children:[(0,A.jsx)(u.A,{className:"symbol symbol-36 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:36,symbolClass:"symbol-label fs-6 bg-primary",name:l["UserAdmin.name"],profileUrl:l["UserAdmin.picture"]}),(0,A.jsx)("p",{className:"text-gray-dark fw-medium mb-0 text-ellipsis",children:l["UserAdmin.name"]})]})}),(0,A.jsx)("td",{className:"pr-0 text-end",children:(0,A.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[(0,A.jsx)(r.A,{placement:"top",overlay:(0,A.jsx)(c.A,{children:null!==(b=null===I||void 0===I?void 0:I.edit)&&void 0!==b?b:""}),children:(0,A.jsx)(v.N_,{to:"/collaborator/edit/".concat(l.id),id:"col-edit-".concat(l.id),className:"btn btn-icon btn-sm btn-active-primary ms-2",title:null!==(g=null===I||void 0===I?void 0:I.edit)&&void 0!==g?g:"",children:(0,A.jsx)(p.gc,{type:"solid",icon:"pen"})})}),(0,A.jsx)(r.A,{placement:"top",overlay:(0,A.jsx)(c.A,{children:null!==(j=null===I||void 0===I?void 0:I.remove)&&void 0!==j?j:""}),children:(0,A.jsx)(m.A,{id:"col-remove-".concat(l.id),variant:"icon",size:"sm",className:"btn-active-danger ms-2","aria-label":"delete",onClick:()=>this.modifyCollaborator(l.id,"delete"),children:(0,A.jsx)(p.gc,{type:"solid",icon:"trash-can"})})})]})})]})}))})]})}):(0,A.jsx)("div",{className:"f-center",style:{minHeight:"calc(100vh - 260px)"},children:(0,A.jsx)(g.A,{title:null!==(B=null===R||void 0===R?void 0:R.no_collab)&&void 0!==B?B:"",desc:null!==(L=null===R||void 0===R?void 0:R.no_collab_desc)&&void 0!==L?L:"",icon:"user-plus",iconDark:"user-plus-dark",button:{text:null!==(z=null===R||void 0===R?void 0:R.invite)&&void 0!==z?z:"",action:()=>this.props.navigate("/collaborator/add")},isFullScreen:!1})})})})]})})})}}const _=(0,j.Ng)((l=>{var e,i;return{collaboratorList:l.collaborator.collaboratorList,userData:null===(e=l.authorized)||void 0===e||null===(i=e.userData)||void 0===i?void 0:i.user_data}}),(l=>({deleteCollaborator:e=>l((0,y.gS)(e)),setCollaboratorList:e=>l({type:f.J_g,payload:e}),updateCollaboratorPermission:e=>l((0,y.LA)(e)),updateStatus:e=>l((0,y.yB)(e))})))((0,N.A)(k))}}]);