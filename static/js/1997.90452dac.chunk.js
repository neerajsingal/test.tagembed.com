"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[1997],{1997:(e,l,a)=>{a.r(l),a.d(l,{default:()=>I});var s=a(9950),t=a(45358),i=a(471),r=a(1093),o=a(4342),n=a(34483),c=a(21432),d=a(95942),m=a(97937),h=a(42074),x=a(88053),b=a(59051),u=a.n(b),p=a(18633),j=a(54810),g=a(26806),v=a(73878),f=a(80322),N=a(54480),y=a(4695),C=a.n(y),w=a(1391),A=a(52867),k=a(98304),S=a(44414);const U=[{name:"Collaborator",width:160},{name:"Invited",width:130},{name:"Status",width:100},{name:"Permission",width:100},{name:"Invited By",width:120},{name:"Actions",width:70}];class D extends s.Component{constructor(){super(...arguments),this.state={loading:!0,userRole:null},this.getCollaborators=e=>{const{setCollaboratorList:l}=this.props;(0,f.xl)().then((a=>{const s=""==e.collaborator||0==e.collaborator.activeAccount?3:0,{workspace:t}=a.data.responseData;l(t),this.setState({loading:!1,userRole:s})})).catch((e=>{this.setState({loading:!1},(()=>{}))}))},this.modifyCollaborator=(e,l)=>{const{updateCollaboratorPermission:a,deleteCollaborator:s}=this.props;C().fire({title:"Are you sure?",text:"delete"==l?"Do you wish to continue and delete the chosen item?":"Modifying this setting will lead to alterations in permissions.",icon:"warning",showCancelButton:!0,confirmButtonText:"delete"==l?"Yes, delete it!":"Yes, change permission!",confirmButtonColor:"delete"!=l?"var(--bs-success)":""}).then((t=>{t.isConfirmed&&("delete"==l?s({collaborators:String(e)}):a(e))}))}}componentDidMount(){const{userData:e}=this.props;e&&this.getCollaborators(e)}componentWillReceiveProps(e){const{userData:l}=e;JSON.stringify(l)!=JSON.stringify(this.props.userData)&&this.getCollaborators(l)}render(){var e,l;const{loading:a,userRole:s}=this.state,{collaboratorList:b,userData:v}=this.props;return(0,S.jsxs)(S.Fragment,{children:[(0,A.C2)()?null:(0,S.jsx)("div",{className:"sub-crumbs f-between flex-wrap border-bottom h-50px py-0",fluid:"true",children:(0,S.jsx)("div",{className:"d-flex align-items-center flex-wrap",children:(0,S.jsx)(k.A,{crumbs:[{name:"Collaborator",link:"/home",icon:"grid-2",imgUrl:null===v||void 0===v||null===(e=v.user)||void 0===e?void 0:e.picture},{name:"Home",link:"/Home"},{name:"Collaborator"}]})})}),(0,S.jsx)("div",{className:"subheader",children:(0,S.jsx)(t.A,{fluid:!0,children:(0,S.jsxs)("div",{className:"nav nav-underline",children:[(0,S.jsx)("div",{className:"nav-item",children:(0,S.jsx)(h.N_,{to:"/profile",className:"nav-link",title:"Profile",children:"Profile"})}),!v||""!=v.collaborator&&0!=(null===(l=v.collaborator)||void 0===l?void 0:l.activeAccount)?null:(0,S.jsx)("div",{className:"nav-item",children:(0,S.jsx)(h.N_,{to:"/transactions",className:"nav-link",title:"Plan Details",children:"Plan details"})}),(0,S.jsx)("div",{className:"nav-item",children:(0,S.jsx)(h.N_,{to:"/social-account",className:"nav-link",title:"Accounts",children:"Social accounts"})}),(0,S.jsx)("div",{className:"nav-item",children:(0,S.jsx)(h.N_,{to:"/collaborator",className:"nav-link active",title:"Collaborator",children:"Collaborator"})})]})})}),(0,S.jsx)("div",{className:"d-flex flex-column flex-column-fluid full-content",children:(0,S.jsx)(t.A,{className:"container-collaborator",children:(0,S.jsxs)(i.A,{children:[(0,S.jsxs)(i.A.Header,{className:"f-between d-flex",children:[(0,S.jsx)("h2",{className:"me-2 h4 my-3",children:"Collaborator panel"}),(0,S.jsx)("div",{className:"f-center",children:(0,S.jsxs)(h.N_,{to:"/collaborator/add",className:"btn btn-primary my-2 btn-sm",title:"Invite Collaborator",children:[(0,S.jsx)(j.gc,{icon:"plus"}),"Invite collaborator"]})})]}),(0,S.jsx)(i.A.Body,{style:{height:"calc(100vh - 255px)",overflowY:"auto"},children:(0,S.jsx)("div",{style:{minHeight:"calc(100vh - 260px)"},children:a?(0,S.jsx)(p.a,{}):b.length>0?(0,S.jsx)("div",{className:"table-responsive",style:{minHeight:300},children:(0,S.jsxs)(r.A,{size:"lg",className:"align-middle gs-0 gy-3",children:[(0,S.jsx)("thead",{className:"thead-light",children:(0,S.jsx)("tr",{children:U.map(((e,l)=>(0,S.jsx)("th",{className:"fw-bold text-nowrap "+("Actions"==e.name?"text-end":""),style:{minWidth:e.width},children:e.name},l)))})}),(0,S.jsx)("tbody",{children:b.map((e=>(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:(0,S.jsxs)("div",{className:"d-flex align-items-center",children:[(0,S.jsx)(x.A,{className:"symbol symbol-40 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:40,symbolClass:"symbol-label fs-6 bg-primary",name:e["UserCollab.name"],profileUrl:e["UserCollab.picture"],networkId:""}),(0,S.jsxs)("div",{className:"overflow-hidden",style:{maxWidth:200},children:[(0,S.jsx)("p",{className:"text-gray-dark fw-semibold mb-0 text-ellipsis fs-8",children:e["UserCollab.name"]}),(0,S.jsx)("span",{className:"fs-9 mb-0 text-gray-500 fw-medium text-ellipsis d-block",children:e["UserCollab.emailId"]})]})]})}),(0,S.jsxs)("td",{children:[(0,S.jsx)("p",{className:"text-gray-900 fw-medium mb-0 text-nowrap",children:u()(e["UserCollab.created"]).format("Do MMM YYYY")}),(0,S.jsx)("span",{className:"fs-9 fw-medium text-gray-500 text-nowrap",children:u().utc(new Date(e["UserCollab.created"])).format("h:mm a")})]}),(0,S.jsx)("td",{children:2!=e.status?(0,S.jsx)("label",{className:"form-check form-switch",children:(0,S.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1==e.status,onChange:()=>this.props.updateStatus(e)})}):(0,S.jsx)(o.A,{bg:"",className:"badge-light-warning",children:"Pending"})}),(0,S.jsx)("td",{children:(0,S.jsx)("div",{className:"d-flex align-items-center",children:3==s?(0,S.jsxs)(n.A,{style:{minWidth:200},children:[(0,S.jsx)(n.A.Toggle,{variant:"secondary",className:"d-flex align-items-center w-100 justify-content-between bg-white fs-9",children:1==e.role?"Admin":"Manager"}),(0,S.jsxs)(n.A.Menu,{className:"w-100",children:[(0,S.jsx)(n.A.Item,{onClick:()=>1==e.role?(0,A.r$)("Collaborator is already an admin."):this.modifyCollaborator(e,"change"),children:"Admin"},0),(0,S.jsx)(n.A.Item,{onClick:()=>2==e.role?(0,A.r$)("Collaborator is already a manager."):this.props.navigate(`/collaborator/edit/${e.id}?permission=1`),children:"Manager"},1)]})]}):1==e.role?"Admin":"Manager"})}),(0,S.jsx)("td",{children:(0,S.jsxs)("div",{className:"d-flex align-items-center cursor-pointer text-decoration-none",children:[(0,S.jsx)(x.A,{className:"symbol symbol-36 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:36,symbolClass:"symbol-label fs-6 bg-primary",name:e["UserAdmin.name"],profileUrl:e["UserAdmin.picture"]}),(0,S.jsx)("p",{className:"text-gray-dark fw-medium mb-0 text-ellipsis",children:e["UserAdmin.name"]})]})}),(0,S.jsx)("td",{className:"pr-0 text-end",children:(0,S.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[(0,S.jsx)(c.A,{placement:"top",overlay:(0,S.jsx)(d.A,{children:"Edit"}),children:(0,S.jsx)(h.N_,{to:`/collaborator/edit/${e.id}`,id:`col-edit-${e.id}`,className:"btn btn-icon btn-sm btn-active-primary ms-2",title:"Edit Collaborator",children:(0,S.jsx)(j.gc,{type:"solid",icon:"pen"})})}),(0,S.jsx)(c.A,{placement:"top",overlay:(0,S.jsx)(d.A,{children:"Remove"}),children:(0,S.jsx)(m.A,{id:`col-remove-${e.id}`,variant:"icon",size:"sm",className:"btn-active-danger ms-2","aria-label":"delete",onClick:()=>this.modifyCollaborator(e.id,"delete"),children:(0,S.jsx)(j.gc,{type:"solid",icon:"trash-can"})})})]})})]})))})]})}):(0,S.jsx)("div",{className:"f-center",style:{minHeight:"calc(100vh - 260px)"},children:(0,S.jsx)(g.A,{title:"Uh-oh! Nothing to see here.",desc:"You can start adding new collaborators here.",icon:"user-plus",button:{text:"Invite Collaborator",action:()=>this.props.navigate("/collaborator/add")},isFullScreen:!1})})})})]})})})]})}}const I=(0,v.Ng)((e=>{var l,a;return{collaboratorList:e.collaborator.collaboratorList,userData:null===(l=e.authorized)||void 0===l||null===(a=l.userData)||void 0===a?void 0:a.user_data}}),(e=>({deleteCollaborator:l=>e((0,f.gS)(l)),setCollaboratorList:l=>e({type:N.J_g,payload:l}),updateCollaboratorPermission:l=>e((0,f.LA)(l)),updateStatus:l=>e((0,f.yB)(l))})))((0,w.A)(D))}}]);