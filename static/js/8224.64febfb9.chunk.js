"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[8224],{58224(e,s,t){t.r(s),t.d(s,{default:()=>j,getNotifyLoad:()=>f});var i=t(9950),n=t(73878),a=t(51960),l=t(98361),o=t(80409),c=t(59051),r=t.n(c),d=t(42074),m=t(54810),h=t(52867),x=t(13448),g=t(44414);const f=e=>{var s={};return e&&e.length>0?(e.map(e=>{s[r()(new Date(1e3*e.message.time)).fromNow()]?s[r()(new Date(1e3*e.message.time)).fromNow()].includes(e.id)||s[r()(new Date(1e3*e.message.time)).fromNow()].push(e):s[r()(new Date(1e3*e.message.time)).fromNow()]=[e]}),s):s};class u extends i.Component{constructor(e){super(e),this.getUnreadNotifications=e=>{if(e&&Object.keys(e).length>0){const s=Object.entries(e).reduce((e,s)=>{let[t,i]=s;const n=i.filter(e=>0==e.status);return n.length>0&&e.push([t,n]),e},[]);return Object.fromEntries(s)}return{}},this.state={notifications:f(e.notificationList)}}componentWillReceiveProps(e){const{notificationList:s}=e;JSON.stringify(s)!=JSON.stringify(this.state.notifications)&&this.setState({notifications:f(s)})}render(){var e,s,t,n,c,x,f;const{onNotificationToggle:u}=this.props,{notifications:j}=this.state,N=this.getUnreadNotifications(j),b=null!==(e=null===(s=window)||void 0===s||null===(t=s.APP_CONTENT)||void 0===t?void 0:t.notification)&&void 0!==e?e:{};return(0,g.jsx)("div",{className:"w-100",children:(0,g.jsxs)(o.A.Container,{id:"notifications_tab_panel",defaultActiveKey:"all-notifications",children:[(0,g.jsxs)("div",{className:"f-between px-3 border-bottom",children:[(0,g.jsxs)(l.A,{variant:"underline",className:"nav",children:[(0,g.jsx)(l.A.Item,{className:"",children:(0,g.jsx)(l.A.Link,{className:"me-3 py-3 px-0 fw-medium",eventKey:"all-notifications",children:null!==(n=null===b||void 0===b?void 0:b.tabAll)&&void 0!==n?n:""})}),(0,g.jsx)(l.A.Item,{className:"",children:(0,g.jsx)(l.A.Link,{className:"px-0 py-3 fw-medium",eventKey:"unread-notifications",children:null!==(c=null===b||void 0===b?void 0:b.tabUnread)&&void 0!==c?c:""})})]}),(0,g.jsx)("div",{children:Object.keys(N).length>0?(0,g.jsxs)("button",{type:"button",className:"btn btn-link btn-sm px-0 h-auto fw-bold text-decoration-none btn-active-color-primary",onClick:()=>this.props.getAllNotification("markread",""),children:[" ",null===b||void 0===b?void 0:b.markAll," "]}):""})]}),(0,g.jsx)("div",{className:"overflow-auto",style:{height:380},children:j&&Object.keys(j).length>0?(0,g.jsxs)(o.A.Content,{children:[(0,g.jsx)(o.A.Pane,{eventKey:"all-notifications",className:"pb-3 min-h-100",children:j&&Object.keys(j).map((e,s)=>{var t;return(0,g.jsxs)(i.Fragment,{children:[(0,g.jsxs)("div",{className:"f-between px-3 py-1",children:[(0,g.jsx)("span",{className:"fw-bold",children:e}),(0,g.jsx)("span",{className:"bg-primary badge rounded-5 min-w-30 d-none",children:j[e]&&j[e].length>0?j[e].length:0})]}),j[e]&&j[e].length>0?(0,g.jsx)("div",{className:"",children:j[e].map(e=>(0,g.jsxs)(d.N_,{to:(0,h.cD)(e.url),className:"px-3 d-flex align-items-start border-bottom notification-item".concat(0==e.status?" bg-gray-100":""),onClick:()=>{0==e.status&&this.props.getAllNotification("all",e.id),u()},title:e.message.subject,children:[(0,g.jsx)("div",{className:"symbol symbol-38 rounded-1 overflow-hidden me-2 p-2",children:(0,g.jsx)(a.A,{src:e.message.photo,height:"40",width:"40",onError:e=>e.target.src=m.xb,alt:e.message.subject,title:e.message.subject})}),(0,g.jsxs)("div",{className:"d-flex align-items-start flex-column flex-grow-1",children:[(0,g.jsxs)("div",{className:"d-flex algin-items-center justify-content-between w-100",children:[""!=e.message.subject?(0,g.jsx)("span",{className:"text-hover-primary text-gray-800 fw-bold me-2",children:e.message.subject}):null,(0,g.jsx)("span",{className:"text-gray-500 fs-9",children:r()(new Date(1e3*e.message.time)).format("hh:mma")})]}),(0,g.jsx)("div",{className:"d-flex algin-items-start",children:(0,g.jsx)("span",{className:"text-gray-700 fs-9",children:e.message.text})})]})]},e.id))}):0==s?(0,g.jsx)("div",{className:"f-center",style:{height:350},children:(0,g.jsx)("p",{className:"mb-0 text-muted",children:null!==(t=null===b||void 0===b?void 0:b.msgall)&&void 0!==t?t:""})}):null]},s)})}),(0,g.jsx)(o.A.Pane,{eventKey:"unread-notifications",className:"pb-3 min-h-100",children:N&&Object.keys(N).length>0?Object.keys(N).map((e,s)=>(0,g.jsxs)(i.Fragment,{children:[(0,g.jsxs)("div",{className:"f-between px-3 py-1",children:[(0,g.jsx)("span",{className:"fw-bold",children:e}),(0,g.jsx)("span",{className:"bg-primary badge rounded-5 min-w-30 d-none",children:N[e]&&N[e].length>0&&N[e].filter(e=>0==e.status).length>0?N[e].filter(e=>0==e.status).length:0})]}),N[e]&&N[e].length>0?(0,g.jsx)("div",{className:"",children:N[e].map((e,s)=>0==e.status?(0,g.jsxs)(d.N_,{to:e.getNotificationUrl?e.getNotificationUrl:"#",className:"px-3 d-flex align-items-start border-bottom notification-item text-decoration-none",onClick:()=>{0==e.status&&this.props.getAllNotification("all",e.id),u()},title:e.message.subject,children:[(0,g.jsx)("div",{className:"symbol symbol-38 rounded-1 overflow-hidden me-2 p-2",children:(0,g.jsx)(a.A,{src:e.message.photo,height:"40",width:"40",onError:e=>e.target.src=m.xb,alt:e.message.subject,title:e.message.subject})}),(0,g.jsxs)("div",{className:"d-flex align-items-start flex-column flex-grow-1",children:[(0,g.jsxs)("div",{className:"d-flex algin-items-center justify-content-between w-100",children:[""!=e.message.subject?(0,g.jsx)("span",{className:"text-hover-primary fw-bold text-decoration-none me-2",children:e.message.subject}):null,(0,g.jsx)("span",{className:"text-gray-500 fs-9",children:r()(new Date(1e3*e.message.time)).format("hh:mma")})]}),(0,g.jsx)("div",{className:"d-flex algin-items-start",children:(0,g.jsx)("span",{className:"text-gray-700 fs-9",children:e.message.text})})]})]},s):null)}):null]},s)):(0,g.jsx)("div",{className:"f-center",style:{height:350},children:(0,g.jsx)("p",{className:"mb-0 text-gray-500 fs-8",children:null!==(x=null===b||void 0===b?void 0:b.msgUnread)&&void 0!==x?x:""})})})]}):(0,g.jsx)("div",{className:"f-center",style:{height:150},children:(0,g.jsx)("p",{className:"mb-0 text-gray-500 fs-8",children:null!==(f=null===b||void 0===b?void 0:b.msgall)&&void 0!==f?f:""})})})]})})}}const j=(0,n.Ng)(e=>({notificationList:e.notification.notificationList}),e=>({getAllNotification:(s,t)=>e((0,x.P)(s,t))}))((0,i.memo)(u))}}]);