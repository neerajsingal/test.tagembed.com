"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[6447],{76447:(e,t,o)=>{o.r(t),o.d(t,{default:()=>m});var i=o(9950),a=o(43927),s=o(52867),l=o(1391),r=o(41881),n=o(73878),d=o(98596),u=o(23419),p=o(66345),h=(o(47208),o(1480)),v=o(28981),g=o(44414);class c extends i.Component{constructor(){super(...arguments),this.state={init:!1,showFrePlan:!1,shopifyLogin:localStorage.getItem("shopifyLogin"),loading:!1,changePrice:!0,showContactUs:!1},this.SignUpPlanUpdate=async e=>{const{authorized:t}=this.props;this.setState({loading:!0});const o=(0,s.HA)(),i=new r.A;try{var l,n,d,v,g,c,m;if(200!==(await(0,a.yL)(e)).data.response_code)throw new Error("Plan update failed");const r=(null===t||void 0===t||null===(l=t.token)||void 0===l||null===(n=l.user)||void 0===n?void 0:n.id)||(null===t||void 0===t||null===(d=t.userData)||void 0===d||null===(v=d.user_data)||void 0===v?void 0:v.user.id)||localStorage.getItem("ownerId"),S="shopify"===(null===t||void 0===t||null===(g=t.userData)||void 0===g||null===(c=g.user_data)||void 0===c||null===(m=c.sessionData)||void 0===m?void 0:m.createFrom),I=()=>{this.setState({loading:!1,init:!0}),localStorage.removeItem("steps"),i.remove("shoponUrl"),setTimeout((()=>{this.props.history("/home")}),100)};if(S)localStorage.removeItem("shopifyLogin"),localStorage.removeItem("steps"),setTimeout((()=>{(0,h.Tn)(localStorage.getItem("shopId"),(()=>{this.props.getUserInfo(this.props.history,`${p.btP}init/index/shopify`)}))}),100);else{(0,u.c)("planUpdated",{id:r,plan:""});const e=(0,s.UM)("shoponUrl");await I(e)}(0,s.b)(o)}catch(S){this.setState({loading:!1}),(0,s.b)(o)}}}componentDidMount(){this.props.PLAN__DETAILS(!0),this.setState({shopifyLogin:localStorage.getItem("shopifyLogin")}),setTimeout((()=>{var e,t,o,i,a,s,l,r,n,d,p,h;(0,u.MR)(`getPlanUpdated${null!=(null===(e=this.props.authorized)||void 0===e||null===(t=e.token)||void 0===t||null===(o=t.user)||void 0===o?void 0:o.id)?null===(i=this.props.authorized)||void 0===i||null===(a=i.token)||void 0===a||null===(s=a.user)||void 0===s?void 0:s.id:null!==(l=this.props.authorized)&&void 0!==l&&null!==(r=l.userData)&&void 0!==r&&null!==(n=r.user_data)&&void 0!==n&&n.user.id?null===(d=this.props.authorized)||void 0===d||null===(p=d.userData)||void 0===p||null===(h=p.user_data)||void 0===h?void 0:h.user.id:localStorage.getItem("ownerId")}`,(e=>{localStorage.removeItem("steps"),this.props.history("/home")}))}),1500),window.fpr("referral",{email:localStorage.getItem("emailId")})}render(){return(0,g.jsx)(d.A,{...this.props,signUpPlan:!0,loading:this.state.loading,SignUpPlanUpdate:this.SignUpPlanUpdate})}}const m=(0,n.Ng)((e=>{var t;return{authorized:e.authorized,priceDetail:null===(t=e.planPriceDetail)||void 0===t?void 0:t.planPrice}}),(e=>({PLAN__DETAILS:t=>e((0,a.mT)(t)),getUserInfo:(t,o)=>e((0,v.ug)(t,o))})))((0,l.A)(c))}}]);