"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[8224],{58224:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p,getNotifyLoad:()=>N});var i=t(9950),n=t(73878),a=t(74283),l=t(80409),c=t(98361),o=t(51960),r=t(59051),d=t.n(r),m=t(42074),h=t(54810),f=t(52867),g=t(13448),x=t(44414);const N=e=>{var s={};return e&&e.length>0?(e.map((e=>{s[d()(new Date(1e3*e.message.time)).fromNow()]?s[d()(new Date(1e3*e.message.time)).fromNow()].includes(e.id)||s[d()(new Date(1e3*e.message.time)).fromNow()].push(e):s[d()(new Date(1e3*e.message.time)).fromNow()]=[e]})),s):s};class j extends i.Component{constructor(e){super(e),this.updateStatus=e=>{e.status,this.props.onNotificationToggle(),this.onRequest()},this.getUnreadNotifications=e=>{if(e&&Object.keys(e).length>0){const s=Object.entries(e).reduce(((e,s)=>{let[t,i]=s;const n=i.filter((e=>0==e.status));return n.length>0&&e.push([t,n]),e}),[]);return Object.fromEntries(s)}return{}},this.onRequest=()=>{const e=a.A.parse(window.location.search);if(e&&Object.keys(e).length>0||String(window.location.href).includes("assets")){const e=f.Zz?window:new BroadcastChannel("connect");f.Zz?window.opener.postMessage(JSON.stringify({type:"assets-redirect"})):e.postMessage(JSON.stringify({type:"assets-redirect"}))}},this.onClickNotification=()=>{},this.state={notifications:N(e.notificationList)}}componentWillReceiveProps(e){const{notificationList:s}=e;JSON.stringify(s)!=JSON.stringify(this.state.notifications)&&this.setState({notifications:N(s)})}render(){const{onNotificationToggle:e}=this.props,{notifications:s}=this.state,t=this.getUnreadNotifications(s);return(0,x.jsx)("div",{className:"w-100",children:(0,x.jsxs)(l.A.Container,{id:"notifications_tab_panel",defaultActiveKey:"all-notifications",children:[(0,x.jsxs)("div",{className:"f-between px-3 border-bottom",children:[(0,x.jsxs)(c.A,{variant:"underline",className:"nav",children:[(0,x.jsx)(c.A.Item,{className:"",children:(0,x.jsx)(c.A.Link,{className:"me-3 py-3 px-0 fw-medium",eventKey:"all-notifications",children:"All"})}),(0,x.jsx)(c.A.Item,{className:"",children:(0,x.jsx)(c.A.Link,{className:"px-0 py-3 fw-medium",eventKey:"unread-notifications",children:"Unread"})})]}),(0,x.jsx)("div",{children:Object.keys(t).length>0?(0,x.jsx)("button",{type:"button",className:"btn btn-link btn-sm px-0 h-auto fw-bold text-decoration-none btn-active-color-primary",onClick:()=>this.props.getAllNotification("markread",""),children:"Mark all as read"}):""})]}),(0,x.jsx)("div",{className:"overflow-auto",style:{height:380},children:s&&Object.keys(s).length>0?(0,x.jsxs)(l.A.Content,{children:[(0,x.jsx)(l.A.Pane,{eventKey:"all-notifications",className:"pb-3 min-h-100",children:s&&Object.keys(s).map(((t,n)=>(0,x.jsxs)(i.Fragment,{children:[(0,x.jsxs)("div",{className:"f-between px-3 py-1",children:[(0,x.jsx)("span",{className:"fw-bold",children:t}),(0,x.jsx)("span",{className:"bg-primary badge rounded-5 min-w-30 d-none",children:s[t]&&s[t].length>0?s[t].length:0})]}),s[t]&&s[t].length>0?(0,x.jsx)("div",{className:"",children:s[t].map((s=>(0,x.jsxs)(m.N_,{to:(0,f.cD)(s.url),className:"px-3 d-flex align-items-start border-bottom notification-item"+(0==s.status?" bg-gray-100":""),onClick:()=>{0==s.status&&this.props.getAllNotification("all",s.id),e()},title:s.message.subject,children:[(0,x.jsx)("div",{className:"symbol symbol-38 rounded-1 overflow-hidden me-2 p-2",children:(0,x.jsx)(o.A,{src:s.message.photo,height:"40",width:"40",onError:e=>e.target.src=h.xb,alt:s.message.subject,title:s.message.subject})}),(0,x.jsxs)("div",{className:"d-flex align-items-start flex-column flex-grow-1",children:[(0,x.jsxs)("div",{className:"d-flex algin-items-center justify-content-between w-100",children:[""!=s.message.subject?(0,x.jsx)("span",{className:"text-hover-primary text-gray-800 fw-bold me-2",children:s.message.subject}):null,(0,x.jsx)("span",{className:"text-gray-500 fs-9",children:d()(new Date(1e3*s.message.time)).format("hh:mma")})]}),(0,x.jsx)("div",{className:"d-flex algin-items-start",children:(0,x.jsx)("span",{className:"text-gray-700 fs-9",children:s.message.text})})]})]},s.id)))}):0==n?(0,x.jsx)("div",{className:"f-center",style:{height:350},children:(0,x.jsx)("p",{className:"mb-0 text-muted",children:"No Notifications"})}):null]},n)))}),(0,x.jsx)(l.A.Pane,{eventKey:"unread-notifications",className:"pb-3 min-h-100",children:t&&Object.keys(t).length>0?Object.keys(t).map(((s,n)=>(0,x.jsxs)(i.Fragment,{children:[(0,x.jsxs)("div",{className:"f-between px-3 py-1",children:[(0,x.jsx)("span",{className:"fw-bold",children:s}),(0,x.jsx)("span",{className:"bg-primary badge rounded-5 min-w-30 d-none",children:t[s]&&t[s].length>0&&t[s].filter((e=>0==e.status)).length>0?t[s].filter((e=>0==e.status)).length:0})]}),t[s]&&t[s].length>0?(0,x.jsx)("div",{className:"",children:t[s].map(((s,t)=>0==s.status?(0,x.jsxs)(m.N_,{to:s.getNotificationUrl?s.getNotificationUrl:"#",className:"px-3 d-flex align-items-start border-bottom notification-item text-decoration-none",onClick:()=>{0==s.status&&this.props.getAllNotification("all",s.id),e()},title:s.message.subject,children:[(0,x.jsx)("div",{className:"symbol symbol-38 rounded-1 overflow-hidden me-2 p-2",children:(0,x.jsx)(o.A,{src:s.message.photo,height:"40",width:"40",onError:e=>e.target.src=h.xb,alt:s.message.subject,title:s.message.subject})}),(0,x.jsxs)("div",{className:"d-flex align-items-start flex-column flex-grow-1",children:[(0,x.jsxs)("div",{className:"d-flex algin-items-center justify-content-between w-100",children:[""!=s.message.subject?(0,x.jsx)("span",{className:"text-hover-primary fw-bold text-decoration-none me-2",children:s.message.subject}):null,(0,x.jsx)("span",{className:"text-gray-500 fs-9",children:d()(new Date(1e3*s.message.time)).format("hh:mma")})]}),(0,x.jsx)("div",{className:"d-flex algin-items-start",children:(0,x.jsx)("span",{className:"text-gray-700 fs-9",children:s.message.text})})]})]},t):null))}):null]},n))):(0,x.jsx)("div",{className:"f-center",style:{height:350},children:(0,x.jsx)("p",{className:"mb-0 text-gray-500 fs-8",children:"No Unread Notifications"})})})]}):(0,x.jsx)("div",{className:"f-center",style:{height:150},children:(0,x.jsx)("p",{className:"mb-0 text-gray-500 fs-8",children:"No Notifications"})})})]})})}}const p=(0,n.Ng)((e=>({notificationList:e.notification.notificationList})),(e=>({getAllNotification:(s,t)=>e((0,g.P)(s,t))})))((0,i.memo)(j))}}]);