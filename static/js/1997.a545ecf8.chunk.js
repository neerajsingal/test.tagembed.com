"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[1997],{1997:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var a=s(9950),l=s(45358),r=s(471),o=s(1093),i=s(4342),n=s(34483),c=s(21432),d=s(95942),m=s(97937),h=s(42074),x=s(88053),b=s(59051),p=s.n(b),u=s(18633),g=s(54810),j=s(26806),f=s(73878),y=s(80322),v=s(54480),C=s(4695),w=s.n(C),N=s(1391),A=s(52867),k=s(43929),D=s(44414);const U=[{name:"Collaborator",width:160},{name:"Invited",width:130},{name:"Status",width:100},{name:"Permission",width:100},{name:"Invited By",width:120},{name:"Actions",width:70}];class S extends a.Component{constructor(){super(...arguments),this.state={loading:!0,userRole:null},this.getCollaborators=e=>{const{setCollaboratorList:t}=this.props;(0,y.xl)().then((s=>{const a=""==e.collaborator||0==e.collaborator.activeAccount?3:0,{workspace:l}=s.data.responseData;t(l),this.setState({loading:!1,userRole:a})})).catch((e=>{this.setState({loading:!1},(()=>{}))}))},this.modifyCollaborator=(e,t)=>{const{updateCollaboratorPermission:s,deleteCollaborator:a}=this.props;w().fire({title:"Are you sure?",text:"delete"==t?"Do you wish to continue and delete the chosen item?":"Modifying this setting will lead to alterations in permissions.",icon:"warning",showCancelButton:!0,confirmButtonText:"delete"==t?"Yes, delete it!":"Yes, change permission!",confirmButtonColor:"delete"!=t?"var(--bs-success)":""}).then((l=>{l.isConfirmed&&("delete"==t?a({collaborators:String(e)}):s(e))}))}}componentDidMount(){const{userData:e}=this.props;e&&this.getCollaborators(e)}componentWillReceiveProps(e){const{userData:t}=e;JSON.stringify(t)!=JSON.stringify(this.props.userData)&&this.getCollaborators(t)}render(){var e;const{loading:t,userRole:s}=this.state,{collaboratorList:a,userData:b}=this.props,f=(0,A.C2)();return(0,D.jsx)(k.A,{userData:b,crumbs:[{name:"Collaborator",link:"/home",icon:"grid-2",imgUrl:null===b||void 0===b||null===(e=b.user)||void 0===e?void 0:e.picture},{name:"Home",link:"/Home"},{name:"Collaborator"}],children:(0,D.jsx)(l.A,{fluid:f,className:"container-collaborator",children:(0,D.jsxs)(r.A,{children:[(0,D.jsxs)(r.A.Header,{className:"f-between d-flex",children:[(0,D.jsx)("h2",{className:"me-2 h4 my-3",children:"Collaborator panel"}),(0,D.jsx)("div",{className:"f-center",children:(0,D.jsxs)(h.N_,{to:"/collaborator/add",className:"btn btn-primary my-2 btn-sm",title:"Invite Collaborator",children:[(0,D.jsx)(g.gc,{icon:"plus"}),"Invite collaborator"]})})]}),(0,D.jsx)(r.A.Body,{style:{height:"calc(100vh - 255px)",overflowY:"auto"},children:(0,D.jsx)("div",{style:{minHeight:"calc(100vh - 287px)"},children:t?(0,D.jsx)(u.a,{}):a.length>0?(0,D.jsx)("div",{className:"table-responsive",children:(0,D.jsxs)(o.A,{size:"lg",className:"align-middle gs-0 gy-3",children:[(0,D.jsx)("thead",{className:"thead-light",children:(0,D.jsx)("tr",{children:U.map(((e,t)=>(0,D.jsx)("th",{className:"fw-bold text-nowrap ".concat("Actions"==e.name?"text-end":""),style:{minWidth:e.width},children:e.name},t)))})}),(0,D.jsx)("tbody",{children:a.map((e=>(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{children:(0,D.jsxs)("div",{className:"d-flex align-items-center",children:[(0,D.jsx)(x.A,{className:"symbol symbol-40 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:40,symbolClass:"symbol-label fs-6 bg-primary",name:e["UserCollab.name"],profileUrl:e["UserCollab.picture"],networkId:""}),(0,D.jsxs)("div",{className:"overflow-hidden",style:{maxWidth:200},children:[(0,D.jsx)("p",{className:"text-gray-dark fw-semibold mb-0 text-ellipsis fs-8",children:e["UserCollab.name"]}),(0,D.jsx)("span",{className:"fs-9 mb-0 text-gray-500 fw-medium text-ellipsis d-block",children:e["UserCollab.emailId"]})]})]})}),(0,D.jsxs)("td",{children:[(0,D.jsx)("p",{className:"text-gray-900 fw-medium mb-0 text-nowrap",children:p()(e["UserCollab.created"]).format("Do MMM YYYY")}),(0,D.jsx)("span",{className:"fs-9 fw-medium text-gray-500 text-nowrap",children:p().utc(new Date(e["UserCollab.created"])).format("h:mm a")})]}),(0,D.jsx)("td",{children:2!=e.status?(0,D.jsx)("label",{className:"form-check form-switch",children:(0,D.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1==e.status,onChange:()=>this.props.updateStatus(e)})}):(0,D.jsx)(i.A,{bg:"",className:"badge-light-warning",children:"Pending"})}),(0,D.jsx)("td",{children:(0,D.jsx)("div",{className:"d-flex align-items-center",children:3==s?(0,D.jsxs)(n.A,{style:{minWidth:200},children:[(0,D.jsx)(n.A.Toggle,{variant:"secondary",className:"d-flex align-items-center w-100 justify-content-between bg-white fs-9",children:1==e.role?"Admin":"Manager"}),(0,D.jsxs)(n.A.Menu,{className:"w-100",children:[(0,D.jsx)(n.A.Item,{onClick:()=>1==e.role?(0,A.r$)("Collaborator is already an admin."):this.modifyCollaborator(e,"change"),children:"Admin"},0),(0,D.jsx)(n.A.Item,{onClick:()=>2==e.role?(0,A.r$)("Collaborator is already a manager."):this.props.navigate("/collaborator/edit/".concat(e.id,"?permission=1")),children:"Manager"},1)]})]}):1==e.role?"Admin":"Manager"})}),(0,D.jsx)("td",{children:(0,D.jsxs)("div",{className:"d-flex align-items-center cursor-pointer text-decoration-none",children:[(0,D.jsx)(x.A,{className:"symbol symbol-36 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:36,symbolClass:"symbol-label fs-6 bg-primary",name:e["UserAdmin.name"],profileUrl:e["UserAdmin.picture"]}),(0,D.jsx)("p",{className:"text-gray-dark fw-medium mb-0 text-ellipsis",children:e["UserAdmin.name"]})]})}),(0,D.jsx)("td",{className:"pr-0 text-end",children:(0,D.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[(0,D.jsx)(c.A,{placement:"top",overlay:(0,D.jsx)(d.A,{children:"Edit"}),children:(0,D.jsx)(h.N_,{to:"/collaborator/edit/".concat(e.id),id:"col-edit-".concat(e.id),className:"btn btn-icon btn-sm btn-active-primary ms-2",title:"Edit Collaborator",children:(0,D.jsx)(g.gc,{type:"solid",icon:"pen"})})}),(0,D.jsx)(c.A,{placement:"top",overlay:(0,D.jsx)(d.A,{children:"Remove"}),children:(0,D.jsx)(m.A,{id:"col-remove-".concat(e.id),variant:"icon",size:"sm",className:"btn-active-danger ms-2","aria-label":"delete",onClick:()=>this.modifyCollaborator(e.id,"delete"),children:(0,D.jsx)(g.gc,{type:"solid",icon:"trash-can"})})})]})})]})))})]})}):(0,D.jsx)("div",{className:"f-center",style:{minHeight:"calc(100vh - 260px)"},children:(0,D.jsx)(j.A,{title:"Uh-oh! Nothing to see here.",desc:"You can start adding new collaborators here.",icon:"user-plus",iconDark:"user-plus-dark",button:{text:"Invite Collaborator",action:()=>this.props.navigate("/collaborator/add")},isFullScreen:!1})})})})]})})})}}const I=(0,f.Ng)((e=>{var t,s;return{collaboratorList:e.collaborator.collaboratorList,userData:null===(t=e.authorized)||void 0===t||null===(s=t.userData)||void 0===s?void 0:s.user_data}}),(e=>({deleteCollaborator:t=>e((0,y.gS)(t)),setCollaboratorList:t=>e({type:v.J_g,payload:t}),updateCollaboratorPermission:t=>e((0,y.LA)(t)),updateStatus:t=>e((0,y.yB)(t))})))((0,N.A)(S))}}]);