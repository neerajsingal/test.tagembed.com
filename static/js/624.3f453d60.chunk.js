"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[624],{10624:(e,s,l)=>{l.r(s),l.d(s,{default:()=>ae});var a=l(9950),t=l(45358),i=l(471),n=l(97937),c=l(17595),o=l(1093),r=l(21432),d=l(95942),m=l(54810),h=l(4695),p=l.n(h),u=l(51960),x=l(4342),g=l(42074),v=l(52867),f=l(44414);const b=e=>{let{toolTip:s,clickAction:l,product:a,iconImg:t}=e;return(0,f.jsx)(r.A,{placement:"top",overlay:(0,f.jsx)(d.A,{children:s}),children:(0,f.jsx)(n.A,{id:"action-".concat(t),variant:"icon",size:"sm","aria-label":t,className:"btn-active-".concat("pen"==t?"primary":"danger"," ms-2"),onClick:e=>l(a),children:(0,f.jsx)(m.gc,{type:"solid",icon:t})})})};class j extends a.Component{constructor(){super(...arguments),this.onErrorImageUpdate=e=>e.target.src=(0,m.pc)("media/images/error/no-product.svg")}render(){var e;const{product:s,onEditPost:l,onProductSelect:a,selectedProducts:t,onDelete:i}=this.props,n=s.tags?s.tags.split(", "):[];return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{className:"align-middle",children:(0,f.jsx)("div",{className:"form-check",children:(0,f.jsx)(c.A.Check,{id:"check-".concat(null===s||void 0===s?void 0:s.id),"aria-label":"select",checked:t.includes(null===s||void 0===s?void 0:s.id),onChange:e=>a(null===s||void 0===s?void 0:s.id,e.target.checked)})})}),(0,f.jsx)("td",{className:"align-middle",children:(0,f.jsxs)("div",{className:"d-flex align-items-center mr-2",children:[(0,f.jsx)("div",{className:"symbol symbol-50 rounded-2 flex-shrink-0 me-3 overflow-hidden",children:(0,f.jsx)(u.A,{"data-media":"product-".concat(null===s||void 0===s?void 0:s.id),className:"object-center-contain",src:s.product_image,height:50,width:50,alt:null===s||void 0===s?void 0:s.product_title,title:null===s||void 0===s?void 0:s.product_title,onError:this.onErrorImageUpdate,loading:"lazy"})}),(0,f.jsx)("div",{className:"overflow-hidden",children:(0,f.jsx)("span",{"data-title":"product-".concat(null===s||void 0===s?void 0:s.id),className:"d-block fs-8 fw-semibold text-ellipsis",style:{maxWidth:200},children:null===s||void 0===s?void 0:s.product_title})})]})}),(0,f.jsx)("td",{className:"align-middle",children:(0,f.jsx)("span",{"data-price":"price-".concat(null===s||void 0===s?void 0:s.id),children:s.product_price?"".concat(s.price_currency_symbol).concat(s.product_price):"--"})}),(0,f.jsx)("td",{className:"align-middle",children:(0,f.jsx)("span",{"data-price":"discount-price-".concat(null===s||void 0===s?void 0:s.id),children:(null===s||void 0===s?void 0:s.product_discount)>0?"".concat(s.price_currency_symbol).concat(s.product_discount):"--"})}),(0,f.jsx)("td",{className:"align-middle",children:(0,f.jsxs)("div",{className:"position-relative",children:[(0,f.jsx)(c.A.Control,{id:"link-".concat(null===s||void 0===s?void 0:s.id),size:"sm",className:"pe-7 text-gray-700",value:s.product_url,"aria-label":"Product Url",readOnly:!0}),(0,f.jsx)(g.N_,{id:"link-open-".concat(null===s||void 0===s?void 0:s.id),className:"btn btn-link position-absolute top-50 translate-middle",to:s.product_url,target:"_blank",title:"Link",style:{right:-5},children:(0,f.jsx)(m.gc,{icon:"external-link"})})]})}),(0,f.jsx)("td",{className:"align-middle",children:(0,f.jsx)("div",{className:"w-auto",children:(null===(e=s.shopify_product_id)||void 0===e?void 0:e.length)>0?(0,f.jsx)(c.A.Control,{id:"pro-id-".concat(null===s||void 0===s?void 0:s.id),size:"sm",className:"pe-4 text-gray-700",value:s.shopify_product_id,style:{maxWidth:150,minWidth:100},"aria-label":"Product id",readOnly:!0}):"--"})}),(0,f.jsx)("td",{className:"align-middle",children:(0,f.jsx)("span",{id:"cat-".concat(null===s||void 0===s?void 0:s.id),className:"d-inline-block break-all",style:{overflowWrap:"anywhere",maxWidth:200},children:s.shopify_product_type?s.shopify_product_type:"--"})}),(0,f.jsx)("td",{className:"align-middle",children:(0,f.jsx)("span",{id:"sku-".concat(null===s||void 0===s?void 0:s.id),children:s.product_sku?s.product_sku:"--"})}),(0,f.jsx)("td",{className:"align-middle",style:{minWidth:200},children:(0,f.jsx)("div",{className:"",style:{maxWidth:200},children:n.length>0?n.map(((e,l)=>(0,f.jsx)(x.A,{"data-tags":"tag-".concat(null===s||void 0===s?void 0:s.id,"-").concat(l),bg:"",className:"badge-secondary",children:e},l))):" -- "})}),(0,f.jsx)("td",{className:"align-middle text-end position-sticky end-0 pe-4",children:(0,f.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[(0,f.jsx)(b,{toolTip:"Edit",clickAction:l,product:s,iconImg:"pen"}),(0,f.jsx)(b,{toolTip:"Remove",clickAction:i,product:s,iconImg:"trash-can"})]})})]})}}const N=j;var y=l(26661),w=l(86781),_=l(68459),A=l(30615),C=l(76955),S=l(3302),P=l.n(S),k=l(49332);const D=[{value:"\u060b,AFN",label:"AFN"},{value:"Lek,ALL",label:"ALL"},{value:"$,USD",label:"USD"},{value:"$,ARS",label:"ARS"},{value:"\u0192,AWG",label:"AWG"},{value:"$,AUD",label:"AUD"},{value:"\u043c\u0430\u043d,AZN",label:"AZN"},{value:"B$,BSD",label:"BSD"},{value:"Bds$,BBD",label:"BBD"},{value:"Rbl,BYR",label:"BYR"},{value:"\u20ac,EUR",label:"EUR"},{value:"BZ$,BZD",label:"BZD"},{value:"$,BMD",label:"BMD"},{value:"Bs,BOB",label:"BOB"},{value:"KM,BAM",label:"BAM"},{value:"P,BWP",label:"BWP"},{value:"R$,BRL",label:"BRL"},{value:"\xa3,GBP",label:"GBP"},{value:"B$,BND",label:"BND"},{value:"\u043b\u0432,BGN",label:"BGN"},{value:"\u17db,KHR",label:"KHR"},{value:"$,CAD",label:"CAD"},{value:"$,KYD",label:"KYD"},{value:"$,CLP",label:"CLP"},{value:"\xa5,CNY",label:"CNY"},{value:"$,COP",label:"COP"},{value:"\u20a1,CRC",label:"CRC"},{value:"kn,HRK",label:"HRK"},{value:"\u20b1,CUP",label:"CUP"},{value:"\u20ac,EUR",label:"EUR"},{value:"K\u010d,CZK",label:"CZK"},{value:"kr,DKK",label:"DKK"},{value:"RD$,DOP",label:"DOP"},{value:"$,XCD",label:"XCD"},{value:"E\xa3,EGP",label:"EGP"},{value:"SVC,SVC",label:"SVC"},{value:"\xa3,GBP",label:"GBP"},{value:"\u20ac,EUR",label:"EUR"},{value:"\xa3,FKP",label:"FKP"},{value:"FJ$,FJD",label:"FJD"},{value:"\u20ac,EUR",label:"EUR"},{value:"GH\u20b5,GHC",label:"GHC"},{value:"\xa3,GIP",label:"GIP"},{value:"\u20ac,EUR",label:"EUR"},{value:"Q,GTQ",label:"GTQ"},{value:"\xa3,GGP",label:"GGP"},{value:"GY$,GYD",label:"GYD"},{value:"\u20ac,EUR",label:"EUR"},{value:"L,HNL",label:"HNL"},{value:"HK$,HKD",label:"HKD"},{value:"Ft,HUF",label:"HUF"},{value:"kr,ISK",label:"ISK"},{value:"\u20b9,INR",label:"INR"},{value:"Rp,IDR",label:"IDR"},{value:"\ufdfc,IRR",label:"IRR"},{value:"\u20ac,EUR",label:"EUR"},{value:"\xa3,IMP",label:"IMP"},{value:"\u20aa,ILS",label:"ILS"},{value:"\u20ac,EUR",label:"EUR"},{value:"J$,JMD",label:"JMD"},{value:"\xa5,JPY",label:"JPY"},{value:"\xa3,JEP",label:"JEP"},{value:"\u20b8,KZT",label:"KZT"},{value:"\u20a9,KPW",label:"KPW"},{value:"\u20a9,KRW",label:"KRW"},{value:"\u043b\u0432,KGS",label:"KGS"},{value:"\u20ad,LAK",label:"LAK"},{value:"Ls,LVL",label:"LVL"},{value:"L\xa3,LBP",label:"LBP"},{value:"L$,LRD",label:"LRD"},{value:"CHF,CHF",label:"CHF"},{value:"Lt,LTL",label:"LTL"},{value:"\u20ac,EUR",label:"EUR"},{value:"\u0434\u0435\u043d,MKD",label:"MKD"},{value:"RM,MYR",label:"MYR"},{value:"\u20ac,EUR",label:"EUR"},{value:"\u20a8,MUR",label:"MUR"},{value:"Mex$,MXN",label:"MXN"},{value:"\u20ae,MNT",label:"MNT"},{value:"MT,MZN",label:"MZN"},{value:"N$,NAD",label:"NAD"},{value:"\u20a8,NPR",label:"NPR"},{value:"\u20ac,EUR",label:"EUR"},{value:"\u0192,ANG",label:"ANG"},{value:"$,NZD",label:"NZD"},{value:"C$,NIO",label:"NIO"},{value:"\u20a6,NGN",label:"NGN"},{value:"\u20a9,KPW",label:"KPW"},{value:"kr,NOK",label:"NOK"},{value:"bz,OMR",label:"OMR"},{value:"\u20a8,PKR",label:"PKR"},{value:"B/.,PAB",label:"PAB"},{value:"Gs,PYG",label:"PYG"},{value:"S/.,PEN",label:"PEN"},{value:"\u20b1,PHP",label:"PHP"},{value:"z\u0142,PLN",label:"PLN"},{value:"QR,QAR",label:"QAR"},{value:"lei,RON",label:"RON"},{value:"\u20bd,RUB",label:"RUB"},{value:"\xa3,SHP",label:"SHP"},{value:"\ufdfc,SAR",label:"SAR"},{value:"din,RSD",label:"RSD"},{value:"SR,SCR",label:"SCR"},{value:"$,SGD",label:"SGD"},{value:"\u20ac,EUR",label:"EUR"},{value:"Si$,SBD",label:"SBD"},{value:"Sh.so.,SOS",label:"SOS"},{value:"R,ZAR",label:"ZAR"},{value:"\u20a9,KRW",label:"KRW"},{value:"\u20ac,EUR",label:"EUR"},{value:"\u20a8,LKR",label:"LKR"},{value:"$,SRD",label:"SRD"},{value:"kr,SEK",label:"SEK"},{value:"CHF,CHF",label:"CHF"},{value:"\xa3,SYP",label:"SYP"},{value:"NT$,TWD",label:"TWD"},{value:"\u0e3f,THB",label:"THB"},{value:"TT$,TTD",label:"TTD"},{value:"\u20ba,TRY",label:"TRY"},{value:"\u20ba,TRL",label:"TRL"},{value:"$,TVD",label:"TVD"},{value:"\u20b4,UAH",label:"UAH"},{value:"dhs,AED",label:"AED"},{value:"\xa3,GBP",label:"GBP"},{value:"$,USD",label:"USD"},{value:"$U,UYU",label:"UYU"},{value:"\u043b\u0432,UZS",label:"UZS"},{value:"\u20ac,EUR",label:"EUR"},{value:"Bs,VEF",label:"VEF"},{value:"\u20ab,VND",label:"VND"},{value:"\ufdfc,YER",label:"YER"},{value:"Z$,ZWD",label:"ZWD"},{value:"\u062f\u062c,DZD",label:"DZD"}];var I=l(85608);class U extends a.Component{constructor(){super(...arguments),this.uppyUploader=new k.A(null,5e6),this.state={pName:"",pPrice:"",dPrice:"",pUrl:"",sku:"",pId:"",category:"",tags:"",filename:"",selectedFile:"",selected:"",modalOpen:!1,errorShow:!1,preview:!1,pCurrency:"USD",pCurrencySymbol:"$",isLoading:!1,currencySelect:D[2],pNameError:!1,pPriceError:!1,pUrlError:!1},this.onClickToOpen=e=>{this.setState({modalOpen:!0}),P()(".uppy-Dashboard-close").click((()=>{this.uppyUploader.uppy.cancelAll(),this.setState({modalOpen:!1})}))},this.onClickToClose=()=>{this.uppyUploader.uppy.cancelAll(),this.setState({modalOpen:!1})},this.doneButtonHandler=()=>{this.uppyUploader.uppy.cancelAll(),this.onClickToClose()},this.submitForm=e=>{const{pName:s,pPrice:l,dPrice:a,pUrl:t}=this.state;this.setState({isLoading:!0});const i=parseInt(l)?parseInt(l):0,n=parseInt(a)?parseInt(a):0;!s||!(0,v.m$)(t)||i<n?this.setState({pNameError:!s,pUrlError:!(0,v.m$)(t),pPriceError:i<n,isLoading:!1}):this.onProductAdd()},this.onCurrenyChange=e=>{if(e&&Object.keys(e).length>0&&e.value){let s=e.value.split(",");this.setState({currencySelect:e,pCurrency:s[1],pCurrencySymbol:s[0]})}},this.onProductAdd=()=>{const{filename:e,selectedFile:s,image:l,file:a,pName:t,pPrice:i,dPrice:n,pUrl:c,sku:o,pId:r,category:d,tags:m,preview:h,pCurrency:p,pCurrencySymbol:u}=this.state,{ACTION_PRODUCT_ADD:x,closePopup:g,editProductData:v,ACTION_PRODUCT_UPDATE:f}=this.props;var b={wall:localStorage.getItem("wallId"),image:e,title:t,priceCurrency:p,priceCurrencySymbol:u,price:i,discountCurrencySymbol:u,discountCurrency:p,discount:n,url:c,sku:o,shopify_product_id:r,shopify_product_type:d,shopify_product_tags:m};v&&v.id?(b.id=v.id,f(b,this.resetCallback)):x(b,this.resetCallback)},this.resetCallback=()=>this.setState({isLoading:!1},(()=>this.props.closePopup())),this.onClickRemove=e=>this.setState({filename:"",selectedFile:"",selected:""})}componentDidMount(){const{editProductData:e}=this.props;if(e){var s;const l=D.filter((s=>s.label==e.price_currency));let a="",t="";if((null===l||void 0===l?void 0:l.length)>0&&null!==(s=l[0])&&void 0!==s&&s.value){let s=l[0].value.split(",");a=s[1],t=s[0],this.setState({pName:e.product_title,pPrice:e.product_price,dPrice:e.product_discount,pUrl:e.product_url,sku:e.product_sku,pId:e.shopify_product_id,category:e.shopify_product_type,tags:e.tags,filename:e.product_image,selectedFile:e.product_image,selected:e.product_image,pCurrency:a,pCurrencySymbol:t,currencySelect:D.filter((s=>s.label==e.price_currency))})}}this.uppyUploader.uppy.on("transloadit:result",((e,s)=>{this.setState({selectedFile:s.id,filename:"".concat(I.$r).concat(s.id,".").concat(s.ext),selected:"".concat(I.$r).concat(s.id,".").concat(s.ext)},(()=>{setTimeout((()=>{this.uppyUploader.uppy.cancelAll(),this.setState({modalOpen:!1})}),300)}))}))}componentWillReceiveProps(e){if(e.editProductData&&e.editProductData!==this.props.editProductData){const{editProductData:s}=e;this.setState({pName:s.product_title,pPrice:s.product_price,dPrice:s.product_discount,pUrl:s.product_url,sku:s.product_sku,pId:s.shopify_product_id,category:s.shopify_product_type,tags:s.tags,filename:s.product_image,selectedFile:s.product_image,selected:s.product_image,pCurrency:s.discount_currency,pCurrencySymbol:s.discount_currency_symbol})}}componentWillUnmount(){this.uppyUploader.uppy.cancelAll(),this.uppyUploader.uppy.close({reason:"unmount"}),this.setState({modalOpen:!1})}render(){const{showAddProduct:e,closePopup:s,editProductData:l}=this.props,{filename:a,modalOpen:t,pName:i,pPrice:o,dPrice:h,pUrl:p,sku:x,pId:v,category:b,tags:j,preview:N,pCurrencySymbol:S,isLoading:P,currencySelect:k,pNameError:I,pPriceError:U,pUrlError:R}=this.state;return(0,f.jsxs)(y.A,{show:e,size:"lg",dialogClassName:"modal-dialog-centered",id:"addNewCustomProduct",onHide:s,children:[(0,f.jsx)(y.A.Header,{closeButton:!0,children:(0,f.jsxs)(y.A.Title,{children:[" ",null!==l&&void 0!==l&&l.id?"Update":"Add"," product"]})}),(0,f.jsx)(y.A.Body,{children:(0,f.jsx)("div",{className:"addPro_modal mx-xl-4 px-0 px-lg-4 mx-0",children:(0,f.jsxs)(w.A,{children:[(0,f.jsxs)(_.A,{md:6,lg:5,children:[(0,f.jsxs)("p",{className:"text-center fw-medium text-gray-400 fs-8 mb-1",children:["Product ",N?"preview":"image"]}),(0,f.jsx)("div",{className:"border rounded-1 mb-4 mb-lg-0 position-relative overflow-hidden",style:{minHeight:430},children:N?(0,f.jsxs)("div",{className:"tb_pro__wrap_in p-5 mt-6",children:[(0,f.jsx)("div",{className:"tb_pro__img_wrapper",children:(0,f.jsx)("div",{className:"tb_pro__image_wrap mediaHolder",children:(0,f.jsx)("img",{className:"tb_pro__image",src:a||(0,m.pc)("media/images/error/no-product.svg")})})}),(0,f.jsx)("div",{className:"tb_pro__title",children:i}),(0,f.jsx)("div",{className:"tb_pro__price_wrap",children:0==h?(0,f.jsxs)("div",{className:"tb_pro__price",children:[S,o||0]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"tb_pro__price",children:[S,h||0]}),(0,f.jsxs)("div",{className:"tb_pro__discount_price",children:[S,o||0]})]})}),(0,f.jsx)("div",{className:"tb_pro__link",children:(0,f.jsx)(g.N_,{className:"tb_pro__btn text-white",to:p,target:"_blank",title:"Shop Now",children:"Shop now"})})]}):a?(0,f.jsxs)("div",{className:"p-3 mb-2",children:[(0,f.jsx)(u.A,{id:"product_img",className:"w-100 mb-10",fluid:!0,src:a}),(0,f.jsxs)("div",{className:"f-center position-absolute bottom-0 start-0 w-100 p-2",children:[(0,f.jsx)(r.A,{placement:"top",overlay:(0,f.jsx)(d.A,{id:"button-tooltip-2",children:"Edit"}),children:(0,f.jsx)(n.A,{id:"product_edit",variant:"icon",className:"btn-active-primary mx-1",onClick:this.onClickToOpen,children:(0,f.jsx)(m.gc,{icon:"pen"})})}),(0,f.jsx)(r.A,{placement:"top",overlay:(0,f.jsx)(d.A,{id:"button-tooltip-2",children:"Remove"}),children:(0,f.jsx)(n.A,{id:"product_remove",variant:"icon",className:"btn-active-primary mx-1","aria-label":"delete",onClick:this.onClickRemove,children:(0,f.jsx)(m.gc,{icon:"trash-can"})})})]})]}):(0,f.jsxs)("div",{id:"upload_pro_media",className:"f-center flex-column cursor-pointer",onClick:this.onClickToOpen,style:{height:395},children:[(0,f.jsx)("span",{className:"text-gray-300 mb-2",style:{fontSize:80},children:(0,f.jsx)("i",{className:"fa-duotone fa-solid fa-bag-shopping-plus"})}),(0,f.jsx)("strong",{className:"text-center text-muted mb-2",children:"Click here"}),(0,f.jsx)("span",{children:"to upload the new image"})]})})]}),(0,f.jsxs)(_.A,{md:6,lg:7,children:[(0,f.jsxs)("div",{className:"mb-2 mb-xl-3",children:[(0,f.jsx)(c.A.Label,{children:"Product name"}),(0,f.jsx)(c.A.Control,{id:"pro_name",name:"pname",className:I?"is-invalid":"",value:i,placeholder:"Enter Product Name",onChange:e=>this.setState({pName:e.target.value})}),I&&(0,f.jsx)("div",{className:"invalid-feedback d-block",children:"Product name is required."})]}),(0,f.jsxs)("div",{className:"row mb-2 mb-xl-3",children:[(0,f.jsxs)("div",{className:"col",children:[(0,f.jsx)(c.A.Label,{children:"Price"}),(0,f.jsxs)("div",{className:"input-group",children:[(0,f.jsx)("span",{className:"input-group-text p-0",children:(0,f.jsx)(A.Ay,{id:"select_currency",className:"selectpicker selectpicker-sm border-0",classNamePrefix:"selectpicker",onChange:this.onCurrenyChange,name:"Price",value:k,options:D})}),(0,f.jsx)(c.A.Control,{id:"input_price",value:o,className:U?"is-invalid":"",placeholder:"0.00",size:"8",type:"number",min:0,onChange:e=>this.setState({pPrice:e.target.value})})]})]}),(0,f.jsxs)("div",{className:"col",children:[(0,f.jsxs)(c.A.Label,{children:["Discounted price",(0,f.jsx)(r.A,{placement:"top",overlay:(0,f.jsx)(d.A,{children:"This represents the price after subtracting the discount."}),children:(0,f.jsx)("sapn",{className:"ms-1",children:(0,f.jsx)(m.gc,{type:"solid",icon:"circle-info",iconClass:"fs-7 text-gray-500"})})})]}),(0,f.jsxs)("div",{className:"input-group",children:[(0,f.jsx)("span",{className:"input-group-text",children:S}),(0,f.jsx)(c.A.Control,{id:"input_discount",value:h,placeholder:"0.00",size:"8",type:"number",min:0,onChange:e=>this.setState({dPrice:e.target.value}),className:U?"is-invalid":""}),U&&(0,f.jsx)("div",{className:"invalid-feedback d-block",children:"Discounted price should be less than actual price."})]})]})]}),(0,f.jsxs)("div",{className:"mb-2 mb-xl-3",children:[(0,f.jsx)(c.A.Label,{children:"Product URL"}),(0,f.jsx)(c.A.Control,{id:"input_url",value:p,className:R?"is-invalid":"",placeholder:"https://www.website.com",onChange:e=>this.setState({pUrl:e.target.value})}),R&&(0,f.jsx)("div",{className:"invalid-feedback d-block",children:"Please enter valid url."})]}),(0,f.jsxs)("div",{className:"row mb-2 mb-xl-3",children:[(0,f.jsxs)("div",{className:"col",children:[(0,f.jsx)(c.A.Label,{children:"Product SKU"}),(0,f.jsx)(c.A.Control,{id:"input_sku",value:x,placeholder:"Enter Product SKU",onChange:e=>this.setState({sku:e.target.value})})]}),(0,f.jsxs)("div",{className:"col",children:[(0,f.jsx)(c.A.Label,{children:"Product Id"}),(0,f.jsx)(c.A.Control,{id:"input_p_id",value:v,placeholder:"Enter Product Id",onChange:e=>this.setState({pId:e.target.value})})]})]}),(0,f.jsxs)("div",{className:"mb-2 mb-xl-3",children:[(0,f.jsx)(c.A.Label,{children:"Category"}),(0,f.jsx)(c.A.Control,{id:"input_p_cat",value:b,placeholder:"Enter Category",onChange:e=>this.setState({category:e.target.value})})]}),(0,f.jsxs)("div",{className:"mb-2 mb-xl-3",children:[(0,f.jsx)(c.A.Label,{children:"Tags"}),(0,f.jsx)(c.A.Control,{id:"input_p_tag",value:j,placeholder:"Enter Multiple Tags Comma Separated",onChange:e=>this.setState({tags:e.target.value})})]})]})]})})}),(0,f.jsxs)(y.A.Footer,{className:"p-3",children:[(0,f.jsx)(n.A,{id:"btn_preview",variant:"outline-primary",size:"sm",className:"ms-2",onClick:()=>this.setState({preview:!N}),children:N?"Edit Mode":"Preview"}),(0,f.jsx)(n.A,{id:"product_save_",variant:"primary",size:"sm",className:"ms-2 ".concat(P?"spinner":""),onClick:this.submitForm,children:"Submit"})]}),(0,f.jsx)(C.KG,{animateOpenClose:!0,proudlyDisplayPoweredByUppy:!1,inline:!1,showProgressDetails:!0,height:750,browserBackButtonClose:!0,showRemoveButtonAfterComplete:!1,uppy:this.uppyUploader.uppy,open:t,onRequestCloseModal:this.onClickToClose,closeAfterFinish:!0,doneButtonHandler:this.doneButtonHandler,plugins:["Instagram","GoogleDrive","Url","Webcam"]})]})}}var R=l(54524),T=l(28429),E=l(73878);const B=[{title:"Shopify",icon:"shopify",fun:"shopify"},{title:"Google Merchant Center",icon:"google",fun:"google"},{title:"BigCommerce",icon:"bigcommerce",fun:"bmc"},{title:"Magento",icon:"magento",fun:"magento"},{title:"Woocommerce",icon:"woocommerce",fun:"woocommerce"},{title:"Salesforce",icon:"salesforce",fun:"salesforce"},{title:"Manual Upload",icon:"manual-upload",fun:""}],M=e=>{let{openManualSyncModal:s,openSyncProduct:l}=e;(0,T.Zp)(),(0,E.wA)();return(0,f.jsx)(t.A,{children:(0,f.jsx)("div",{className:"f-center w-100 sync_products",style:{minHeight:"calc(100vh - 150px)"},children:(0,f.jsx)(w.A,{className:"justify-content-center pb-lg-10",id:"sync_products-container",children:(0,f.jsxs)(_.A,{lg:8,className:"w-100",children:[(0,f.jsxs)("div",{className:"mb-5 mb-lg-10",children:[(0,f.jsx)("h3",{children:"Sync Product Catalog"}),(0,f.jsx)("p",{className:"fw-medium text-muted",children:"Select the application from which you want to tag products"})]}),(0,f.jsxs)(w.A,{className:"gx-3 w-100",children:[null!==B&&void 0!==B&&B.length?B.map(((e,a)=>(0,f.jsx)(_.A,{xs:6,sm:4,children:(0,f.jsx)(i.A,{id:"".concat(e.icon,"_btn_"),className:"card-stretch gutter-b cursor-pointer",onClick:()=>""===e.fun?s():l(e.fun),children:(0,f.jsxs)(i.A.Body,{className:"flex-column f-center px-2",children:[(0,f.jsx)(u.A,{className:"my-3 ".concat("bmc"===e.fun||""===e.fun?"invert":""),src:(0,m.pc)("media/images/cms/".concat(e.icon,".svg")),height:40,width:40,alt:e.title,fluid:!0}),(0,f.jsx)("h5",{className:"text-center fs-8",style:{minHeight:30},children:e.title})]})})},a))):null,(0,f.jsx)(_.A,{xs:6,sm:4,children:(0,f.jsx)(R.A,{title:"Request Platform",children:(0,f.jsx)(i.A,{className:"card-stretch gutter-b cursor-pointer",children:(0,f.jsxs)(i.A.Body,{className:"flex-column f-center px-2",children:[(0,f.jsxs)("div",{className:"my-3 position-relative",style:{width:40,height:40},children:[(0,f.jsx)("div",{className:"position-absolute w-100 h-100 rounded-circle bg-white",style:{border:"1px dashed #D7D7D7"}}),(0,f.jsx)("div",{className:"position-absolute w-100 h-100 rounded-circle",style:{background:"#EBEBEB",transform:"scale(0.85)"}}),(0,f.jsx)("div",{className:"position-absolute w-100 h-100 d-flex align-items-center justify-content-center",children:(0,f.jsx)(m.gc,{icon:"plus",iconClass:"fs-5"})})]}),(0,f.jsx)("h5",{className:"text-center fs-8",style:{minHeight:30},children:"Request Platform"})]})})})})]})]})})})})};var L=l(89379),O=l(19360),H=l(1480),G=l(41225),F=l(85861);class W extends a.Component{constructor(){super(...arguments),this.state={shopifyUrl:"",gmc_id:"",m_url:"",w_url:"",sales_url:"",gmc_error:!1,shopify_error:!1,m_error:!1,w_error:!1,sales_error:!1,isConnected:!1},this.handleMessage=async e=>{try{const l=(0,v.KK)(e.data),{code:a,type:t}=l;if(console.log(l,"response handleMessage Sync Modal"),a)if("shopifyLogin"==t)(0,H.Tn)(a,this.refreshProducts),setTimeout((()=>{this.props.refreshProducts()}),200);else try{const e=await(0,F.O4)(a);if(e){const s=await(0,H.BC)(e);localStorage.removeItem("shopUrl"),s.error?(0,v.r$)("Something went wrong!"):(this.props.refreshProducts(),(0,v.k1)(s.message))}}catch(s){console.error("Error during authentication:",s),(0,v.r$)("Authentication process failed!")}}catch(s){console.error("Error parsing event data:",s)}},this.onAddGmcAccount=e=>{const s=/^\d{1,18}$/.test(e);this.setState({gmc_error:!s}),s&&((0,G.Zs)(),localStorage.setItem("shopUrl",e))},this.setUrl=(e,s,l)=>{const a=(0,v.s3)(e);let t={};"shopifyUrl"==s&&(t.isConnected=!1),this.setState((0,L.A)({[s]:e,[l]:""!=e&&!a},t))},this.checkShopify=e=>{if(""==String(e).trim())this.setState({shopify_error:!0});else{const{stores:s}=this.props;let l=[];(null===s||void 0===s?void 0:s.length)>0&&(l=s.filter((s=>String(s.domain).toLowerCase()==String(e).toLowerCase()))),l.length>0?this.setState({isConnected:!0,shopify_error:!0}):(0,H.S5)(String(e).toLowerCase())}}}componentDidMount(){window.addEventListener("message",this.handleMessage)}componentWillUnmount(){window.removeEventListener("message",this.handleMessage)}render(){var e,s;const{show:l,onHide:a,product:t,stores:i,showMagento:o,onDelete:r,refreshProducts:d,isShopify:h,showManualSyncModal:p}=this.props,{gmc_error:x,shopify_error:b,m_error:j,w_error:N,isConnected:w,shopifyUrl:_,gmc_id:A,m_url:C,w_url:S,sales_error:P,sales_url:k}=this.state,D=h?null===i||void 0===i?void 0:i.find((e=>"shopify"==e.created_from)):null;return h&&!l?(0,f.jsx)("div",{className:"shopifyApp-modal card shadow-sm border-0 rounded-3 w-100",children:(0,f.jsxs)("div",{className:"card-body",children:[(0,f.jsxs)("div",{className:"card-top",children:[(0,f.jsx)("div",{className:"text-center mb-5 pb-3",children:(0,f.jsx)("h4",{className:"fs-4 fw-bold",children:"Sync product from shopify"})}),(0,f.jsxs)("div",{className:"d-flex align-items-start flex-md-row flex-column",children:[(0,f.jsxs)("div",{className:"flex-md-grow-1 flex-grow-0 me-2 w-100 mb-5 mb-md-0",children:[(0,f.jsx)(c.A.Control,{id:"shopify_c_input",size:"lg",placeholder:"example.myshopify.com",value:null!==(e=null===D||void 0===D?void 0:D.domain)&&void 0!==e?e:"",readOnly:!0}),null!==D&&void 0!==D&&D.modified?(0,f.jsxs)("span",{className:"text-gray-700 fs-8 fw-medium",children:["Last synced  ",(0,v.S)(null!==(s=null===D||void 0===D?void 0:D.modified)&&void 0!==s?s:"")]}):null]}),(0,f.jsxs)(n.A,{id:"shopify_id_btn",className:"btn border-0 d-flex align-items-center signInWithBrand signIn-Shopify",value:"shopify",onClick:()=>(0,H.Tn)(null===D||void 0===D?void 0:D.id,d),children:[(0,f.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,f.jsx)("img",{src:(0,m.pc)("media/icons/platform-icons/shopify.svg"),height:20,width:20,alt:"shopify"})}),(0,f.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,f.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:"Connect Shop"})})]})]})]}),(0,f.jsxs)("div",{className:"card-bottom px-4",children:[(0,f.jsx)("div",{className:"text-center mb-5",children:(0,f.jsx)("p",{className:"text-muted mb-0",children:"Sync product from other source"})}),(0,f.jsxs)("div",{className:"d-flex justify-content-center flex-column flex-sm-row gap-3 mb-4",children:[(0,f.jsxs)(n.A,{variant:"secondary",className:"d-flex align-items-center justify-content-center",onClick:()=>p("showAddProduct"),children:[(0,f.jsx)(m.gc,{icon:"plus",className:"me-2"}),"Add Products"]}),(0,f.jsxs)(n.A,{variant:"secondary",className:"d-flex align-items-center justify-content-center",onClick:()=>p("uploadCsv"),children:[(0,f.jsx)(m.gc,{icon:"file-import",className:"me-2"}),"Import Product List"]})]})]})]})}):(0,f.jsxs)(y.A,{show:l,onHide:a,size:"xl",id:"syncProducts","aria-labelledby":"syncProducts",centered:!0,children:[(0,f.jsx)(y.A.Header,{closeButton:!0,children:(0,f.jsx)(y.A.Title,{children:"Sync Product"})}),(0,f.jsx)(y.A.Body,{children:(0,f.jsxs)("div",{className:"p-lg-8 p-4",children:[localStorage.getItem("shopifyLogin")?"":(0,f.jsxs)("div",{children:[["google",""].includes(t)?(0,f.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,f.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,f.jsx)(u.A,{className:"h-100",src:(0,m.pc)("media/icons/platform-icons/google.svg"),height:43,width:43,alt:"Google Merchant",fluid:!0})}),(0,f.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:"Google Merchant"})]})}),(0,f.jsx)("div",{className:"d-flex flex-grow-1",children:(0,f.jsxs)("div",{className:"mb-2 w-100 mx-0 mx-sm-3",children:[(0,f.jsx)(c.A.Control,{id:"google_id_input",size:"lg",className:x?"is-invalid":"",placeholder:"Google Merchant ID",value:A,onInput:e=>this.setState({gmc_id:e.target.value,gmc_error:!1}),required:!0}),x?(0,f.jsx)("div",{className:"invalid-feedback",children:A?"Please enter valid Merchant ID":"This field is required"}):null]})}),(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)(n.A,{id:"google_id_btn",className:"btn border-0 d-flex signInWithBrand signIn-Google mb-2",onClick:()=>{A?this.onAddGmcAccount(A):this.setState({gmc_error:!0})},children:[(0,f.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,f.jsx)("img",{src:(0,m.pc)("media/icons/platform-icons/google.svg"),height:43,width:43,alt:"google"})}),(0,f.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,f.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:"Sign in with Google"})})]})})]}):null,["shopify",""].includes(t)?(0,f.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,f.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,f.jsx)(u.A,{className:"h-100",src:(0,m.pc)("media/icons/platform-icons/shopify.svg"),height:20,width:20,alt:"shopify",fluid:!0})}),(0,f.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:"Shopify"})]})}),(0,f.jsx)("div",{className:"d-flex flex-grow-1",children:(0,f.jsxs)("div",{className:"mb-2 w-100 mx-0 mx-sm-3",children:[(0,f.jsx)(c.A.Control,{id:"shopify_id_input",size:"lg",className:b?"is-invalid":"",placeholder:"example.myshopify.com",value:_,onInput:e=>this.setUrl(e.target.value,"shopifyUrl","shopify_error"),required:!0}),b?(0,f.jsx)("div",{className:"invalid-feedback",children:w?"Shop already connected.":" Please enter valid url."}):null]})}),(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)(n.A,{id:"shopify_id_btn",className:"btn border-0 d-flex signInWithBrand signIn-Shopify mb-2",value:"shopify",onClick:_&&!b?()=>this.checkShopify(_):()=>{this.setState({shopify_error:!0})},children:[(0,f.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,f.jsx)("img",{src:(0,m.pc)("media/icons/platform-icons/shopify.svg"),height:20,width:20,alt:"shopify"})}),(0,f.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,f.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:"Connect Shop"})})]})})]}):null,["bmc",""].includes(t)?(0,f.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,f.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,f.jsx)(u.A,{className:"h-100 invert",src:(0,m.pc)("media/icons/platform-icons/bigcommerce.svg"),height:20,width:20,alt:"bigcommerce",title:"bigcommerce",fluid:!0})}),(0,f.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:"BigCommerce"})]})}),(0,f.jsx)("div",{className:"d-flex flex-grow-1",children:(0,f.jsx)("div",{className:"my-2 w-100 mx-0 mx-sm-3",children:(0,f.jsx)("p",{className:"mb-0 fs-8",children:"Install our BigCommerce app to sync products."})})}),(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)(g.N_,{id:"bmc_btn",to:"https://www.bigcommerce.com/apps/taggshop",className:"border-0 d-flex signInWithBrand signIn-Bigcommerce mb-2",title:"CSV",children:[(0,f.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,f.jsx)(u.A,{src:(0,m.pc)("media/icons/platform-icons/bigcommerce.svg"),height:20,width:20,alt:"bigcommerce",title:"bigcommerce"})}),(0,f.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,f.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:"Install App"})})]})})]}):null,["magento",""].includes(t)?(0,f.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,f.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,f.jsx)(u.A,{className:"h-100",src:(0,m.pc)("media/icons/platform-icons/magento.svg"),height:20,width:20,alt:"magento",title:"magento",fluid:!0})}),(0,f.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:"Magento"})]})}),(0,f.jsxs)("div",{className:"d-flex flex-grow-1 flex-column mx-0 mx-sm-3",children:[(0,f.jsxs)("div",{className:"mb-2 w-100",children:[(0,f.jsx)(c.A.Control,{id:"magento_input",size:"lg",className:j?"is-invalid":"",placeholder:'Enter your "magento" store URL',value:C,onInput:e=>this.setUrl(e.target.value,"m_url","m_error"),required:!0}),j?(0,f.jsx)("div",{className:"invalid-feedback",children:"This field is required"}):null]}),(0,f.jsx)("span",{className:"text-gray-700 fs-8 fw-medium",children:"Note: Only Compatible with Magento 2.x"})]}),(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)(n.A,{id:"magento_btn",className:"border-0 d-flex signInWithBrand signIn-Magento mb-2",onClick:C&&!j?()=>{o(C)}:()=>{this.setState({m_error:!0})},children:[(0,f.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,f.jsx)("img",{src:(0,m.pc)("media/icons/platform-icons/magento.svg"),height:20,width:20,alt:"magento"})}),(0,f.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,f.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:"Connect Shop"})})]})})]}):null,["woocommerce",""].includes(t)?(0,f.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,f.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,f.jsx)("img",{className:"img-fluid h-100",src:(0,m.pc)("media/icons/platform-icons/woocommerce.svg"),height:20,width:20,alt:"woocommerce"})}),(0,f.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:"Woocommerce"})]})}),(0,f.jsx)("div",{className:"d-flex flex-grow-1 flex-column mx-0 mx-sm-3",children:(0,f.jsxs)("div",{className:"mb-2 w-100",children:[(0,f.jsx)(c.A.Control,{id:"wooco_input",size:"lg",className:N?"is-invalid":"",placeholder:'Enter your "woocommerce" store URL',value:S,onInput:e=>this.setUrl(e.target.value,"w_url","w_error"),required:!0}),N?(0,f.jsx)("div",{className:"invalid-feedback",children:"This field is required"}):null]})}),(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)(n.A,{id:"wooco_btn",className:"border-0 d-flex signInWithBrand signIn-Woocommerce mb-2",onClick:()=>{S&&!N?(0,H.wl)(S):this.setState({w_error:!0})},children:[(0,f.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,f.jsx)("img",{src:(0,m.pc)("media/icons/platform-icons/woocommerce.svg"),height:20,width:20,alt:"woocommerce"})}),(0,f.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,f.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:"Connect Shop"})})]})})]}):null,["salesforce",""].includes(t)?(0,f.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,f.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,f.jsx)("img",{className:"img-fluid h-100",src:(0,m.pc)("media/icons/platform-icons/salesforce.svg"),height:20,width:20,alt:"salesforce"})}),(0,f.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:"Salesforce"})]})}),(0,f.jsx)("div",{className:"d-flex flex-grow-1 flex-column mx-0 mx-sm-3",children:(0,f.jsxs)("div",{className:"mb-2 w-100",children:[(0,f.jsx)(c.A.Control,{id:"wooco_input",size:"lg",className:P?"is-invalid":"",placeholder:'Enter your "salesforce" store URL',value:k,onInput:e=>this.setUrl(e.target.value,"sales_url","sales_error"),required:!0}),P?(0,f.jsx)("div",{className:"invalid-feedback",children:"This field is required"}):null]})}),(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)(n.A,{id:"wooco_btn",className:"border-0 d-flex signInWithBrand signIn-Salesforce mb-2",onClick:()=>{k&&!P?(0,H.jS)(k):this.setState({sales_error:!0})},children:[(0,f.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,f.jsx)("img",{src:(0,m.pc)("media/icons/platform-icons/salesforce.svg"),height:20,width:20,alt:"salesforce"})}),(0,f.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,f.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:"Connect Shop"})})]})})]}):null]}),i&&""==t&&i.length?(0,f.jsxs)("div",{children:[localStorage.getItem("shopifyLogin")?"":(0,f.jsx)("h4",{children:"Your Connected Shop"}),(0,f.jsx)("div",{className:"".concat(localStorage.getItem("shopifyLogin")?"":"border-top ","pt-5"),children:i.map((e=>"googlemerchant"==e.created_from?(0,f.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,f.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,f.jsx)(u.A,{className:"h-100",src:(0,m.pc)("media/icons/platform-icons/google.svg"),height:43,width:43,alt:"Google Merchant",fluid:!0})}),(0,f.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:"Google Merchant"})]})}),(0,f.jsx)("div",{className:"d-flex flex-grow-1",children:(0,f.jsxs)("div",{className:"mb-2 w-100 mx-0 mx-sm-3",children:[(0,f.jsx)(c.A.Control,{id:"google_c_id",size:"lg",placeholder:"Google Merchant ID",value:e.storeId,readOnly:!0}),e.modified?(0,f.jsxs)("span",{className:"text-gray-700 fs-8 fw-medium",children:["Last synced ",(0,v.S)(e.modified)]}):""]})}),(0,f.jsxs)("div",{className:"d-flex flex-shrink-0",children:[(0,f.jsxs)(n.A,{id:"google_c_btn",className:"btn border-0 d-flex signInWithBrand signIn-Google mb-2",onClick:()=>(0,H.UZ)(e.id,(s=>{s?this.onAddGmcAccount(e.storeId):d()})),children:[(0,f.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,f.jsx)("img",{src:(0,m.pc)("media/icons/platform-icons/google.svg"),height:43,width:43,alt:"Google Merchant"})}),(0,f.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,f.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:"Sign in with Google"})})]}),(0,f.jsx)("div",{className:"ms-2",children:(0,f.jsx)(n.A,{id:"google_c_d_btn",variant:"icon",size:"lg",className:"btn-active-danger","aria-label":"delete",onClick:()=>r(e.id),children:(0,f.jsx)(m.gc,{type:"solid",icon:"trash-can"})})})]})]},0):"bigcommerce"==e.created_from?(0,f.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,f.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,f.jsx)(u.A,{className:"h-100 invert",src:(0,m.pc)("media/icons/platform-icons/bigcommerce.svg"),height:20,width:20,alt:"bigcommerce",fluid:!0})}),(0,f.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:"BigCommerce"})]})}),(0,f.jsxs)("div",{className:"d-flex flex-grow-1 flex-column mx-0 mx-sm-3",children:[(0,f.jsx)("div",{className:"mb-2 w-100",children:(0,f.jsx)(c.A.Control,{id:"bcm_c_input",size:"lg",placeholder:'Enter your "magento" store URL',value:e.domain,readOnly:!0})}),e.modified?(0,f.jsxs)("span",{className:"text-gray-700 fs-8 fw-medium",children:["Last synced ",(0,v.S)(e.modified)]}):null]}),(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)(n.A,{id:"bcm_c_btn",className:"border-0 d-flex signInWithBrand signIn-Bigcommerce mb-2",onClick:()=>(0,H.VQ)(e.id,d),children:[(0,f.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,f.jsx)("img",{src:(0,m.pc)("media/icons/platform-icons/bigcommerce.svg"),height:20,width:20,alt:"bigcommerce"})}),(0,f.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,f.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:"Sync Products"})})]})})]},1):"shopify"==e.created_from?(0,f.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,f.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,f.jsx)(u.A,{className:"h-100",src:(0,m.pc)("media/icons/platform-icons/shopify.svg"),height:20,width:20,alt:"shopify",fluid:!0})}),(0,f.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:"Shopify"})]})}),(0,f.jsx)("div",{className:"d-flex flex-grow-1",children:(0,f.jsxs)("div",{className:"mb-2 w-100 mx-0 mx-sm-3",children:[(0,f.jsx)(c.A.Control,{id:"shopify_c_input",size:"lg",placeholder:"example.myshopify.com",value:e.domain,readOnly:!0}),e.modified?(0,f.jsxs)("span",{className:"text-gray-700 fs-8 fw-medium",children:["Last synced  ",(0,v.S)(e.modified)]}):""]})}),(0,f.jsxs)("div",{className:"d-flex flex-shrink-0",children:[(0,f.jsxs)(n.A,{id:"shopify_c_btn",className:"btn border-0 d-flex signInWithBrand signIn-Shopify mb-2",value:"shopify",onClick:()=>(0,H.Tn)(e.id,d),children:[(0,f.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,f.jsx)("img",{src:(0,m.pc)("media/icons/platform-icons/shopify.svg"),height:20,width:20,alt:"shopify"})}),(0,f.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,f.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:"Connect Shop"})})]}),localStorage.getItem("shopifyLogin")?"":(0,f.jsx)("div",{className:"ms-2",children:(0,f.jsx)(n.A,{id:"shopify_c_d_btn",variant:"icon",size:"lg",className:"btn-active-danger","aria-label":"delete",onClick:()=>r(e.id),children:(0,f.jsx)(m.gc,{type:"solid",icon:"trash-can"})})})]})]},2):"magento"==e.created_from?(0,f.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,f.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,f.jsx)("img",{className:"img-fluid h-100",src:(0,m.pc)("media/icons/platform-icons/magento.svg"),height:20,width:20,alt:"magento"})}),(0,f.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:"Magento"})]})}),(0,f.jsxs)("div",{className:"d-flex flex-grow-1 flex-column mx-0 mx-sm-3",children:[(0,f.jsxs)("div",{className:"mb-2 w-100",children:[(0,f.jsx)(c.A.Control,{id:"magento_c_url_input",className:"mb-3",size:"lg",placeholder:'Enter your "magento" store URL',value:null===e||void 0===e?void 0:e.domain,readOnly:!0}),(0,f.jsxs)(O.A,{variant:"success",className:"p-2 rounded-1 mb-2",children:[(0,f.jsxs)(O.A.Heading,{className:"h5 mb-1",children:[(0,f.jsxs)("span",{className:"text-muted",children:[(0,f.jsx)(m.gc,{icon:"store",iconClass:"me-1"})," Store : "]}),null===e||void 0===e?void 0:e.storeId]}),e.modified?(0,f.jsxs)("p",{className:"mb-0",children:["Last synced  ",(0,v.S)(e.modified)]}):""]})]}),(0,f.jsx)("span",{className:"text-gray-700 fs-8 fw-medium",children:"Note: Only Compatible with Magento 2.x"})]}),(0,f.jsxs)("div",{className:"d-flex flex-shrink-0",children:[(0,f.jsxs)(n.A,{id:"magento_c_btn",className:"border-0 d-flex signInWithBrand signIn-Magento mb-2",onClick:()=>(0,H.Gg)(null===e||void 0===e?void 0:e.storeId,null===e||void 0===e?void 0:e.accessToken,null===e||void 0===e?void 0:e.shop,d),children:[(0,f.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,f.jsx)("img",{src:(0,m.pc)("media/icons/platform-icons/magento.svg"),height:20,width:20,alt:"magento"})}),(0,f.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,f.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:"Sync Products"})})]}),(0,f.jsx)("div",{className:"ms-2",children:(0,f.jsx)(n.A,{id:"magento_c_d_btn",variant:"icon",size:"lg",className:"btn-active-danger","aria-label":"delete",onClick:()=>r(e.id),children:(0,f.jsx)(m.gc,{type:"solid",icon:"trash-can"})})})]})]},3):"woocommerce"==e.created_from?(0,f.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,f.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,f.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,f.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,f.jsx)("img",{className:"img-fluid h-100",src:(0,m.pc)("media/icons/platform-icons/woocommerce.svg"),height:20,width:20,alt:"twitter"})}),(0,f.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:"Woocommerce"})]})}),(0,f.jsx)("div",{className:"d-flex flex-grow-1 flex-column mx-0 mx-sm-3",children:(0,f.jsxs)("div",{className:"mb-2 w-100",children:[(0,f.jsx)(c.A.Control,{id:"woco_c_input",size:"lg",placeholder:'Enter your "woocommerce" store URL',value:null===e||void 0===e?void 0:e.domain,readOnly:!0}),e.modified?(0,f.jsxs)("span",{className:"text-gray-700 fs-8 fw-medium",children:["Last synced  ",(0,v.S)(e.modified)]}):""]})}),(0,f.jsxs)("div",{className:"d-flex flex-shrink-0",children:[(0,f.jsxs)(n.A,{id:"woco_c_btn",className:"border-0 d-flex signInWithBrand signIn-Woocommerce mb-2",onClick:()=>(0,H.KT)(null===e||void 0===e?void 0:e.id,d),children:[(0,f.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,f.jsx)("img",{src:(0,m.pc)("media/icons/platform-icons/woocommerce.svg"),height:20,width:20,alt:"woocommerce"})}),(0,f.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,f.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:"Sync Products"})})]}),(0,f.jsx)("div",{className:"ms-2",children:(0,f.jsx)(n.A,{id:"woco_c_d_btn",variant:"icon",size:"lg",className:"btn-active-danger","aria-label":"delete",onClick:()=>r(e.id),children:(0,f.jsx)(m.gc,{type:"solid",icon:"trash-can"})})})]})]},4):void 0))})]}):null,(0,f.jsx)(R.A,{title:"Request Platform",children:(0,f.jsxs)(n.A,{variant:"secondary",children:[(0,f.jsx)(m.gc,{icon:"plus"}),"Request Platform"]})})]})})]})}}const K=e=>{let{icon:s,title:l,onClick:a}=e;return(0,f.jsx)(_.A,{sm:6,children:(0,f.jsx)(i.A,{id:"m-".concat(s,"_btn"),className:"card-stretch gutter-b cursor-pointer",onClick:a,children:(0,f.jsxs)(i.A.Body,{className:"flex-column f-center px-2",style:{height:150},children:[(0,f.jsx)("span",{className:"h-40px w-40px rounded-2 bg-dark text-light mb-3 f-center fs-4",children:(0,f.jsx)(m.gc,{icon:s})}),(0,f.jsx)("h5",{className:"text-center fs-8",children:l})]})})})},$=e=>{let{show:s,handleClose:l,uploadCsv:a,onAddProduct:t}=e;return(0,f.jsxs)(y.A,{show:s,size:"md",onHide:l,id:"manual_upload_m",centered:!0,children:[(0,f.jsx)(y.A.Header,{closeButton:!0,children:(0,f.jsx)(y.A.Title,{children:"Manual Upload Products"})}),(0,f.jsx)(y.A.Body,{}),(0,f.jsx)(y.A.Body,{children:(0,f.jsx)("div",{className:"syncPro_modal",children:(0,f.jsxs)(w.A,{className:"px-sm-10",children:[(0,f.jsx)(K,{icon:"download",title:"Upload CSV File",onClick:a}),(0,f.jsx)(K,{icon:"bag-shopping-plus",title:"Add Single Product",onClick:t})]})})})]})};class z extends a.Component{constructor(){super(...arguments),this.state={selectedFile:"",filename:"",selected:"",uploadedFileName:"",isLoading:!1,loading:!1},this.uppyUploader=new k.A([".csv"]),this.onUploadCSV=()=>{const{filename:e}=this.state,{countAllPage:s,fromOB:l,navigate:a}=this.props;(new FormData).append("csv_url",e),a?(0,H.$g)(e,this.onClose,s,l,a):(0,H.$g)(e,this.onClose,s)},this.onClose=()=>{this.setState({selectedFile:"",filename:"",selected:"",uploadedFileName:"",isLoading:!1,loading:!1},(()=>{this.uppyUploader.uppy.cancelAll(),this.props.onHide()}))}}componentDidMount(){this.uppyUploader.uppy.on("transloadit:result",((e,s)=>{this.setState({loading:!1,selectedFile:s.id,filename:"".concat(I.$r).concat(s.id,".").concat(s.ext),selected:"".concat(I.$r).concat(s.id,".").concat(s.ext),uploadedFileName:s.name},(()=>{setTimeout((()=>{this.uppyUploader.uppy.cancelAll()}),300)}))})),this.uppyUploader.uppy.on("file-added",(e=>this.setState({loading:!0})))}render(){const{show:e}=this.props,{loading:s,uploadedFileName:l}=this.state;return(0,f.jsxs)(y.A,{show:e,onHide:this.onClose,size:"md",id:"ImportProducts",centered:!0,children:[(0,f.jsx)(y.A.Header,{closeButton:!0,children:(0,f.jsx)(y.A.Title,{children:"Import products by csv"})}),(0,f.jsxs)(y.A.Body,{children:[(0,f.jsxs)("p",{className:"mb-2 fw-medium",children:["Download the ",(0,f.jsx)(g.N_,{id:"download_csv",to:(0,m.pc)("media/downloads/sample-product.csv"),target:"_blank",className:"btn-link",title:"CSV",download:!0,children:"sample csv template\xa0"}),"to see an example of the format required"]}),(0,f.jsx)("div",{className:"w-100 mb-2",children:(0,f.jsx)(C.OX,{proudlyDisplayPoweredByUppy:!1,hideUploadButton:!0,showProgressDetails:!0,disableThumbnailGenerator:!1,width:"100%",style:{padding:0},id:"upload_csv",showRemoveButtonAfterComplete:!1,uppy:this.uppyUploader.uppy})}),(0,f.jsx)("p",{className:"mb-0 fw-medium text-gray-500",children:s?"Please Wait...":l||"Your selected file name"})]}),(0,f.jsxs)(y.A.Footer,{children:[(0,f.jsx)(n.A,{id:"close_import_btn",variant:"secondary",size:"sm",className:"btn-min-w me-3",onClick:this.onClose,children:"Cancel"}),(0,f.jsx)(n.A,{id:"import_btn",variant:"primary",size:"sm",className:"btn-min-w me-3".concat(""==l?" disabled":""),onClick:this.onUploadCSV,children:"Upload and continue"})]})]})}}const Y=/^(http:\/\/|https:\/\/).+/,q=e=>{let{show:s,onHide:l,refreshProducts:t,m_url:i}=e;const[o,r]=(0,a.useState)([]),[d,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)(""),[u,x]=(0,a.useState)(null),[b,j]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),[_,C]=(0,a.useState)(""),S=e=>{w(!1),C(e),e||(l(),t())};return(0,f.jsxs)(y.A,{show:s,onHide:l,size:"md",centered:!0,children:[(0,f.jsx)(y.A.Header,{closeButton:!0,children:(0,f.jsx)(y.A.Title,{children:"Connect Your Store"})}),(0,f.jsxs)(y.A.Body,{className:"p-5",children:[(0,f.jsx)("p",{className:"h5",children:"You are trying to connect the Store. Please Enter Access Token for your website."}),(0,f.jsxs)(c.A.Group,{className:"mb-3",children:[(0,f.jsx)(c.A.Label,{children:"Access Token"}),(0,f.jsx)("div",{className:"position-relative",children:(0,f.jsxs)("span",{className:"p-0 w-100 ".concat(d?"spinner":""," spinner-gray"),children:[(0,f.jsx)(c.A.Control,{size:"lg",className:"fw-bold ".concat(_?"is-invalid":""),placeholder:"Enter Access Token",value:h,onChange:e=>p(e.target.value),id:"accessToken",required:!0}),(0,f.jsx)("span",{className:"invalid-feedback",children:_})]})})]}),o&&o.length>0?(0,f.jsxs)(c.A.Group,{className:"mb-3",children:[(0,f.jsx)(c.A.Label,{children:"Choose Store"}),(0,f.jsx)(A.Ay,{className:"selectpicker selectpicker-lg",classNamePrefix:"selectpicker",options:o,value:b,onChange:e=>j(e)})]}):null,(0,f.jsx)(O.A,{variant:"warning",className:"rounded-1 p-2",children:"Note: Only Compatible with Magento 2.x"}),(0,f.jsxs)("p",{className:"mb-3",children:["How to generate access Token. ",(0,f.jsx)(g.N_,{className:"btn btn-link p-0",to:"https://devdocs.magento.com/guides/v2.4/get-started/authentication/gs-authentication-token.html",alt:"How to generate access Token.",target:"_blank",title:"How to generate access Token.",children:"Click here"})," "]})]}),(0,f.jsx)(y.A.Footer,{children:(0,f.jsxs)("div",{className:"d-flex align-items-center justify-content-end w-100",children:[(0,f.jsx)(n.A,{variant:"secondary",className:"me-2",onClick:()=>S(),children:"Close"}),u?(0,f.jsx)(n.A,{variant:"primary",id:"sync_pro_btn_",className:"".concat(N?"spinner":""),onClick:()=>{w(!0),(0,H.$H)(b.value,h,Y.test(i)?i:"https://".concat(i),S)},children:"Sync Product"}):(0,f.jsx)(n.A,{variant:"primary",id:"verify_tok_btn",onClick:()=>{var e=i;m(!0),Y.test(e)||(e="https://".concat(e)),(0,H.G4)({accessToken:h,magentourl:e}).then((e=>{const{status:s,storelist:l,message:a}=e.data;if(s&&Array.isArray(l)){let e=l.map((e=>({label:e.name,value:e.code})));r(e),x(l),m(!1),l.length&&j(e[0])}else(0,v.r$)(Array.isArray(l)?a:l.message),m(!1)}))},children:"Verify Token"})]})})]})};var Z=l(18633),V=l(1391),J=l(48459),Q=l(80322),X=l(26787),ee=l(66345);const se=e=>(0,f.jsx)("th",{className:"fw-bold text-nowrap",style:{minWidth:e.width},children:e.children});class le extends a.Component{constructor(){super(...arguments),this.state={productsyncmodal:!0,currentPage:1,showPost:10,showAddProduct:!1,searchText:"",paginationItems:[],editProductData:null,selectedProducts:[],manualSyncModal:!1,uploadCsv:!1,productSync:!1,productName:"",addMagento:!1,loading:!0,m_url:"",searchLoding:!1,searching:!1},this.handleMessage=e=>{try{const s=(0,v.KK)(e.data),{code:l,type:a}=s;"shopifyLogin"==a&&l&&((0,H.Tn)(l,this.refreshProducts),setTimeout((()=>{this.setState({productSync:!1,manualSyncModal:!1,productName:""},(()=>this.props.shopifyProducts()))}),200))}catch(s){console.log("--- handleMessage error ---",s)}},this.nextPrev=e=>s=>{this.setState({currentPage:e},(()=>this.props.fetchProductList(e,10,"",this.state.searchText,this.generatePagination)))},this.searchProduct=(0,v.sg)((()=>{const{searchText:e}=this.state,s=(null===e||void 0===e?void 0:e.length)>1?e:"";this.setState({loading:!0,searchLoding:!0,currentPage:1},(()=>this.props.fetchProductList(1,10,"",s,this.generatePagination)))}),500),this.changePage=e=>{const{showPost:s,searchText:l}=this.state;this.setState({currentPage:e},(()=>{this.props.fetchProductList(e,s,"",l,this.generatePagination)}))},this.generatePagination=()=>{const{currentPage:e}=this.state,{total_pages:s}=this.props,l=10;let a=[];if(s<=l)a=(0,v.OZ)(s);else if(e<=5)a=(0,v.OZ)(l);else if(e>s-5)a=Array.from({length:l},((e,a)=>s-l+a+1));else{const s=Math.floor(e-5);a=Array.from({length:l},((e,l)=>s+l))}1!==a[0]&&(a.unshift(1),2!==a[1]&&a.splice(1,0,"...")),a[a.length-1]!==s&&(a[a.length-1]!==s-1&&a.push("..."),a.push(s)),this.setState({loading:!1,paginationItems:a,searchLoding:!1})},this.onEditPost=e=>{(0,Q.Yj)("product_catalog","",!0)&&this.setState({editProductData:e,showAddProduct:!0})},this.onProductSelect=(e,s)=>{const{selectedProducts:l}=this.state;s?this.setState({selectedProducts:[...l,e]}):this.setState({selectedProducts:l.filter((s=>s!=e))})},this.onAllProductSelect=e=>{e?this.setState({selectedProducts:this.props.allProducts.map((e=>e.id))}):this.setState({selectedProducts:[]})},this.deleteAllProduct=e=>{const{ACTION_PRODUCT_DELETE:s}=this.props,{selectedProducts:l,paginationItems:a}=this.state;(0,Q.Yj)("product_catalog","",!0)&&p().fire({title:"Are you sure ?",text:"Are you sure you want to permanently delete selected ".concat(this.state.selectedProducts.length>1?"products":"product","?"),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then((t=>{if(t.value){const t=(0,v.HA)();s({id:e?[e.id]:l},(()=>{a.length>1&&this.setState({loading:!0},(()=>this.refreshProducts())),(0,v._q)(t,"success","Successfully Deleted !")})),this.onAllProductSelect()}else"cancel"===t.dismiss&&(0,v.k1)("Your ".concat(this.state.selectedProducts.length>1?"products are":"product is"," safe."))}))},this.checkTour=async()=>{var e;const s=(0,v.lL)("tourStep"),a=null===(e=(0,v.lL)("isTour"))||void 0===e||e,{default:t}=await l.e(8695).then(l.bind(l,8695)),{tour:i}=new t(this.props.navigate,!1,this.props.dispatch);a||"#upload-products"!=(null===s||void 0===s?void 0:s.id)||((0,v.n4)("tourStep",{id:"#tag_pro",step:7}),setTimeout((()=>{var e;return i.drive(null!==(e=null===s||void 0===s?void 0:s.step)&&void 0!==e?e:6)}),400))},this.refreshProducts=e=>{const{searchText:s}=this.state;this.setState({productSync:!1}),this.props.fetchProductList(1,10,"",e?s:"",this.generatePagination),this.props.shopifyProducts()},this.showManualSyncModal=e=>{(0,Q.Yj)("product_catalog","",!0)&&this.setState({[e]:!0})},this.onDelete=e=>{(0,Q.Yj)("product_catalog","",!0)&&p().fire({icon:"warning",title:"Are You Sure?",html:"<p>Are you sure you want to delete the product catalog from ".concat(ee.SxH,'?</p><p class="text-danger fs-10 mb-0">Attention! Tagged products from this catalog will also be removed.</p>'),showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete"}).then((s=>{s.value?this.props.STORE_DELETE(e,this.refreshProducts):"cancel"===s.dismiss&&(0,v.k1)("Your product is safe.")}))}}componentDidMount(){const{currentPage:e,showPost:s,searchText:l}=this.state;this.props.shopifyProducts(),this.props.fetchProductList(e,s,"",l,this.generatePagination),window.addEventListener("message",this.handleMessage);new URL(window.location.href);const a=(0,v.u0)();if(null!==a&&void 0!==a&&a.success)(0,v.k1)("Product Synced Successfully!"),this.props.navigate("/content/products");else if("salesforce"==(null===a||void 0===a?void 0:a.state)&&null!==a&&void 0!==a&&a.code){var t;(0,H.KS)(null!==(t=null===a||void 0===a?void 0:a.code)&&void 0!==t?t:"")}}render(){const{currentPage:e,addMagento:s,showAddProduct:l,searchText:a,paginationItems:h,editProductData:p,selectedProducts:u,manualSyncModal:x,uploadCsv:b,productSync:j,productName:y,loading:w,m_url:_,searchLoding:A,searching:C}=this.state,{allProducts:S,stores:P,loadingProd_cat:k}=this.props,D=(0,v.C2)(),I=D?(null===S||void 0===S?void 0:S.length)||C:(null===P||void 0===P?void 0:P.length)||(null===S||void 0===S?void 0:S.length)||C;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(X.A,{crumbs:[{name:"Product Catalog",link:"/products",icon:"bag-shopping"},{name:"Home",link:"/home"},{name:"Product Catalog",link:"/products"}],crumbIcon:"bag-shopping"}),(0,f.jsxs)("div",{className:"d-flex flex-column flex-column-fluid w-100 pb-5 products_",children:[(0,f.jsx)(t.A,{fluid:!0,className:D&&!I?"f-center h-100vh":"container-catalogue",style:D?{}:{marginTop:"55px"},children:I?(0,f.jsxs)(i.A,{className:"border-none w-100",style:D?{minHeight:"calc(100vh - 40px)"}:{},children:[(0,f.jsxs)(i.A.Header,{className:"f-between pt-lg-6 pt-4",children:[(0,f.jsx)("h4",{className:"text-xl",children:"Product Catalog List"}),(0,f.jsxs)("div",{className:"d-flex justify-content-end flex-wrap flex-sm-row flex-column flex-grow-1",children:[(0,f.jsxs)(n.A,{id:"import_pro",variant:"dark",size:"sm",className:"me-sm-2 mb-2 text-nowrap",onClick:e=>this.showManualSyncModal("uploadCsv"),children:[(0,f.jsx)(m.gc,{type:"solid",icon:"download"}),"Import product list"]}),(0,f.jsx)(n.A,{variant:"primary",size:"sm",className:"me-sm-2 mb-2 text-nowrap",onClick:e=>this.showManualSyncModal("productSync"),children:"Sync product catalog"}),(0,f.jsxs)(n.A,{id:"add_pro",variant:"primary",size:"sm",className:"mb-2 text-nowrap",onClick:e=>this.showManualSyncModal("showAddProduct"),children:[(0,f.jsx)(m.gc,{type:"solid",icon:"plus"}),"Add product"]})]})]}),(0,f.jsxs)(i.A.Body,{className:"py-0",children:[(0,f.jsx)("div",{className:"d-flex align-items-start justify-content-between flex-wrap pt-3",children:(0,f.jsxs)("div",{className:"f-between w-100",children:[(0,f.jsx)("div",{className:"p-0 position-relative w-100 mb-2 d-flex flex-grow-1",style:{maxWidth:320},children:(0,f.jsxs)("span",{className:"p-0 w-100 ".concat(A?"spinner spinner-gray spinner-sm":""),children:[(0,f.jsx)(c.A.Control,{id:"search_pro",type:"text",className:"pe-8",value:a,onChange:e=>this.setState({searchText:e.target.value,searching:!0},(()=>this.searchProduct())),placeholder:"Search by product name, SKU, or URL"}),A?null:(0,f.jsx)("span",{id:"search_spinner",className:"h-38px w-38px text-gray-500 f-center position-absolute top-50 translate-middle fs-6",style:{right:-19},onClick:()=>a?this.setState({searchText:""},(()=>this.searchProduct())):[],children:(0,f.jsx)(m.gc,{icon:a?"xmark":"magnifying-glass"})})]})}),(0,f.jsxs)("div",{className:"f-center ms-3",children:[u&&S&&(u.length>1||u.length==S.length)&&0!=S.length?(0,f.jsxs)(n.A,{id:"d_selected_btn",variant:"primary",size:"sm",className:"mb-2 me-4",onClick:()=>this.deleteAllProduct(),children:[(0,f.jsx)(m.gc,{icon:"trash-can"}),"Delete ",u.length==S.length?"All":"(".concat(u.length,")")]}):null,(0,f.jsxs)(g.N_,{variant:"secondary",id:"tag_pro",to:"/content/moderation/".concat(localStorage.getItem("wallId")?localStorage.getItem("wallId"):""),className:"btn btn-primary btn-sm me-sm-2 mb-2 text-nowrap",title:"Tag products",children:[(0,f.jsx)(m.gc,{type:"solid",icon:"tag"}),"Tag products"]})]})]})}),(0,f.jsxs)(o.A,{className:"mb-0 pb-3",size:"lg",responsive:!0,children:[(0,f.jsx)("thead",{className:"thead-light",children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{className:"fw-bold flex items-center",children:(0,f.jsx)("div",{className:"form-check",children:(0,f.jsx)(c.A.Check,{id:"check_all_pro","aria-label":"checkall",checked:0!=u.length&&u.length==S.length,onChange:e=>this.onAllProductSelect(e.target.checked)})})}),(0,f.jsx)(se,{width:200,children:"Product"}),(0,f.jsx)(se,{width:50,children:"Price"}),(0,f.jsxs)(se,{width:50,children:["Discounted Price",(0,f.jsx)(r.A,{placement:"top",overlay:(0,f.jsx)(d.A,{children:"This represents the price after subtracting the discount."}),children:(0,f.jsx)("span",{children:(0,f.jsx)(m.gc,{type:"solid",icon:"circle-info",iconClass:"fs-5 ms-1 text-gray-500"})})})]}),(0,f.jsx)(se,{width:200,children:"Product URL"}),(0,f.jsx)(se,{width:50,children:"Product Id"}),(0,f.jsx)(se,{width:50,children:"Category"}),(0,f.jsx)(se,{width:50,children:"SKU"}),(0,f.jsx)(se,{width:50,children:"Tags"}),(0,f.jsx)("th",{className:"fw-bold text-nowrap text-end position-sticky end-0 pe-4",style:{minWidth:100},children:"Actions"})]})}),(0,f.jsx)("tbody",{children:(null===S||void 0===S?void 0:S.length)>0&&!w?S.map(((e,s)=>(0,f.jsx)(N,{product:e,selectedProducts:u,onProductSelect:this.onProductSelect,onEditPost:this.onEditPost,onDelete:this.deleteAllProduct},s))):(0,f.jsx)("tr",{children:(0,f.jsx)("td",{className:"border-0",colSpan:"10",style:{textAlign:"center"},children:w?(0,f.jsx)(Z.a,{bg:"body"}):(0,f.jsx)(J.A,{title:"No Product Found",desc:"We can't find any item matching your search.",icon:"product",height:"calc(100vh - 400px)"})})})})]}),(null===S||void 0===S?void 0:S.length)>0&&(null===h||void 0===h?void 0:h.length)>1&&!w?(0,f.jsxs)("ul",{className:"pagination pagination-sm mb-10 mt-5",children:[(0,f.jsx)("li",{className:"page-item",children:(0,f.jsx)("span",{className:"page-link cursor-pointer ".concat(1==e?" disabled":" cursor-pointer"),onClick:this.nextPrev(e-1),children:(0,f.jsx)(m.gc,{icon:"angle-left"})})}),h.map(((s,l)=>(0,f.jsx)("li",{id:"p_num_".concat(s),className:"page-item".concat(e==s?" active":" cursor-pointer"," ").concat("..."==s?" disabled":""),onClick:()=>this.changePage(s),children:(0,f.jsx)("span",{className:"page-link",children:s})},l))),(0,f.jsx)("li",{className:"page-item",children:(0,f.jsx)("span",{className:"page-link cursor-pointer ".concat(e==this.props.total_pages?" disabled":" cursor-pointer"),onClick:this.nextPrev(e+1),children:(0,f.jsx)(m.gc,{icon:"angle-right"})})})]}):null]})]}):k&&!w?D?(0,f.jsx)(W,{isShopify:!0,show:j,refreshProducts:this.refreshProducts,onDelete:this.onDelete,onHide:()=>this.setState({productSync:!1,productName:""}),product:y,stores:P,addMagento:s,showMagento:e=>this.setState({addMagento:!0,productSync:!1,m_url:e}),showManualSyncModal:this.showManualSyncModal}):(0,f.jsx)(M,{openManualSyncModal:()=>this.setState({manualSyncModal:!0}),openSyncProduct:e=>this.setState({productName:e,productSync:!0})}):null}),j?(0,f.jsx)(W,{show:j,refreshProducts:this.refreshProducts,onDelete:this.onDelete,onHide:()=>this.setState({productSync:!1,productName:""}),product:y,stores:P,addMagento:s,showMagento:e=>this.setState({addMagento:!0,productSync:!1,m_url:e}),showManualSyncModal:this.showManualSyncModal}):null,(0,f.jsx)(z,{show:b,onHide:()=>this.setState({uploadCsv:!1}),countAllPage:this.refreshProducts}),l?(0,f.jsx)(U,{showAddProduct:l,editProductData:p,ACTION_PRODUCT_UPDATE:this.props.ACTION_PRODUCT_UPDATE,closePopup:()=>this.setState({showAddProduct:!1,editProductData:null}),ACTION_PRODUCT_ADD:this.props.ACTION_PRODUCT_ADD}):null,(0,f.jsx)($,{show:x,handleClose:()=>this.setState({manualSyncModal:!1}),uploadCsv:()=>this.setState({uploadCsv:!0,manualSyncModal:!1}),onAddProduct:()=>this.setState({showAddProduct:!0,manualSyncModal:!1})}),s&&(0,f.jsx)(q,{show:s,onHide:()=>this.setState({addMagento:!1}),refreshProducts:this.refreshProducts,m_url:_})]})]})}}const ae=(0,E.Ng)((e=>{var s,l,a,t;return{allProducts:null===(s=e.products)||void 0===s?void 0:s.allProducts,total_pages:null===(l=e.products)||void 0===l?void 0:l.total_pages,loadingProd_cat:null===(a=e.products)||void 0===a?void 0:a.loadingProd_cat,stores:null===(t=e.products)||void 0===t?void 0:t.connectedStores,data:e.products.loadingProd_cat,dataNew:e.products}}),(e=>({fetchProductList:(s,l,a,t,i)=>e((0,H.EU)(s,l,a,t,i)),ACTION_PRODUCT_ADD:(s,l)=>e((0,H.pV)(s,l)),ACTION_PRODUCT_UPDATE:(s,l)=>e((0,H.L1)(s,l)),ACTION_PRODUCT_DELETE:(s,l)=>e((0,H.HW)(s,l)),shopifyProducts:()=>e((0,H.Hx)()),STORE_DELETE:(s,l)=>e((0,H.yK)(s,l))})))((0,V.A)(a.memo(le)))},54524:(e,s,l)=>{l.d(s,{A:()=>P});var a=l(9950),t=l(54810),i=l(26661),n=l(86781),c=l(17595),o=l(68459),r=l(97937),d=l(73878),m=l(3302),h=l.n(m),p=l(75794),u=(l(34461),l(57182),l(93766),l(55856),l(67128),l(2772)),x=l(67446),g=l(70188),v=l(76955),f=l(51960),b=l(85608),j=l(44414);class N extends a.Component{constructor(e){super(e),this.state={backgroundModal:!1,ext:"",fileName:""},this.onBackgroundClose=e=>{this.uppy.cancelAll(),this.setState({backgroundModal:!1})},this.onBackgroundOpen=e=>{this.setState({backgroundModal:!0},(()=>{h()(".uppy-Dashboard-close").click((()=>{this.uppy.cancelAll(),this.setState({backgroundModal:!1})}))}))},this.uppy=new p.A({debug:!0,autoProceed:!1,restrictions:{maxFileSize:5e7,maxNumberOfFiles:1,minNumberOfFiles:1,allowedFileTypes:this.props.allowFiles}}).use(u.Ay,{target:"#a",params:{auth:{key:b.bG},steps:{store:{robot:b._8,bucket_region:b.YL,bucket:b.I2,key:b.jZ,secret:b.mD,path:this.props.isLocation?"request-feature/${file.id}.${file.ext}":b.yQ+"${file.id}.${file.ext}"}}},waitForEncoding:!0}).use(x.A,{target:p.A.Dashboard,companionUrl:b.ac}).use(g.A,{target:p.A.Dashboard,companionUrl:b.ac})}componentDidMount(){var e=this;this.uppy.on("transloadit:result",((s,l)=>{this.setState({ext:l.ext,fileName:l.basename}),e.props.onClickToupload(this.props.isLocation?"".concat(b.GG,"request-feature/").concat(l.id,".").concat(l.ext):"".concat(b.$r).concat(l.id,".").concat(l.ext),(()=>{setTimeout((()=>{this.uppy.cancelAll(),this.setState({backgroundModal:!1})}),300)}))}))}render(){const{imageStyle:e,uploadedMedia:s,id:l,text:a}=this.props,{backgroundModal:i,ext:n,fileName:c}=this.state,o=e=>{switch(e){case"docx":return"file-doc";case"pdf":return"file-pdf";case"mp4":case"mov":return"file-video";default:return!1}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"d-flex align-items-start justify-content-between flex-column py-1",children:s?(0,j.jsxs)("div",{className:"f-between w-100 bg-gray-100 rounded-2 p-4 align-items-center",children:[(0,j.jsxs)("div",{className:"d-flex flex-grow-1 align-items-center",style:{width:"calc(100% - 30px)"},children:[o(n)?(0,j.jsx)("div",{className:"f-center flex-shrink-0 me-3",style:{fontSize:"3rem"},children:(0,j.jsx)(t.gc,{type:"solid",icon:o(n),iconClass:"text-gray-700"})}):(0,j.jsx)(f.A,{id:"bg_image",className:"object-fit-cover rounded-2 me-3",src:s,height:60,width:60,alt:"",style:{maxHeight:60}}),n?(0,j.jsxs)("p",{className:"text-ellipsis fs-8 mb-0",children:[c,".",n]}):null]}),(0,j.jsx)(r.A,{variant:"icon",size:"sm",className:"rounded-circle bg-danger border-danger text-white h-20px w-20px",onClick:()=>this.props.onClickToupload("",(()=>{})),children:(0,j.jsx)(t.gc,{icon:"xmark"})})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(r.A,{id:l,variant:"light",className:"w-100",onClick:()=>this.setState({backgroundModal:!0}),children:[(0,j.jsx)(t.gc,{icon:"arrow-up-from-bracket"}),a||"Upload"]}),(0,j.jsxs)("p",{className:"text-gray-500 mt-1 fw-medium fs-9",children:[(0,j.jsx)(t.gc,{type:"solid",icon:"info-circle",iconClass:"me-1"}),"Accepts ",this.props.allowFiles.join(", ")]})]})}),i?(0,j.jsx)(v.KG,{animateOpenClose:!0,open:i,proudlyDisplayPoweredByUppy:!1,inline:!1,showProgressDetails:!0,height:750,browserBackButtonClose:!0,showRemoveButtonAfterComplete:!1,uppy:this.uppy,onRequestClose:this.onBackgroundClose,closeAfterFinish:!0,plugins:["Url"]}):null]})}}var y=l(52867),w=l(66345),_=l(14313);localStorage.getItem("token");class A extends a.Component{constructor(e){var s,l,a,t,i,n;super(e),this.submitForm=()=>{const{name:e,email:s,description:l,uploadedMedia:a}=this.state;let t=!(!e||(0,y.QT)(e)||0==String(e).trim()),i=!(!s||!(0,y.DT)(s)),n=!!(l&&l.length<=500);if(t&&i&&n){this.setState({isLoading:!0});(e=>(new _.A).post("".concat(w.xpU),{name:e.name,email:e.email,description:e.description,file:e.file}))({name:e,email:s,description:"<b>".concat(this.props.title,"</b>-").concat(l),file:a}).then((e=>{200==e.data.responseCode?setTimeout((()=>{var e,s,l,a,t,i;(0,y.k1)("Request shared successfully"),this.setState({isLoading:!1,name:null===(e=this.props.authorized)||void 0===e||null===(s=e.userData)||void 0===s||null===(l=s.user_data)||void 0===l?void 0:l.user.name,email:null===(a=this.props.authorized)||void 0===a||null===(t=a.userData)||void 0===t||null===(i=t.user_data)||void 0===i?void 0:i.user.emailId,description:"",uploadedMedia:"",uploadedUrl:"",nameErr:!1,emailErr:!1,descriptionErr:!1}),this.props.onCloseModel(!1)}),1e3):(this.setState({isLoading:!1}),(0,y.r$)(e.data.message))})).catch((e=>{this.setState({isLoading:!1}),(0,y.r$)("Something went wrong, please try again later.")}))}else this.setState({isLoading:!1,nameErr:!t,emailErr:!i,descriptionErr:!n})},this.onClickToupload=(e,s)=>this.setState({uploadedMedia:e},(()=>s())),this.onCloseModelFun=()=>{var e,s,l,a,t,i;this.setState({name:null===(e=this.props.authorized)||void 0===e||null===(s=e.userData)||void 0===s||null===(l=s.user_data)||void 0===l?void 0:l.user.name,email:null===(a=this.props.authorized)||void 0===a||null===(t=a.userData)||void 0===t||null===(i=t.user_data)||void 0===i?void 0:i.user.emailId,description:"",uploadedMedia:"",uploadedUrl:"",nameErr:!1,emailErr:!1,descriptionErr:!1}),this.props.onCloseModel(!1)},this.state={name:null===(s=this.props.authorized)||void 0===s||null===(l=s.userData)||void 0===l||null===(a=l.user_data)||void 0===a?void 0:a.user.name,email:null===(t=this.props.authorized)||void 0===t||null===(i=t.userData)||void 0===i||null===(n=i.user_data)||void 0===n?void 0:n.user.emailId,description:"",uploadedMedia:"",uploadedUrl:"",nameErr:!1,emailErr:!1,descriptionErr:!1,isLoading:!1}}render(){var e,s;const{show:l,onCloseModel:a,authorized:t,title:d}=this.props,{name:m,email:h,description:p,uploadedUrl:u,nameErr:x,emailErr:g,descriptionErr:v,isLoading:f,uploadedMedia:b}=(null===t||void 0===t||null===(e=t.userData)||void 0===e||null===(s=e.user_data)||void 0===s||s.user,this.state);return(0,j.jsxs)(i.A,{id:"reqFeature",size:"lg",show:l,"aria-labelledby":"reqFeature",tabIndex:"0",centered:!0,backdrop:"static",onHide:this.onCloseModelFun,children:[(0,j.jsx)(i.A.Header,{closeButton:!0,children:(0,j.jsx)(i.A.Title,{children:d})}),(0,j.jsxs)(i.A.Body,{className:"p-lg-7 p-3 demo_schedule position-relative",children:[(0,j.jsxs)(n.A,{className:"mb-3",children:[(0,j.jsxs)(c.A.Group,{as:o.A,md:"6",children:[(0,j.jsxs)(c.A.Label,{children:["Full Name ",(0,j.jsx)("strong",{className:"text-danger",children:"*"})]}),(0,j.jsx)(c.A.Control,{id:"r_f_name",required:!0,type:"text",placeholder:"Full name",className:x?"is-invalid":"",value:m,onChange:e=>this.setState({name:e.target.value,nameErr:!1})}),x&&(0,j.jsx)("div",{className:"invalid-feedback",children:"Name is required."})]}),(0,j.jsxs)(c.A.Group,{as:o.A,md:"6",children:[(0,j.jsxs)(c.A.Label,{children:["Email ",(0,j.jsx)("strong",{className:"text-danger",children:"*"})]}),(0,j.jsx)(c.A.Control,{id:"r_f_email",required:!0,type:"email",placeholder:"example@example.com",className:g?"is-invalid":"",value:h,onChange:e=>this.setState({email:e.target.value,emailErr:!1})}),g&&(0,j.jsx)("div",{className:"invalid-feedback",children:""!=h?"Enter valid email.":"Email ID is required."})]})]}),(0,j.jsxs)(c.A.Group,{as:o.A,className:"mb-3",children:[(0,j.jsxs)(c.A.Label,{children:["Description ",(0,j.jsx)("strong",{className:"text-danger",children:"*"})]}),(0,j.jsx)(c.A.Control,{as:"textarea",id:"r_f_desc",placeholder:"Enter Description",className:"".concat(v?"is-invalid":""," textarea-min-row-6"),maxLength:500,onChange:e=>this.setState({description:e.target.value,descriptionErr:!1}),value:p}),(0,j.jsxs)("div",{className:"f-between",children:[(0,j.jsx)("div",{className:"invalid-feedback d-block",children:v?"This field is required":""}),(0,j.jsxs)("span",{className:"fs-10 text-muted pt-1",children:[null===p||void 0===p?void 0:p.length,"/500"]})]})]}),(0,j.jsx)(c.A.Group,{as:o.A,className:"mb-3",children:(0,j.jsx)(N,{id:"sugg_doc",imageStyle:{paddingBottom:"66%"},uploadedMedia:b,onClickToupload:this.onClickToupload,text:"Upload File",allowFiles:["image/*",".docx",".pdf",".mp4",".mov"],isLocation:!0})})]}),(0,j.jsxs)(i.A.Footer,{children:[(0,j.jsx)(r.A,{id:"r_f_cancel",variant:"secondary",className:"ms-3 btn-min-w",onClick:this.onCloseModelFun,children:"Cancel"}),(0,j.jsx)(r.A,{id:"r_f_submit",className:"ms-3 btn-min-w ".concat(f?"spinner":""),onClick:this.submitForm,children:"Submit"})]})]})}}const C=(0,d.Ng)((e=>({authorized:e.authorized})),(e=>({})))(A);class S extends a.Component{constructor(e){super(e),this.state={show:!1}}render(){const{title:e}=this.props,{show:s}=this.state;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{onClick:()=>this.setState({show:!s}),children:this.props.children}),(0,j.jsx)(C,{show:s,onCloseModel:()=>this.setState({show:!1}),title:e||"Request New Feature"})]})}}const P=S}}]);