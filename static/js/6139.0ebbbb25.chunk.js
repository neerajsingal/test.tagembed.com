"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[6139],{94562:(e,t,s)=>{s.d(t,{A:()=>n});var l=s(89379),i=s(9950),a=s(30615),o=s(44414);const n=e=>{var t,s,n,d,r,c,u,h,p,m,v,g;let{selected:x,onSelect:w,content:f}=e;return(0,i.useEffect)(()=>{var e,t;w({value:"name",label:null!==(e=null===f||void 0===f||null===(t=f.table_text)||void 0===t?void 0:t.product)&&void 0!==e?e:"Product"})},[]),(0,o.jsx)(a.Ay,{styles:{control:(e,t)=>(0,l.A)((0,l.A)({},e),{},{width:window.location.pathname.includes("moderation")?"100px":"120px"})},className:"text-align-left custom-border",options:[{value:"name",label:null!==(t=null===f||void 0===f||null===(s=f.table_text)||void 0===s?void 0:s.product)&&void 0!==t?t:"Product"},{value:"productId",label:null!==(n=null===f||void 0===f||null===(d=f.table_text)||void 0===d?void 0:d.product_id)&&void 0!==n?n:"Product ID"},{value:"sku",label:null!==(r=null===f||void 0===f||null===(c=f.table_text)||void 0===c?void 0:c.sku)&&void 0!==r?r:"SKU"},{value:"productType",label:null!==(u=null===f||void 0===f||null===(h=f.table_text)||void 0===h?void 0:h.category)&&void 0!==u?u:"Category"},{value:"url",label:null!==(p=null===f||void 0===f||null===(m=f.table_text)||void 0===m?void 0:m.product_url)&&void 0!==p?p:"URL"},{value:"tags",label:null!==(v=null===f||void 0===f||null===(g=f.table_text)||void 0===g?void 0:g.tags)&&void 0!==v?v:"Tags"}],value:x,onChange:w})}},96139:(e,t,s)=>{s.r(t),s.d(t,{default:()=>O});var l=s(9950),i=s(73878),a=s(70804),o=s(80409),n=s(98361),d=s(1093),r=s(4342),c=s(52867),u=s(54810),h=s(36431),p=s(17595),m=s(75623),v=s(34483),g=s(51960),x=s(97937),w=s(82094),f=s(1480),j=s(10274),b=s(28981),_=s(80322),N=s(18633),y=s(75798),T=s(1391),S=s(94562),C=s(85608),k=s(44414);let P;class A extends l.Component{constructor(e){super(e),this.fetchAllProducts=(0,c.sg)(()=>{const{searchText:e,selectedTag:t,searchType:s}=this.state,{fetchProductList:l,modalData:i}=this.props;let a="";const o=(null===e||void 0===e?void 0:e.length)>1?e:"";var n;if(e&&(a=null!==(n=null===s||void 0===s?void 0:s.value)&&void 0!==n?n:"",!a))return P&&clearTimeout(P),void(P=setTimeout(()=>(0,c.r$)("Please select search type from dropdown"),300));this.setState({showProd:!0},()=>l(1,10,t,o,this.responceApi,null===i||void 0===i?void 0:i.referenceId,(null===i||void 0===i?void 0:i.newMedia)||(null===i||void 0===i?void 0:i.postFile),a))},400),this.setLastSearchTag=()=>{this.setState(e=>({loading:!1,productList:[...e.productList]}))},this.handleClickOutsideTagProduct=e=>{var t,s;!this.tagProductRef||null!==(t=this.tagProductRef)&&void 0!==t&&null!==(s=t.current)&&void 0!==s&&s.contains(e.target)||this.setState({showtags:!1})},this.handleClickOutside=e=>{const t=this.outsideNewRef.current;!t||null!==t&&void 0!==t&&t.contains(e.target)||this.setState({showProd:"option"==e.target.role})},this.checkTour=async()=>{var e;const t=(0,c.lL)("tourStep"),l=null===(e=(0,c.lL)("isTour"))||void 0===e||e,{default:i}=await s.e(8695).then(s.bind(s,8695)),{tour:a}=new i(this.props.navigate,!1,this.props.dispatch);l||"#search_pro_select"!=(null===t||void 0===t?void 0:t.id)?"#tag_products_0"==(null===t||void 0===t?void 0:t.id)&&((0,c.n4)("tourStep",{id:"#hotspot-section",step:8}),setTimeout(()=>{var e;return a.drive(null!==(e=null===t||void 0===t?void 0:t.step)&&void 0!==e?e:8)},400)):((0,c.n4)("tourStep",{id:"#tag_products_0",step:8}),setTimeout(()=>a.highlight({element:"#tag_products"}),400))},this.triggerAction=e=>{const{searchText:t,prodClick:s,searchType:l}=this.state;if(e&&s)this.setState({loading:!0,prodClick:!1,showProd:!0},this.fetchAllProducts);else if((null===t||void 0===t?void 0:t.length)>=1||!t){const e=!(null===t||void 0===t||!t.length||null===l||void 0===l||!l.value)||!t;this.setState({showProd:e,loading:e,productList:[]},this.fetchAllProducts)}},this.responceApi=e=>{this.setState({loading:!1,productList:(null===e||void 0===e?void 0:e.length)>0?[...e]:[]})},this.removeTag=e=>{const t=this.state.selectedTag.filter(t=>t!==e);this.setState({selectedTag:t,searchTag:"",showtags:!1,productTags:[]},this.fetchAllProducts)},this.product_tags_search=e=>{const t=e.target.value;this.setState({loadingTag:!0,showtags:(null===t||void 0===t?void 0:t.length)>0,searchTag:t},()=>this.debouncedProductTagsSearch(t))},this.productTagsSearchLogic=e=>{(0,f.Wb)(e).then(e=>{const{responseCode:t,responseData:s}=e.data;200===t&&this.setState({productTags:s,showtags:s&&s.length>0,loadingTag:!1})}).catch(e=>{console.error("Error fetching product tags:",e),this.setState({loadingTag:!1})})},this.getData_bySelected_Tag=e=>{const t=[...this.state.selectedTag,e];this.setState({selectedTag:[...new Set(t)],showtags:!1,searchTag:""},this.fetchAllProducts)},this.handleScroll=()=>{const e=this.listRef.current;if(e){e.getBoundingClientRect().bottom<=window.innerHeight&&this.setState({scrolledToBottom:!0},this.filterProductOnScrolle)}},this.addProduct=(e,t)=>{const{modalData:s,activeCarousalPost:l}=this.props;let i=null!==s&&void 0!==s&&s.postproduct&&(null===s||void 0===s?void 0:s.postproduct.length)>0?(0,c._u)(s):"45%";const a={left:"45%",top:"".concat(i)},o="left:45%;top:".concat(i,";"),n=(null===s||void 0===s?void 0:s.postproduct.length)>0?null===s||void 0===s?void 0:s.postproduct.map(e=>e.product.shopify_product_id.toString()):[];n.push(e.shopify_product_id),this.props.TAG_PRODUCT_ACTION(n,e,l||t,a,o,null===s||void 0===s?void 0:s.feedId,this.callbackMsg),this.setState({firstTime:!0}),this.setState({showProd:!1})},this.callbackMsg=e=>{const{activeCarousalPost:t,updateCarousalPost:s,carousalPostsList:l}=this.props;t&&s(t,l,e,1)},this.filterProductOnScrolle=()=>{const{currentPage:e,sentReq:t,searchText:s,selectedTag:l}=this.state,{total_pages:i,modalData:a}=this.props;e<i&&!t&&this.setState({currentPage:e+1,sentReq:!0},()=>this.props.ACTION_PRODUCT_LIST_FORTAG(e,10,l,s,this.completedPageCall,null===a||void 0===a?void 0:a.referenceId,(null===a||void 0===a?void 0:a.newMedia)||(null===a||void 0===a?void 0:a.postFile)))},this.completedPageCall=e=>this.setState(t=>({sentReq:!1,productList:[...t.productList,...e]})),this.callbackRemove=e=>{const{activeCarousalPost:t,updateCarousalPost:s,carousalPostsList:l}=this.props;t&&s(t,l,e,2)},this.removeTaggProduct=(e,t,s,l)=>{if((0,_.Yj)("contentGallery","editGallery",!0)){const{modalData:i}=this.props,a=null===i||void 0===i?void 0:i.postproduct.map(e=>e.product.shopify_product_id.toString());this.props.REMOVE_TAGGED_PRODUCT_ACTION(a,e,t,s,l,this.callbackRemove)}},this.clickToShowContact=(e,t)=>this.setState({showContactUs:e,type:t}),this.state={postproduct:[],tagedprod:[],showProd:!1,showtags:!1,searchTag:"",loadingTag:!1,productTags:[],selectedTag:[],productId:0,errorMsg:"",searchText:"",currentPage:1,loading:!1,scrolledToBottom:!1,sentReq:!1,visenzeId:null,visenzeProduct:null,firstTime:!1,productList:[],showContactUs:!1,type:"",prodClick:!0,searchType:null},this.outsideNewRef=l.createRef(),this.listRef=l.createRef(),this.tagProductRef=l.createRef(),this.debouncedProductTagsSearch=(0,c.sg)(this.productTagsSearchLogic,800)}componentDidMount(){const{modalData:e,activeCarousalPostsList:t}=this.props;window.addEventListener("scroll",this.handleScroll),window.addEventListener("click",this.handleClickOutside),window.addEventListener("click",this.handleClickOutsideTagProduct),this.setState({postproduct:t||e.postproduct})}componentWillUnmount(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("click",this.handleClickOutside),window.removeEventListener("click",this.handleClickOutsideTagProduct)}componentDidUpdate(){const{modalData:e,activeCarousalPostsList:t,activeCarousalPost:s}=this.props,{postproduct:l}=this.state;var i;s?(null===t||void 0===t?void 0:t.length)!=(null===l||void 0===l?void 0:l.length)&&this.setState({postproduct:t}):(null===e||void 0===e||null===(i=e.postproduct)||void 0===i?void 0:i.length)!=(null===l||void 0===l?void 0:l.length)&&this.setState({postproduct:e.postproduct})}render(){var e,t,s,l,i,a,o,n,d,c,h,f;const{showProd:j,selectedTag:b,productTags:T,showtags:P,searchTag:A,postproduct:I,searchType:D,errorMsg:E,searchText:L,sentReq:O,loading:R,productList:U,showContactUs:G,type:M,prodClick:B}=this.state,{modalData:H,changeHotspotStatus:z,enableHotspot:F,user:K,activeCarousalPost:W}=this.props,q=null===H||void 0===H||null===(e=H.imageList)||void 0===e?void 0:e.find(e=>e.referenceId==W);q&&(H.type=q.type);const{moderation:V,product_catalog:Y}=null!==(t=window.APP_CONTENT)&&void 0!==t?t:{};return(0,k.jsx)("div",{className:"",children:(0,k.jsxs)("div",{className:"p-4 p_tags_height",children:[5!=H.type&&3!=H.type&&1!=H.type?(0,k.jsx)(p.A.Group,{className:"mb-3",children:(0,k.jsx)(p.A.Check,{type:"switch",id:"enable_hotspot",className:"f-between",label:null!==(s=null===V||void 0===V?void 0:V.switch_hotspot)&&void 0!==s?s:"",defaultValue:F,onChange:()=>(0,_.Yj)("contentGallery","editGallery",!0)?z(W?q.hotspot:H.hotspot,W||H.referenceId):{},checked:F,reverse:!0})}):null,(0,k.jsx)(m.A,{className:"button-group form-control mb-3 p-0",children:(0,k.jsxs)(v.A,{show:!0,className:"position-relative w-100",align:"end",children:[(0,k.jsx)(v.A.Toggle,{variant:"outline-secondary",className:"arrow_disabled p-0 border-0 mb-0 flex-grow-1 w-100 bg-transparent",children:(0,k.jsxs)(m.A,{children:[(0,k.jsx)(S.A,{selected:D,onSelect:e=>this.setState({searchType:e},()=>{(null===L||void 0===L?void 0:L.length)>0&&this.triggerAction()}),content:Y}),(0,k.jsx)(p.A.Control,{ref:this.outsideNewRef,id:"search_pro_",className:"".concat(E?"is-invalid":""," rounded rounded-0 ps-0 border-0 ms-2"),placeholder:"".concat(null===V||void 0===V?void 0:V.ph_search_products," ").concat(null!==(l=null===D||void 0===D?void 0:D.label)&&void 0!==l?l:""),onChange:e=>this.setState({searchText:e.target.value},this.triggerAction),value:L,autoComplete:"off",onClick:()=>this.setState({currentPage:1},()=>{B?this.triggerAction(!0):!j&&U.length>0&&this.setState({showProd:!0})})}),(0,k.jsx)(m.A.Text,{className:"border-0",children:(0,k.jsx)(u.gc,{type:"solid",icon:"magnifying-glass m-0"})})]})}),E?(0,k.jsx)("span",{className:"invalid-feedback",children:E}):null,R?(0,k.jsx)("div",{className:"w-100 dropdown-menu show dropdown-menu-end",style:{minHeight:"320px"},children:(0,k.jsx)(N.a,{bg:"white"})}):j&&U&&(null===U||void 0===U?void 0:U.length)>0?(0,k.jsxs)(v.A.Menu,{show:!(!j||!U),className:"w-100",children:[(0,k.jsx)("div",{className:"w-100",id:"tag_products",style:{overflowX:"auto",maxHeight:320},ref:this.listRef,onScroll:this.handleScroll,children:U.map((e,t)=>{var s,l,i,a;const o=null!==e&&void 0!==e&&null!==(s=e.product_image)&&void 0!==s&&s.includes("?")?"".concat(C.sK).concat(null===e||void 0===e?void 0:e.product_image,"&w=100"):"".concat(C.sK).concat(null===e||void 0===e?void 0:e.product_image,"?w=100");return(0,k.jsxs)(v.A.Item,{id:"tag_products_".concat(t),"data-item":"product",onClick:()=>(0,_.Yj)("contentGallery","editGallery",!0)?this.addProduct(e,H.referenceId):{},className:"d-flex",children:[(0,k.jsx)("div",{className:"w-64px d-flex flex-shrink-0 me-2",children:(0,k.jsx)(w.A,{mediaClass:"position-relative overflow-hidden w-100 border rounded-1",size:100,height:64,width:64,url:o,alt:"",isCover:!0})}),(0,k.jsxs)("div",{className:"d-flex align-items-start flex-column overflow-hidden w-100",children:[(0,k.jsx)("p",{className:"fs-9 fw-medium mb-1 text-wrap ",children:e.product_title}),(0,k.jsxs)("span",{className:"d-flex align-items-center tb_pro_price mb-1",children:[e.product_price&&e.product_price>0?(0,k.jsxs)("span",{className:"fs-8 fw-bold",children:[e.price_currency_symbol,e.product_discount>0?e.product_discount:e.product_price]}):"",e.product_price&&e.product_discount>0&&e.product_discount<e.product_price?(0,k.jsxs)("span",{className:"fs-8 ms-2 text-muted",style:{textDecoration:"line-through"},children:[e.price_currency_symbol,e.product_price]}):null]}),e.recomended?(0,k.jsxs)("div",{className:"f-between mt-2 w-100",children:[(0,k.jsxs)(r.A,{bg:"primary",className:"rounded-pill bg-transparent text-primary border border-primary",children:[(0,k.jsx)(u.gc,{icon:"sparkles",iconClass:"me-1"})," ",null!==(l=null===V||void 0===V?void 0:V.filter_ai)&&void 0!==l?l:""]}),(0,k.jsx)("div",{className:"position-relative",style:{marginRight:-5},children:(0,k.jsx)(g.A,{src:(0,u.pc)("media/svg/trusense.svg"),height:20,width:100,alt:"trueSense",fluid:!0})})]}):(0,k.jsxs)("p",{className:"fs-10 text-muted mb-0",children:[e.shopify_product_type?(0,k.jsxs)("div",{className:"d-inline-block me-2",children:[" ",null!==(i=null===V||void 0===V?void 0:V.label_category)&&void 0!==i?i:"",":  ",e.shopify_product_type]}):"",e.tags?(0,k.jsxs)("div",{className:"d-inline-block",children:[" ",null!==(a=null===V||void 0===V?void 0:V.label_region)&&void 0!==a?a:""," :  ",e.tags]}):""]})]})]},t)})}),(0,k.jsx)("hr",{}),(0,k.jsxs)(v.A.Item,{className:"f-center",id:"add_product",href:"/content/products",children:[(0,k.jsx)(u.gc,{type:"solid",icon:"plus",iconClass:"me-1"}),null!==(i=null===V||void 0===V?void 0:V.btn_upload_products)&&void 0!==i?i:""]})]}):(0,k.jsx)(k.Fragment,{})]})}),(0,k.jsxs)("div",{className:"position-relative",children:[(0,k.jsx)(p.A.Group,{className:"mb-3",children:(0,k.jsx)(p.A.Control,{id:"search_pro_",className:E?"is-invalid":"",placeholder:null!==(a=null===V||void 0===V?void 0:V.ph_search_tags)&&void 0!==a?a:"",onChange:this.product_tags_search,value:A,autoComplete:"off"})}),P&&T?(0,k.jsx)(v.A.Menu,{show:!0,className:"w-100",children:T.map((e,t)=>(0,k.jsx)(v.A.Item,{className:"f-center overflow-hidden",onClick:()=>this.getData_bySelected_Tag(e),children:(0,k.jsx)("p",{className:"fs-10 text-muted text-ellipsis mb-0",children:e})},"prd_tags_".concat(t)))}):""]}),(0,k.jsx)("div",{className:"mb-3 mb-xl-4",children:(0,k.jsx)("div",{className:"tags-group d-flex align-items-center flex-wrap overflow-hidden w-100",children:b&&b.length>0?b.map((e,t)=>(0,k.jsxs)(r.A,{className:"me-1 mb-1 px-3 py-2 f-center bg-secondary overflow-hidden",children:[(0,k.jsx)("span",{className:" text-break text-wrap text-start",children:e}),(0,k.jsx)(x.A,{variant:"link",size:"sm",className:"p-0 ms-1 text-gray-800",onClick:()=>this.removeTag(e),children:(0,k.jsx)(u.gc,{type:"solid",icon:"xmark"})})]},e.toString())):""})}),I&&(null===I||void 0===I?void 0:I.length)>0?I.map((e,t)=>{var s,l;return(0,k.jsxs)("div",{className:"p-2 box-shadow mb-2 rounded-2 d-flex align-items-center position-relative border",children:[(0,k.jsx)("span",{className:"position-absolute start-0 translate-middle h-18px w-18px rounded-circle f-center bg-dark text-gray-100 top-50 fs-10 fw-medium",style:{zIndex:1},children:t+1}),(0,k.jsxs)("div",{className:"d-flex flex-grow-1 align-items-center overflow-hidden",style:{maxWidth:"calc(100% - 32px)"},children:[(0,k.jsx)("div",{className:"w-44px d-flex flex-shrink-0 me-2",children:(0,k.jsx)(w.A,{mediaClass:"position-relative overflow-hidden w-100 border rounded-1",size:100,height:44,width:44,url:null===e||void 0===e||null===(s=e.product)||void 0===s?void 0:s.product_image,alt:"",isCover:!0})}),(0,k.jsxs)("div",{className:"d-flex align-items-start flex-column overflow-hidden w-100",children:[(0,k.jsx)("p",{className:"fs-9 fw-medium mb-1 text-wrap text-break",children:(null===e||void 0===e||null===(l=e.product)||void 0===l?void 0:l.product_title)||""}),(0,k.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[0!=e.product.product_discount&&e.product.product_discount!=e.product.product_price?(0,k.jsxs)("span",{className:"fs-8 fw-bold me-2",children:[e.product.discount_currency_symbol,Math.trunc(100*e.product.product_discount)/100]}):(0,k.jsxs)("span",{className:"fs-8 fw-bold me-2",children:[e.product.discount_currency_symbol,Math.trunc(100*e.product.product_price)/100]}),e.product.product_discount&&e.product.product_discount>0?(0,k.jsxs)("span",{className:"fs-8 text-muted",style:{textDecoration:"line-through"},children:[e.product.discount_currency_symbol,e.product.product_discount>0?e.product.product_price:""]}):""]})]})]}),(0,k.jsx)(x.A,{variant:"icon",size:"sm",className:"btn-active-danger","aria-label":"delete",onClick:()=>this.removeTaggProduct(e.product.product_sku,e.product.id,e.post_id,e.id),children:(0,k.jsx)(u.gc,{type:"solid",icon:"trash-can"})})]},t)}):(0,k.jsxs)("div",{className:"f-center py-3 text-gray-300 mb-10",children:[(0,k.jsx)("span",{className:"h-40px w-40px rounded-circle me-2 border f-center fs-4",children:(0,k.jsx)(u.gc,{type:"light",icon:"bag-shopping"})}),null!==(o=null===V||void 0===V?void 0:V.empty_products)&&void 0!==o?o:""]}),[142738,142737].includes(K.id)?null:(0,k.jsxs)("div",{className:"d-flex align-items-center badge-light-primary px-3 py-4 rounded-2 mt-2",children:[(0,k.jsxs)("p",{className:"fs-7 text-gray-800 pe-3 mb-0",children:[null!==(n=null===V||void 0===V?void 0:V.ai_banner)&&void 0!==n?n:"",(0,k.jsx)(u.gc,{icon:"sparkle",iconClass:"ms-1 text-warning"})]}),(0,k.jsx)(x.A,{className:"text-nowrap",onClick:()=>this.clickToShowContact(!0,"Tag Product Talk to sales"),children:null!==(d=null===(c=window)||void 0===c||null===(h=c.APP_CONTENT)||void 0===h||null===(f=h.common)||void 0===f?void 0:f.talk_to_sales)&&void 0!==d?d:""})]}),(0,k.jsx)(y.A,{type:M,show:G,onCloseModel:()=>this.clickToShowContact(!1,"")}),(0,k.jsx)("div",{})]})})}}const I=(0,i.Ng)(e=>{var t,s,l,i,a,o,n;return{total_pages:null===(t=e.products)||void 0===t?void 0:t.total_pages,searchProducts:null===(s=e.products)||void 0===s?void 0:s.searchProducts,loadingTagProduct:null===(l=e.products)||void 0===l?void 0:l.loadingTagProduct,moderation:e.moderation,ctaData:null===(i=e.ctaData)||void 0===i?void 0:i.data,user:null===(a=e.authorized)||void 0===a||null===(o=a.userData)||void 0===o||null===(n=o.user_data)||void 0===n?void 0:n.user}},e=>({ACTION_PRODUCT_LIST_FORTAG:(t,s,l,i,a,o,n)=>e((0,f.O0)(t,s,l,i,a,o,n)),TAG_PRODUCT_ACTION:(t,s,l,i,a,o,n)=>e((0,j.gw)(t,s,l,i,a,o,n)),REMOVE_TAGGED_PRODUCT_ACTION:(t,s,l,i,a,o)=>e((0,j.PB)(t,s,l,i,a,o)),getUserInfo_afterChanges:()=>e((0,b.AW)()),fetchProductList:(t,s,l,i,a,o,n,d)=>e((0,f.EU)(t,s,l,i,a,o,n,d))}))((0,T.A)(A));var D=s(43523),E=s(66345);class L extends l.Component{constructor(e){super(e),this.onClickToRemoveTag=e=>t=>{let{tagString:s}=this.state;s.splice(e,1),this.setState({tagString:s,changesStatus:!0})},this.addTagButtonValue=()=>{this.setState({addTagButton:!1})},this.setInitialState=()=>{const{modalData:e}=this.props;e&&Object.keys(e).length>0&&(e.tags&&String(e.tags).length>0?this.setState({tagString:String(e.tags).split(","),content:e.postcontent}):this.setState({tagString:[],content:e.postcontent})),this.setState({textAreaHeight:20*(this.state.content.length/35).toFixed()})},this.handleOutsideClick=e=>{this.editorEnable&&this.editorEnable.current&&!this.editorEnable.current.contains(e.target)&&this.editorEnableButton&&!this.editorEnableButton.current.contains(e.target)&&this.editorEnableButton&&null!==!this.editorEnableButton.current.contains(e.target)?this.setState({descriptionEditable:!1}):this.editorEnable&&this.editorEnable.current&&!this.editorEnable.current.contains(e.target)&&null!==this.editorEnable.current.contains(e.target)&&this.setState({descriptionEditable:!0})},this.onClickNewAddTag=e=>{const{newTag:t,tagString:s}=this.state,{modalData:l}=this.props;"Enter"!==e.key&&13!==e.keyCode||t&&String(t).length>=3&&(s.push(t),this.setState({tagString:s,newTag:"",selectedOption:null,changesStatus:!0,addTagButton:!0}))},this.addNewTag=e=>this.setState({newTag:e.target.value,changesStatus:!0}),this.onClickToSave=e=>{const{tagString:t}=this.state,{modalData:s}=this.props;t&&t.length},this.setNewTags=e=>{e&&e.value?this.setState({newTag:e.value,selectedOption:e}):this.setState({newTag:"",selectedOption:null})},this.onChangeContent=e=>{this.setState({content:e.target.value,changesStatus:!0})},this.onChangeTag=e=>{this.setState({newTag:e.target.value})},this.onSaveChanges=e=>{const{modalData:t}=this.props,{tagString:s,content:l}=this.state;String(t.collection),String(t.collection),String(t.id),t.postFile,s.join(",")},this.onFilterWithTag=e=>t=>{const{modalCallback:s,tagsFilter:l}=this.props;l(e),setTimeout(()=>s(!1),200)},this.contentHeight=e=>{var t=e.length/35,s=Math.round(t);return t>=s?20*(s+1)+20:20*s+20},this.state={descriptionEditable:!1,addTagButton:!0,tagString:[],newTag:"",listTags:[],selectedOption:null,content:"",changesStatus:!1},this.editorEnable=l.createRef(),this.editorEnableButton=l.createRef()}componentWillMount(){const{tagList:e}=this.props;if(e&&e.length>0){var t=[];e.map(e=>{t.push({value:e,label:e})}),this.setState({listTags:t})}}descriptionToggle(){this.setState({descriptionEditable:!0})}componentDidMount(){document.addEventListener("click",this.handleOutsideClick),this.setInitialState()}componentDidUpdate(e){e.modalData!==this.props.modalData&&this.setInitialState()}render(){var e,t,s,l,i,p,m,v,g,x,w,f,j,b,_,N,y,T,S,C,P,A,L,O,R,U,G,M,B,H,z,F,K,W;const{descriptionEditable:q,addTagButton:V,tagString:Y,content:$,changesStatus:X,newTag:J}=this.state,{modalData:Q,networkData:Z,collections:ee,isTrash:te,changeHotspotStatus:se,enableHotspot:le,activeCarousalPost:ie,activeCarousalPostsList:ae,carousalPostsList:oe,updateCarousalPost:ne,isShoppable:de}=this.props,re=18==Q.networkId?2:Q.networkId,ce=(Z&&Z.length>0&&Z.filter(e=>e.id==re),null!==(e=window.APP_CONTENT)&&void 0!==e?e:{});return(0,k.jsxs)(o.A.Container,{id:"modal_aside_",defaultActiveKey:de?"tag_product":"details",children:[(0,k.jsxs)(n.A,{variant:"underline",className:"border-bottom",children:[de?(0,k.jsx)(n.A.Item,{children:(0,k.jsxs)(n.A.Link,{className:"ms-3 py-3",eventKey:"tag_product",children:[(0,k.jsx)(u.gc,{type:"solid",icon:"bag-shopping",iconClass:"me-1 fs-6"}),"Tag products"]})}):null,(0,k.jsx)(n.A.Item,{children:(0,k.jsxs)(n.A.Link,{className:"ms-3 py-3",eventKey:"details",children:[(0,k.jsx)(u.gc,{type:"solid",icon:"image",iconClass:"me-1 fs-6"}),"Details"]})})]}),(0,k.jsxs)(o.A.Content,{className:"m_sideCont_scroll_",children:[(0,k.jsx)(o.A.Pane,{eventKey:"tag_product",children:(0,k.jsx)(I,{updateCarousalPost:ne,carousalPostsList:oe,activeCarousalPostsList:ae,activeCarousalPost:ie,modalData:Q,changeHotspotStatus:se,enableHotspot:le})}),(0,k.jsx)(o.A.Pane,{eventKey:"details",children:(0,k.jsxs)("div",{className:"position-relative",children:[(0,k.jsx)("div",{className:"px-4 mt-3",children:(0,k.jsx)(d.A,{className:"table-borderless mb-0",children:(0,k.jsxs)("tbody",{children:[(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,k.jsx)("span",{className:"text-muted",children:null!==(t=null===ce||void 0===ce||null===(s=ce.moderation)||void 0===s?void 0:s.field_author)&&void 0!==t?t:""})}),(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,k.jsxs)("div",{className:"d-flex align-items-center mr-2 cursor-pointer",onClick:Q.link?e=>window.open(Q.link,"_blank"):null,children:[(0,k.jsx)(h.A,{className:"symbol symbol-34 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:38,symbolClass:"symbol-label fs-8",name:Q.postname,profileUrl:(0,c.G9)(Q.picture),networkId:Q.networkId?Q.networkId:0}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:" mb-0 text-break fw-bold",children:Q.postname}),(0,k.jsxs)("small",{className:"mb-0 text-muted text-break",children:["@",null===Q||void 0===Q||null===(l=Q.username)||void 0===l?void 0:l.replace(/\s+/g,"")]})]})]})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,k.jsx)("span",{className:"text-muted",children:null!==(i=null===ce||void 0===ce||null===(p=ce.moderation)||void 0===p?void 0:p.field_network)&&void 0!==i?i:""})}),(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,k.jsxs)("div",{className:"d-flex align-items-center",children:[(0,k.jsx)("span",{className:"me-2 d-flex",children:0!=Q.networkId?(0,k.jsx)("img",{className:"img-fluid",src:(0,u.pc)("media/icons/social-icons/".concat((0,c.EC)(Q.networkId),".svg")),height:18,width:18,alt:Q.networkId?Q.networkId:0}):""}),(0,k.jsx)("span",{className:"",children:0==Q.networkId?"":(0,c.Oi)(Q.networkId)})]})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,k.jsx)("span",{className:"text-muted",children:null!==(m=null===ce||void 0===ce||null===(v=ce.moderation)||void 0===v?void 0:v.field_feed)&&void 0!==m?m:""})}),(0,k.jsxs)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:[Q.feedname&&32==Q.networkId?(0,k.jsx)("img",{className:"img-fluid me-2",src:(0,u.pc)("media/icons/social-icons/".concat((0,c.EC)(32),".svg")),height:18,width:18,alt:"Chrome"}):null,(0,k.jsx)("span",{className:" text-break",children:Q.feedname?(0,a.Ay)(Q.feedname):0==Q.networkId?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("img",{className:"img-fluid",src:(0,u.pc)("media/icons/social-icons/".concat((0,c.EC)(0),".svg")),height:18,width:18,alt:0})," ",null!==(g=null===ce||void 0===ce||null===(x=ce.moderation)||void 0===x?void 0:x.manual_upload)&&void 0!==g?g:""," "]}):"--"})]})]}),Q.ugcstatus?(0,k.jsx)(k.Fragment,{children:2==Q.ugcstatus?(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,k.jsx)("span",{className:"text-muted",children:null!==(w=null===ce||void 0===ce||null===(f=ce.moderation)||void 0===f?void 0:f.field_rights)&&void 0!==w?w:""})}),(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,k.jsxs)("div",{className:"d-flex align-items-center flex-wrap text-success",children:[(0,k.jsx)("span",{className:"fs-6 me-1",children:(0,k.jsx)(u.gc,{type:"solid",icon:"user-check"})}),(0,k.jsx)("span",{className:"fw-medium",children:null!==(j=null===ce||void 0===ce||null===(b=ce.moderation)||void 0===b?void 0:b.rights_approved)&&void 0!==j?j:""})]})})]}):1==Q.ugcstatus?(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,k.jsx)("span",{className:"text-muted",children:null!==(_=null===ce||void 0===ce||null===(N=ce.moderation)||void 0===N?void 0:N.field_rights)&&void 0!==_?_:""})}),(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,k.jsxs)("div",{className:"d-flex align-items-center flex-wrap text-warning",children:[(0,k.jsx)("span",{className:"fs-6 me-1",children:(0,k.jsx)(u.gc,{type:"solid",icon:"user-clock"})}),(0,k.jsx)("span",{className:"fw-medium",children:null!==(y=null===ce||void 0===ce||null===(T=ce.moderation)||void 0===T?void 0:T.rights_pending)&&void 0!==y?y:""})]})})]}):3==Q.ugcstatus?(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,k.jsx)("span",{className:"text-muted",children:null!==(S=null===ce||void 0===ce||null===(C=ce.moderation)||void 0===C?void 0:C.field_rights)&&void 0!==S?S:""})}),(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,k.jsxs)("div",{className:"d-flex align-items-center flex-wrap text-danger",children:[(0,k.jsx)("span",{className:"fs-6 me-1",children:(0,k.jsx)(u.gc,{type:"solid",icon:"user-xmark"})}),(0,k.jsx)("span",{className:"fw-medium",children:null!==(P=null===ce||void 0===ce||null===(A=ce.moderation)||void 0===A?void 0:A.rights_rejected)&&void 0!==P?P:""})]})})]}):null}):null,parseInt(Q.sentiment)>0?(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,k.jsx)("span",{className:"text-muted",children:null!==(L=null===ce||void 0===ce||null===(O=ce.moderation)||void 0===O?void 0:O.filter_sentiment)&&void 0!==L?L:""})}),(0,k.jsxs)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:[" ",(0,k.jsx)("span",{className:" text-break",children:(0,k.jsxs)("span",{className:"d-flex fs-8  text-break",children:[(0,k.jsx)("div",{className:"h-16px w-16px me-1 d-flex",children:(0,k.jsx)("img",{className:"img-fluid",src:(0,u.pc)("media/icons/emoji/emoji".concat((0,c.Hp)(Q.sentiment).item,".svg")),height:16,width:16,alt:""})}),(0,c.Hp)(Q.sentiment).label]})})]})]}):null,!Q.recommendation||2!=Q.type&&4!=Q.type?null:(0,k.jsxs)("tr",{children:[(0,k.jsxs)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:[(0,k.jsx)("p",{className:"text-muted mb-1 text-nowrap me-2",children:null!==(R=null===ce||void 0===ce||null===(U=ce.moderation)||void 0===U?void 0:U.filter_ai)&&void 0!==R?R:""}),(0,k.jsxs)("span",{style:{verticalAlign:"middle",fontStyle:"italic",fontSize:"11px",color:"#999",fontWeight:"400"},children:[null!==(G=null===ce||void 0===ce||null===(M=ce.common)||void 0===M?void 0:M.powered_by)&&void 0!==G?G:"",(0,k.jsx)("img",{src:"".concat(E.P_W,"media/icons/svg-icons/true-sense.svg"),alt:"TruSense",height:16,width:16,className:"ms-1"}),(0,k.jsx)("span",{style:{verticalAlign:"middle",fontSize:"12px",fontStyle:"normal",color:"var(--bs-gray-900)"},children:" TruSense"})]})]}),(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,k.jsxs)("div",{className:"d-flex align-items-start",children:[(0,k.jsx)("div",{className:"h-12px w-12px rounded-circle d-flex flex-shrink-0 mt-1 ".concat(1==Q.recommendation.type?"bg-success":2==Q.recommendation.type?"bg-warning":3==Q.recommendation.type?"bg-danger":null)}),(0,k.jsxs)("span",{className:" text-break ps-1",children:[Q.recommendation.label," (",Q.recommendation.score,"%)"]})]})})]}),Q.rating>0&&1!=Q.type?(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,k.jsx)("span",{className:"text-muted",children:null!==(B=null===ce||void 0===ce||null===(H=ce.moderation)||void 0===H?void 0:H.field_rating)&&void 0!==B?B:""})}),(0,k.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,k.jsx)("div",{className:"d-flex justify-content-start",children:(0,k.jsx)(D.A,{className:"fs-6",iconClass:"me-1",rating:Q.rating})})})]}):null]})})}),Y&&Y.length>0?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h3",{className:"border-bottom p-4 fs-8",children:(0,k.jsx)("span",{className:"fw-medium",children:null!==(z=null===ce||void 0===ce||null===(F=ce.moderation)||void 0===F?void 0:F.btn_tags)&&void 0!==z?z:""})}),(0,k.jsx)("div",{className:"tags-group d-flex align-items-center flex-wrap mb-2",children:(0,k.jsx)("div",{className:"px-4 mt-3",children:Y.map((e,t)=>e&&String(e).length>0?(0,k.jsx)(r.A,{bg:"",className:"".concat(99999==t?"border-gradient":"border"),children:(0,k.jsx)("span",{className:"",children:e})},t):null)})})]}):null,(0,k.jsx)("h3",{className:"border-bottom p-4 fs-8",children:(0,k.jsx)("span",{className:"fw-medium",children:null!==(K=null===ce||void 0===ce||null===(W=ce.common)||void 0===W?void 0:W.description)&&void 0!==K?K:""})}),(0,k.jsx)("div",{className:"px-4 mb-3",children:(0,k.jsx)("div",{className:"d-flex flex-grow-1 pe-2",children:(0,k.jsx)("p",{style:{whiteSpace:"pre-line",wordBreak:"break-word"},children:(0,a.Ay)((0,c.K$)($||""))})})})]})})]})]})}}const O=(0,i.Ng)(e=>{var t,s,l,i,a,o;return{networkData:null===e||void 0===e||null===(t=e.networks)||void 0===t?void 0:t.networkData,tagList:null===e||void 0===e||null===(s=e.tags)||void 0===s?void 0:s.tagList,isShoppable:null===(l=e.authorized)||void 0===l||null===(i=l.userData)||void 0===i||null===(a=i.user_data)||void 0===a||null===(o=a.UserRule)||void 0===o?void 0:o.shoppableStatus}},e=>({}))(L)}}]);