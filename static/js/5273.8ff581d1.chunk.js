"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[5273],{55273:(e,l,s)=>{s.r(l),s.d(l,{default:()=>g});var o=s(9950),a=s(34483),i=s(8966),r=s(97937),t=s(88053),n=s(52867),d=s(42074),c=s(66345),m=s(28981),u=s(73878),h=s(80322),v=s(54480),p=s(1391),x=s(44414);const b=e=>{let{progress:l,children:s}=e;return(0,x.jsxs)("div",{className:"progress-wrapper",children:[(0,x.jsxs)("div",{className:"progress-circle",children:[s,(0,x.jsxs)("svg",{className:"progress-ring",viewBox:"0 0 120 120",children:[(0,x.jsx)("circle",{className:"progress-bg",cx:"60",cy:"60",r:"54"}),(0,x.jsx)("circle",{className:"progress-bar",cx:"60",cy:"60",r:"54",style:{strokeDashoffset:339.292-l/100*339.292}})]})]}),(0,x.jsxs)("div",{className:"progress-label",children:[l,"%"]})]})};class f extends o.Component{constructor(e){super(e),this.logOutAccount=e=>{e?this.setState({loading:!0}):this.setState({logOutSpinner:!0}),(0,m.y4)().then((l=>{(0,n.Q$)("__TagshopLogin","tagshop.ai"),localStorage.clear(),e?window.location.href=`${c.C1b}/web-admin/users`:window.location.reload()})).catch((e=>{}))},this.onEmailCopy=e=>l=>(0,n.x_)(e),this.handleToggle=()=>{this.setState((e=>({isOpen:!e.isOpen})))},this.handleOutsideClick=e=>{this.dropdownRef.current&&!this.dropdownRef.current.contains(e.target)&&this.setState({isOpen:!1})},this.collaboratorSwitcher=(e,l)=>{var s;const{setUserToken:o,setAuthentication:a,authorized:i}=this.props;if((null===i||void 0===i||null===(s=i.userData)||void 0===s?void 0:s.user_data).collaborator.activeAccount!=l){const l=(0,n.HA)();(0,h.pY)(e).then((e=>{localStorage.clear();var{responseData:s}=e.data;localStorage.setItem("emailId",s.user.emailId),localStorage.setItem("token",s.token),o(s.token),a(s),(0,n._q)(l,"success","Account switched successfully"),window.location.href=`${c.btP}home`})).catch((e=>{(0,n._q)(l,"error","Some error occured, please try again later.")}))}else(0,n.r$)("Already logged in account.")},this.state={logOutSpinner:!1,isOpen:!1,loading:!1},this.dropdownRef=o.createRef()}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick)}render(){var e,l,s,o,c;const{authorized:m,navigate:u}=this.props,{logOutSpinner:v,show:p,loading:f}=this.state,g=null===m||void 0===m||null===(e=m.userData)||void 0===e?void 0:e.user_data.user,y=null===m||void 0===m||null===(l=m.userData)||void 0===l?void 0:l.user_data,w=null===g||void 0===g?void 0:g.picture;return(0,x.jsxs)(a.A,{className:"f-center user_profile_ ms-lg-1 h-100",align:"end",show:this.state.isOpen,ref:this.dropdownRef,children:[(0,x.jsx)("span",{className:"h-24px border-start d-none d-lg-flex"}),(0,x.jsx)(a.A.Toggle,{variant:"link",id:"user_profile_",className:"btn author_profile p-0 border-0 text-decoration-none d-block overflow-hidden arrow_disabled ms-2",onClick:this.handleToggle,children:(0,x.jsx)(b,{progress:null===y||void 0===y||null===(s=y.user)||void 0===s?void 0:s.profileProgress,children:(0,x.jsx)(t.A,{className:"symbol symbol-34 rounded-circle overflow-hidden",imageSize:34,symbolClass:"symbol-label rounded-circle bg-primary fs-6",name:null===g||void 0===g?void 0:g.name,profileUrl:w,networkId:0})})}),(0,x.jsxs)(a.A.Menu,{className:"p-0",show:p,children:[(0,x.jsx)("div",{className:"f-center flex-column w-100 p-3 border-bottom custom-notifiction",children:(0,x.jsxs)("div",{className:"f-center flex-column w-100",children:[(0,x.jsx)(d.N_,{to:"/profile",className:"mb-2 p-1 rounded-circle",title:"Profile",children:(0,x.jsx)(b,{progress:null===y||void 0===y||null===(o=y.user)||void 0===o?void 0:o.profileProgress,children:(0,x.jsx)(t.A,{className:"symbol symbol-80 rounded-circle flex-shrink-0 overflow-hidden",imageSize:80,symbolClass:"symbol-label fw-bold text-uppercase display-2 bg-primary",name:null===g||void 0===g?void 0:g.name,profileUrl:w,networkId:0})})}),(0,x.jsxs)("div",{className:"f-center flex-column w-100",children:[(0,x.jsx)("p",{className:" mb-0",children:(0,x.jsx)(d.N_,{to:"/profile",className:"fs-6 fw-bold text-break",title:"Profile",children:null===g||void 0===g?void 0:g.name})}),(0,x.jsx)("span",{className:"mb-0 text-gray-700 text-break fs-8 cursor-pointer mb-3",id:"headerProfileEmail",onClick:this.onEmailCopy("headerProfileEmail"),children:null===g||void 0===g?void 0:g.emailId}),(0,x.jsx)(d.N_,{to:"/profile",className:"btn btn-secondary rounded-pill w-100",style:{maxWidth:230},onClick:this.handleToggle,title:"Profile",children:"My profile"})]}),null!==y&&void 0!==y&&y.collaborator&&Object.keys(y.collaborator).length>0?(0,x.jsx)(i.A,{className:"w-100 mt-3 bg-body",defaultActiveKey:1==(null===y||void 0===y?void 0:y.collaborator.workplaces.length)&&null==(null===y||void 0===y?void 0:y.UserPlan.activatedAt)?0:"",children:(0,x.jsxs)(i.A.Item,{eventKey:0,className:"overflow-hidden",style:{borderRadius:30},children:[(0,x.jsx)(i.A.Header,{children:(null!=(null===y||void 0===y?void 0:y.UserPlan.activatedAt)||(null===y||void 0===y?void 0:y.collaborator.workplaces.length)>1?"Switch":"Collaborator")+" Account"}),(0,x.jsxs)(i.A.Body,{className:"p-3",children:[y.collaborator.workplaces.map((e=>{var l,s;return(0,x.jsxs)(r.A,{variant:y.collaborator.activeAccount==(null===e||void 0===e?void 0:e.parent)?"light":"light-outline",size:"sm",className:"p-2 border-0 d-flex align-items-center w-100 mb-1 rounded-pill",onClick:()=>null!=(null===y||void 0===y?void 0:y.UserPlan.activatedAt)||(null===y||void 0===y?void 0:y.collaborator.workplaces.length)>1?this.collaboratorSwitcher(null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.parent):{},children:[(0,x.jsx)(t.A,{className:"symbol symbol-34 rounded-circle flex-shrink-0 overflow-hidden me-2",imageSize:34,symbolClass:"symbol-label fw-bold text-uppercase fs-6 bg-warning",name:"Shlok Bajoria",profileUrl:null===(l=e.UserAdmin)||void 0===l?void 0:l.picture,networkId:0}),(0,x.jsxs)("div",{className:"overflow-hidden w-100 text-start",style:{maxWidth:210},children:[(0,x.jsx)("p",{className:"mb-0 w-100 fw-bold text-ellipsis fs-9",children:null===(s=e.UserAdmin)||void 0===s?void 0:s.name}),(0,x.jsxs)("div",{className:"f-between",children:[(0,x.jsx)("span",{className:"text-gray-600",children:1==(null===e||void 0===e?void 0:e.role)?"Admin":"Manager"}),y.collaborator.activeAccount==(null===e||void 0===e?void 0:e.parent)?(0,x.jsx)("i",{className:"text-gray-500",children:"Current"}):null]})]})]})})),null!=(null===y||void 0===y?void 0:y.UserPlan.activatedAt)?(0,x.jsxs)(r.A,{variant:0==y.collaborator.activeAccount?"light":"light-outline",size:"sm",className:"p-2 border-0 d-flex align-items-center w-100 mb-1 rounded-pill",onClick:()=>this.collaboratorSwitcher(0,0),children:[(0,x.jsx)(t.A,{className:"symbol symbol-34 rounded-circle flex-shrink-0 overflow-hidden me-2",imageSize:34,symbolClass:"symbol-label fw-bold text-uppercase fs-6 bg-primary",name:g.name,profileUrl:g.picture,networkId:0}),(0,x.jsx)("div",{className:"overflow-hidden w-100 text-start",style:{maxWidth:210},children:(0,x.jsxs)("div",{className:"f-between",children:[(0,x.jsx)("p",{className:"mb-0 w-100 fw-bold text-ellipsis fs-9",children:"My account"}),0==y.collaborator.activeAccount?(0,x.jsx)("i",{className:"text-gray-500",children:"Current"}):null]})})]}):null]})]})}):null]})}),(0,x.jsxs)("div",{className:"px-5 mb-3",children:[JSON.parse(localStorage.getItem("isAdmin"))?(0,x.jsxs)(a.A.Item,{eventKey:"1",className:"navi-item px-0 py-2 py-xxl-3 border-bottom dropdown-item rounded-0 "+(f?"disabled":""),onClick:()=>this.logOutAccount(!0),children:[(0,x.jsx)("div",{className:"symbol symbol-36 me-3",children:(0,x.jsx)("div",{className:"symbol-label text-warning",children:(0,x.jsx)("i",{className:"fa-duotone me-0 fa-solid fa-user-gear"})})}),(0,x.jsx)("div",{className:"navi-text",children:(0,x.jsx)("div",{className:"fs-8 fw-semibold text-warning "+(f?"spinner spinner-gray":""),children:"Back To Admin"})})]}):null,!y||""!=y.collaborator&&0!=(null===(c=y.collaborator)||void 0===c?void 0:c.activeAccount)?null:(0,x.jsxs)(d.N_,{eventKey:"2",className:"navi-item px-0 py-2 py-xxl-3 border-bottom dropdown-item rounded-0 dropdown-item",to:"/transactions",onClick:this.handleToggle,title:"Account",children:[(0,x.jsx)("div",{className:"symbol symbol-36 me-3",children:(0,x.jsx)("div",{className:"symbol-label",children:(0,x.jsx)("i",{className:"fa-duotone me-0 fa-solid fa-user-gear"})})}),(0,x.jsxs)("div",{className:"navi-text",children:[(0,x.jsx)("div",{className:"fs-8 fw-semibold mb-0",children:"My account"}),(0,x.jsx)("div",{className:"text-gray-700 fs-9",children:"Account information and plan details"})]})]}),(0,x.jsxs)("button",{eventKey:"3",className:`navi-item px-0 py-2 py-xxl-3 ${localStorage.getItem("shopifyLogin")?"":"border-bottom"} dropdown-item rounded-0 dropdown-item`,onClick:()=>(0,h.Yj)("networkManager","manageAccount")?this.setState({isOpen:!1},(()=>u("/social-account"))):{},children:[(0,x.jsx)("div",{className:"symbol symbol-36 me-3",children:(0,x.jsx)("div",{className:"symbol-label",children:(0,x.jsx)("i",{className:"fa-duotone me-0 fa-solid fa-users-gear"})})}),(0,x.jsxs)("div",{className:"navi-text",children:[(0,x.jsx)("div",{className:"fs-8 fw-semibold mb-0",children:"Social accounts"}),(0,x.jsx)("div",{className:"text-gray-700 fs-9",children:"Account information and plan details"})]})]}),(0,n.t9)()?"":(0,x.jsxs)(a.A.Item,{eventKey:"4",onClick:()=>this.logOutAccount(!1),className:"navi-item px-0 py-2 py-xxl-3 dropdown-item rounded-0 "+(v?"disabled":""),children:[(0,x.jsx)("div",{className:"symbol symbol-36 me-3",children:(0,x.jsx)("div",{className:"symbol-label "+(v?"text-gray-500":""),children:(0,x.jsx)("i",{className:"fa-duotone me-0 fa-solid fa-right-from-bracket"})})}),(0,x.jsx)("div",{className:"navi-text",children:(0,x.jsx)("div",{className:"fs-8 fw-semibold "+(v?"spinner spinner-gray text-gray-500":""),children:"Sign out"})})]})]})]})]})}}const g=(0,u.Ng)(null,(e=>({checkCollaborator:(l,s)=>e((0,h.TU)(l,s)),setUserToken:l=>e({type:v.C01,payload:l}),setAuthentication:l=>e({type:v.wxv,payload:{...l}})})))((0,p.A)(f))}}]);