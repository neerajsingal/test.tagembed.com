"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[6139],{94562:(t,e,s)=>{s.d(e,{A:()=>o});var i=s(89379),l=s(30615),a=s(44414);const o=t=>{var e,s,o,n,d,r,c,u,h,p,m,g;let{selected:v,onSelect:x,content:w}=t;return(0,a.jsx)(l.Ay,{styles:{control:(t,e)=>(0,i.A)((0,i.A)({},t),{},{width:window.location.pathname.includes("moderation")?"100px":"120px"})},className:"text-align-left",options:[{value:"name",label:null!==(e=null===w||void 0===w||null===(s=w.table_text)||void 0===s?void 0:s.product)&&void 0!==e?e:"Product"},{value:"productId",label:null!==(o=null===w||void 0===w||null===(n=w.table_text)||void 0===n?void 0:n.product_id)&&void 0!==o?o:"Product ID"},{value:"sku",label:null!==(d=null===w||void 0===w||null===(r=w.table_text)||void 0===r?void 0:r.sku)&&void 0!==d?d:"SKU"},{value:"productType",label:null!==(c=null===w||void 0===w||null===(u=w.table_text)||void 0===u?void 0:u.category)&&void 0!==c?c:"Category"},{value:"url",label:null!==(h=null===w||void 0===w||null===(p=w.table_text)||void 0===p?void 0:p.product_url)&&void 0!==h?h:"URL"},{value:"tags",label:null!==(m=null===w||void 0===w||null===(g=w.table_text)||void 0===g?void 0:g.tags)&&void 0!==m?m:"Tags"}],value:v,onChange:x})}},96139:(t,e,s)=>{s.r(e),s.d(e,{default:()=>L});var i=s(9950),l=s(73878),a=s(70804),o=s(80409),n=s(98361),d=s(1093),r=s(4342),c=s(52867),u=s(54810),h=s(36431),p=s(17595),m=s(34483),g=s(75623),v=s(51960),x=s(97937),w=s(82094),f=s(1480),j=s(10274),b=s(28981),_=s(80322),y=s(18633),N=s(75798),T=s(1391),S=s(94562),C=s(44414);let k;class A extends i.Component{constructor(t){super(t),this.fetchAllProducts=()=>{const{searchText:t,selectedTag:e,searchType:s}=this.state,{fetchProductList:i,modalData:l}=this.props;let a="";const o=(null===t||void 0===t?void 0:t.length)>1?t:"";var n;if(t&&(a=null!==(n=null===s||void 0===s?void 0:s.value)&&void 0!==n?n:"",!a))return k&&clearTimeout(k),void(k=setTimeout(()=>(0,c.r$)("Please select search type from dropdown"),300));this.setState({showProd:!0},()=>i(1,10,e,o,this.responceApi,null===l||void 0===l?void 0:l.referenceId,(null===l||void 0===l?void 0:l.newMedia)||(null===l||void 0===l?void 0:l.postFile),a))},this.setLastSearchTag=()=>{this.setState(t=>({loading:!1,productList:[...t.productList]}))},this.handleClickOutsideTagProduct=t=>{var e,s;!this.tagProductRef||null!==(e=this.tagProductRef)&&void 0!==e&&null!==(s=e.current)&&void 0!==s&&s.contains(t.target)||this.setState({showtags:!1})},this.handleClickOutside=t=>{const e=this.outsideNewRef.current;!e||null!==e&&void 0!==e&&e.contains(t.target)||this.setState({showProd:"option"==t.target.role})},this.checkTour=async()=>{var t;const e=(0,c.lL)("tourStep"),i=null===(t=(0,c.lL)("isTour"))||void 0===t||t,{default:l}=await s.e(8695).then(s.bind(s,8695)),{tour:a}=new l(this.props.navigate,!1,this.props.dispatch);i||"#search_pro_select"!=(null===e||void 0===e?void 0:e.id)?"#tag_products_0"==(null===e||void 0===e?void 0:e.id)&&((0,c.n4)("tourStep",{id:"#hotspot-section",step:8}),setTimeout(()=>{var t;return a.drive(null!==(t=null===e||void 0===e?void 0:e.step)&&void 0!==t?t:8)},400)):((0,c.n4)("tourStep",{id:"#tag_products_0",step:8}),setTimeout(()=>a.highlight({element:"#tag_products"}),400))},this.triggerAction=t=>{const{searchText:e,prodClick:s,searchType:i}=this.state;if(t&&s)this.setState({loading:!0,prodClick:!1,showProd:!0},this.fetchAllProducts);else if((null===e||void 0===e?void 0:e.length)>=1||!e){const t=!(null===e||void 0===e||!e.length||null===i||void 0===i||!i.value)||!e;this.setState({showProd:t,loading:t,productList:[]},this.fetchAllProducts)}},this.responceApi=t=>{this.setState({loading:!1,productList:(null===t||void 0===t?void 0:t.length)>0?[...t]:[]})},this.removeTag=t=>{const e=this.state.selectedTag.filter(e=>e!==t);this.setState({selectedTag:e,searchTag:"",showtags:!1,productTags:[]},this.fetchAllProducts)},this.product_tags_search=t=>{const e=t.target.value;this.setState({loadingTag:!0,showtags:(null===e||void 0===e?void 0:e.length)>0,searchTag:e},()=>this.debouncedProductTagsSearch(e))},this.productTagsSearchLogic=t=>{(0,f.Wb)(t).then(t=>{const{responseCode:e,responseData:s}=t.data;200===e&&this.setState({productTags:s,showtags:s&&s.length>0,loadingTag:!1})}).catch(t=>{console.error("Error fetching product tags:",t),this.setState({loadingTag:!1})})},this.getData_bySelected_Tag=t=>{const e=[...this.state.selectedTag,t];this.setState({selectedTag:[...new Set(e)],showtags:!1,searchTag:""},this.fetchAllProducts)},this.handleScroll=()=>{const t=this.listRef.current;if(t){t.getBoundingClientRect().bottom<=window.innerHeight&&this.setState({scrolledToBottom:!0},this.filterProductOnScrolle)}},this.addProduct=(t,e)=>{const{modalData:s,activeCarousalPost:i}=this.props;let l=null!==s&&void 0!==s&&s.postproduct&&(null===s||void 0===s?void 0:s.postproduct.length)>0?(0,c._u)(s):"45%";const a={left:"45%",top:"".concat(l)},o="left:45%;top:".concat(l,";"),n=(null===s||void 0===s?void 0:s.postproduct.length)>0?null===s||void 0===s?void 0:s.postproduct.map(t=>t.product.shopify_product_id.toString()):[];n.push(t.shopify_product_id),this.props.TAG_PRODUCT_ACTION(n,t,i||e,a,o,null===s||void 0===s?void 0:s.feedId,this.callbackMsg),this.setState({firstTime:!0}),this.setState({showProd:!1})},this.callbackMsg=t=>{const{activeCarousalPost:e,updateCarousalPost:s,carousalPostsList:i}=this.props;e&&s(e,i,t,1)},this.filterProductOnScrolle=()=>{const{currentPage:t,sentReq:e,searchText:s,selectedTag:i}=this.state,{total_pages:l,modalData:a}=this.props;t<l&&!e&&this.setState({currentPage:t+1,sentReq:!0},()=>this.props.ACTION_PRODUCT_LIST_FORTAG(t,10,i,s,this.completedPageCall,null===a||void 0===a?void 0:a.referenceId,(null===a||void 0===a?void 0:a.newMedia)||(null===a||void 0===a?void 0:a.postFile)))},this.completedPageCall=t=>this.setState(e=>({sentReq:!1,productList:[...e.productList,...t]})),this.callbackRemove=t=>{const{activeCarousalPost:e,updateCarousalPost:s,carousalPostsList:i}=this.props;e&&s(e,i,t,2)},this.removeTaggProduct=(t,e,s,i)=>{if((0,_.Yj)("contentGallery","editGallery",!0)){const{modalData:l}=this.props,a=null===l||void 0===l?void 0:l.postproduct.map(t=>t.product.shopify_product_id.toString());this.props.REMOVE_TAGGED_PRODUCT_ACTION(a,t,e,s,i,this.callbackRemove)}},this.clickToShowContact=(t,e)=>this.setState({showContactUs:t,type:e}),this.state={postproduct:[],tagedprod:[],showProd:!1,showtags:!1,searchTag:"",loadingTag:!1,productTags:[],selectedTag:[],productId:0,errorMsg:"",searchText:"",currentPage:1,loading:!1,scrolledToBottom:!1,sentReq:!1,visenzeId:null,visenzeProduct:null,firstTime:!1,productList:[],showContactUs:!1,type:"",prodClick:!0,searchType:null},this.outsideNewRef=i.createRef(),this.listRef=i.createRef(),this.tagProductRef=i.createRef(),this.debouncedTriggerAction=(0,c.sg)(this.triggerAction.bind(this),500),this.debouncedProductTagsSearch=(0,c.sg)(this.productTagsSearchLogic,500)}componentDidMount(){const{modalData:t,activeCarousalPostsList:e}=this.props;window.addEventListener("scroll",this.handleScroll),window.addEventListener("click",this.handleClickOutside),window.addEventListener("click",this.handleClickOutsideTagProduct),this.setState({postproduct:e||t.postproduct})}componentWillUnmount(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("click",this.handleClickOutside),window.removeEventListener("click",this.handleClickOutsideTagProduct)}componentDidUpdate(){const{modalData:t,activeCarousalPostsList:e,activeCarousalPost:s}=this.props,{postproduct:i}=this.state;var l;s?(null===e||void 0===e?void 0:e.length)!=(null===i||void 0===i?void 0:i.length)&&this.setState({postproduct:e}):(null===t||void 0===t||null===(l=t.postproduct)||void 0===l?void 0:l.length)!=(null===i||void 0===i?void 0:i.length)&&this.setState({postproduct:t.postproduct})}render(){var t,e,s,i,l,a,o,n,d,c,h,f;const{showProd:j,selectedTag:b,productTags:T,showtags:k,searchTag:A,postproduct:P,searchType:I,errorMsg:D,searchText:E,sentReq:L,loading:O,productList:R,showContactUs:U,type:G,prodClick:M}=this.state,{modalData:B,changeHotspotStatus:H,enableHotspot:z,user:F,activeCarousalPost:W}=this.props,K=null===B||void 0===B||null===(t=B.imageList)||void 0===t?void 0:t.find(t=>t.referenceId==W);K&&(B.type=K.type);const{moderation:q,product_catalog:V}=null!==(e=window.APP_CONTENT)&&void 0!==e?e:{};return(0,C.jsx)("div",{className:"",children:(0,C.jsxs)("div",{className:"p-4 p_tags_height",children:[5!=B.type&&3!=B.type&&1!=B.type?(0,C.jsx)(p.A.Group,{className:"mb-3",children:(0,C.jsx)(p.A.Check,{type:"switch",id:"enable_hotspot",className:"f-between",label:null!==(s=null===q||void 0===q?void 0:q.switch_hotspot)&&void 0!==s?s:"",defaultValue:z,onChange:()=>(0,_.Yj)("contentGallery","editGallery",!0)?H(W?K.hotspot:B.hotspot,W||B.referenceId):{},checked:z,reverse:!0})}):null,(0,C.jsxs)(m.A,{show:!0,className:"position-relative w-100 mb-3",align:"end",children:[(0,C.jsx)(m.A.Toggle,{variant:"outline-secondary",className:"arrow_disabled p-0 border-0 mb-0 flex-grow-1 w-100 bg-transparent",children:(0,C.jsxs)(g.A,{children:[(0,C.jsx)(S.A,{selected:I,onSelect:t=>this.setState({searchType:t},()=>{(null===E||void 0===E?void 0:E.length)>0&&this.triggerAction()}),content:V}),(0,C.jsx)(p.A.Control,{ref:this.outsideNewRef,id:"search_pro_",className:"".concat(D?"is-invalid":""," rounded ms-2"),placeholder:null!==(i=null===q||void 0===q?void 0:q.ph_search_products)&&void 0!==i?i:"",onChange:t=>this.setState({searchText:t.target.value},this.triggerAction),value:E,autoComplete:"off",onClick:()=>this.setState({currentPage:1},()=>{M&&this.triggerAction(!0)})}),(0,C.jsx)(g.A.Text,{children:(0,C.jsx)(u.gc,{type:"solid",icon:"magnifying-glass"})})]})}),D?(0,C.jsx)("span",{className:"invalid-feedback",children:D}):null,O?(0,C.jsx)("div",{className:"w-100 dropdown-menu show dropdown-menu-end",style:{minHeight:"320px"},children:(0,C.jsx)(y.a,{bg:"white"})}):j&&R&&(null===R||void 0===R?void 0:R.length)>0?(0,C.jsxs)(m.A.Menu,{show:!(!j||!R),className:"w-100",children:[(0,C.jsx)("div",{className:"w-100",id:"tag_products",style:{overflowX:"auto",maxHeight:320},ref:this.listRef,onScroll:this.handleScroll,children:R.map((t,e)=>{var s,i,l;const a=null!==t&&void 0!==t&&null!==(s=t.product_image)&&void 0!==s&&s.includes("?")?"https://cdn.taggbox.com/v7/".concat(null===t||void 0===t?void 0:t.product_image,"&w=100"):"https://cdn.taggbox.com/v7/".concat(null===t||void 0===t?void 0:t.product_image,"?w=100");return(0,C.jsxs)(m.A.Item,{id:"tag_products_".concat(e),"data-item":"product",onClick:()=>(0,_.Yj)("contentGallery","editGallery",!0)?this.addProduct(t,B.referenceId):{},className:"d-flex",children:[(0,C.jsx)("div",{className:"w-64px d-flex flex-shrink-0 me-2",children:(0,C.jsx)(w.A,{mediaClass:"position-relative overflow-hidden w-100 border rounded-1",size:100,height:64,width:64,url:a,alt:"",isCover:!0})}),(0,C.jsxs)("div",{className:"d-flex align-items-start flex-column overflow-hidden w-100",children:[(0,C.jsx)("p",{className:"fs-9 fw-medium mb-1 text-wrap ",children:t.product_title}),(0,C.jsxs)("span",{className:"d-flex align-items-center tb_pro_price mb-1",children:[t.product_price&&t.product_price>0?(0,C.jsxs)("span",{className:"fs-8 fw-bold",children:[t.price_currency_symbol,t.product_discount>0?t.product_discount:t.product_price]}):"",t.product_price&&t.product_discount>0&&t.product_discount<t.product_price?(0,C.jsxs)("span",{className:"fs-8 ms-2 text-muted",style:{textDecoration:"line-through"},children:[t.price_currency_symbol,t.product_price]}):null]}),t.recomended?(0,C.jsxs)("div",{className:"f-between mt-2 w-100",children:[(0,C.jsxs)(r.A,{bg:"primary",className:"rounded-pill bg-transparent text-primary border border-primary",children:[(0,C.jsx)(u.gc,{icon:"sparkles",iconClass:"me-1"})," ",null!==(i=null===q||void 0===q?void 0:q.filter_ai)&&void 0!==i?i:""]}),(0,C.jsx)("div",{className:"position-relative",style:{marginRight:-5},children:(0,C.jsx)(v.A,{src:(0,u.pc)("media/svg/trusense.svg"),height:20,width:100,alt:"trueSense",fluid:!0})})]}):(0,C.jsx)("p",{className:"fs-10 text-muted mb-0",children:t.shopify_product_type?(0,C.jsxs)("div",{children:[" ",null!==(l=null===q||void 0===q?void 0:q.label_category)&&void 0!==l?l:"",":  ",t.shopify_product_type]}):""})]})]},e)})}),(0,C.jsx)("hr",{}),(0,C.jsxs)(m.A.Item,{className:"f-center",id:"add_product",href:"/content/products",children:[(0,C.jsx)(u.gc,{type:"solid",icon:"plus",iconClass:"me-1"}),null!==(l=null===q||void 0===q?void 0:q.btn_upload_products)&&void 0!==l?l:""]})]}):(0,C.jsx)(C.Fragment,{})]}),(0,C.jsxs)("div",{className:"position-relative",children:[(0,C.jsx)(p.A.Group,{className:"mb-3",children:(0,C.jsx)(p.A.Control,{id:"search_pro_",className:D?"is-invalid":"",placeholder:null!==(a=null===q||void 0===q?void 0:q.ph_search_tags)&&void 0!==a?a:"",onChange:this.product_tags_search,value:A,autoComplete:"off"})}),k&&T?(0,C.jsx)(m.A.Menu,{show:!0,className:"w-100",children:T.map((t,e)=>(0,C.jsx)(m.A.Item,{className:"f-center overflow-hidden",onClick:()=>this.getData_bySelected_Tag(t),children:(0,C.jsx)("p",{className:"fs-10 text-muted text-ellipsis mb-0",children:t})},"prd_tags_".concat(e)))}):""]}),(0,C.jsx)("div",{className:"mb-3 mb-xl-4",children:(0,C.jsx)("div",{className:"tags-group d-flex align-items-center flex-wrap overflow-hidden w-100",children:b&&b.length>0?b.map((t,e)=>(0,C.jsxs)(r.A,{className:"me-1 mb-1 px-3 py-2 f-center bg-secondary overflow-hidden",children:[(0,C.jsx)("span",{className:" text-break text-wrap text-start",children:t}),(0,C.jsx)(x.A,{variant:"link",size:"sm",className:"p-0 ms-1 text-gray-800",onClick:()=>this.removeTag(t),children:(0,C.jsx)(u.gc,{type:"solid",icon:"xmark"})})]},t.toString())):""})}),P&&(null===P||void 0===P?void 0:P.length)>0?P.map((t,e)=>{var s,i;return(0,C.jsxs)("div",{className:"p-2 box-shadow mb-2 rounded-2 d-flex align-items-center position-relative border",children:[(0,C.jsx)("span",{className:"position-absolute start-0 translate-middle h-18px w-18px rounded-circle f-center bg-dark text-gray-100 top-50 fs-10 fw-medium",style:{zIndex:1},children:e+1}),(0,C.jsxs)("div",{className:"d-flex flex-grow-1 align-items-center overflow-hidden",style:{maxWidth:"calc(100% - 32px)"},children:[(0,C.jsx)("div",{className:"w-44px d-flex flex-shrink-0 me-2",children:(0,C.jsx)(w.A,{mediaClass:"position-relative overflow-hidden w-100 border rounded-1",size:100,height:44,width:44,url:null===t||void 0===t||null===(s=t.product)||void 0===s?void 0:s.product_image,alt:"",isCover:!0})}),(0,C.jsxs)("div",{className:"d-flex align-items-start flex-column overflow-hidden w-100",children:[(0,C.jsx)("p",{className:"fs-9 fw-medium mb-1 text-wrap text-break",children:(null===t||void 0===t||null===(i=t.product)||void 0===i?void 0:i.product_title)||""}),(0,C.jsxs)("div",{className:"d-flex align-items-center mb-1",children:[0!=t.product.product_discount&&t.product.product_discount!=t.product.product_price?(0,C.jsxs)("span",{className:"fs-8 fw-bold me-2",children:[t.product.discount_currency_symbol,Math.trunc(100*t.product.product_discount)/100]}):(0,C.jsxs)("span",{className:"fs-8 fw-bold me-2",children:[t.product.discount_currency_symbol,Math.trunc(100*t.product.product_price)/100]}),t.product.product_discount&&t.product.product_discount>0?(0,C.jsxs)("span",{className:"fs-8 text-muted",style:{textDecoration:"line-through"},children:[t.product.discount_currency_symbol,t.product.product_discount>0?t.product.product_price:""]}):""]})]})]}),(0,C.jsx)(x.A,{variant:"icon",size:"sm",className:"btn-active-danger","aria-label":"delete",onClick:()=>this.removeTaggProduct(t.product.product_sku,t.product.id,t.post_id,t.id),children:(0,C.jsx)(u.gc,{type:"solid",icon:"trash-can"})})]},e)}):(0,C.jsxs)("div",{className:"f-center py-3 text-gray-300 mb-10",children:[(0,C.jsx)("span",{className:"h-40px w-40px rounded-circle me-2 border f-center fs-4",children:(0,C.jsx)(u.gc,{type:"light",icon:"bag-shopping"})}),null!==(o=null===q||void 0===q?void 0:q.empty_products)&&void 0!==o?o:""]}),[142738,142737].includes(F.id)?null:(0,C.jsxs)("div",{className:"d-flex align-items-center badge-light-primary px-3 py-4 rounded-2 mt-2",children:[(0,C.jsxs)("p",{className:"fs-7 text-gray-800 pe-3 mb-0",children:[null!==(n=null===q||void 0===q?void 0:q.ai_banner)&&void 0!==n?n:"",(0,C.jsx)(u.gc,{icon:"sparkle",iconClass:"ms-1 text-warning"})]}),(0,C.jsx)(x.A,{className:"text-nowrap",onClick:()=>this.clickToShowContact(!0,"Tag Product Talk to sales"),children:null!==(d=null===(c=window)||void 0===c||null===(h=c.APP_CONTENT)||void 0===h||null===(f=h.common)||void 0===f?void 0:f.talk_to_sales)&&void 0!==d?d:""})]}),(0,C.jsx)(N.A,{type:G,show:U,onCloseModel:()=>this.clickToShowContact(!1,"")}),(0,C.jsx)("div",{})]})})}}const P=(0,l.Ng)(t=>{var e,s,i,l,a,o,n;return{total_pages:null===(e=t.products)||void 0===e?void 0:e.total_pages,searchProducts:null===(s=t.products)||void 0===s?void 0:s.searchProducts,loadingTagProduct:null===(i=t.products)||void 0===i?void 0:i.loadingTagProduct,moderation:t.moderation,ctaData:null===(l=t.ctaData)||void 0===l?void 0:l.data,user:null===(a=t.authorized)||void 0===a||null===(o=a.userData)||void 0===o||null===(n=o.user_data)||void 0===n?void 0:n.user}},t=>({ACTION_PRODUCT_LIST_FORTAG:(e,s,i,l,a,o,n)=>t((0,f.O0)(e,s,i,l,a,o,n)),TAG_PRODUCT_ACTION:(e,s,i,l,a,o,n)=>t((0,j.gw)(e,s,i,l,a,o,n)),REMOVE_TAGGED_PRODUCT_ACTION:(e,s,i,l,a,o)=>t((0,j.PB)(e,s,i,l,a,o)),getUserInfo_afterChanges:()=>t((0,b.AW)()),fetchProductList:(e,s,i,l,a,o,n,d)=>t((0,f.EU)(e,s,i,l,a,o,n,d))}))((0,T.A)(A));var I=s(43523),D=s(66345);class E extends i.Component{constructor(t){super(t),this.onClickToRemoveTag=t=>e=>{let{tagString:s}=this.state;s.splice(t,1),this.setState({tagString:s,changesStatus:!0})},this.addTagButtonValue=()=>{this.setState({addTagButton:!1})},this.setInitialState=()=>{const{modalData:t}=this.props;t&&Object.keys(t).length>0&&(t.tags&&String(t.tags).length>0?this.setState({tagString:String(t.tags).split(","),content:t.postcontent}):this.setState({tagString:[],content:t.postcontent})),this.setState({textAreaHeight:20*(this.state.content.length/35).toFixed()})},this.handleOutsideClick=t=>{this.editorEnable&&this.editorEnable.current&&!this.editorEnable.current.contains(t.target)&&this.editorEnableButton&&!this.editorEnableButton.current.contains(t.target)&&this.editorEnableButton&&null!==!this.editorEnableButton.current.contains(t.target)?this.setState({descriptionEditable:!1}):this.editorEnable&&this.editorEnable.current&&!this.editorEnable.current.contains(t.target)&&null!==this.editorEnable.current.contains(t.target)&&this.setState({descriptionEditable:!0})},this.onClickNewAddTag=t=>{const{newTag:e,tagString:s}=this.state,{modalData:i}=this.props;"Enter"!==t.key&&13!==t.keyCode||e&&String(e).length>=3&&(s.push(e),this.setState({tagString:s,newTag:"",selectedOption:null,changesStatus:!0,addTagButton:!0}))},this.addNewTag=t=>this.setState({newTag:t.target.value,changesStatus:!0}),this.onClickToSave=t=>{const{tagString:e}=this.state,{modalData:s}=this.props;e&&e.length},this.setNewTags=t=>{t&&t.value?this.setState({newTag:t.value,selectedOption:t}):this.setState({newTag:"",selectedOption:null})},this.onChangeContent=t=>{this.setState({content:t.target.value,changesStatus:!0})},this.onChangeTag=t=>{this.setState({newTag:t.target.value})},this.onSaveChanges=t=>{const{modalData:e}=this.props,{tagString:s,content:i}=this.state;String(e.collection),String(e.collection),String(e.id),e.postFile,s.join(",")},this.onFilterWithTag=t=>e=>{const{modalCallback:s,tagsFilter:i}=this.props;i(t),setTimeout(()=>s(!1),200)},this.contentHeight=t=>{var e=t.length/35,s=Math.round(e);return e>=s?20*(s+1)+20:20*s+20},this.state={descriptionEditable:!1,addTagButton:!0,tagString:[],newTag:"",listTags:[],selectedOption:null,content:"",changesStatus:!1},this.editorEnable=i.createRef(),this.editorEnableButton=i.createRef()}componentWillMount(){const{tagList:t}=this.props;if(t&&t.length>0){var e=[];t.map(t=>{e.push({value:t,label:t})}),this.setState({listTags:e})}}descriptionToggle(){this.setState({descriptionEditable:!0})}componentDidMount(){document.addEventListener("click",this.handleOutsideClick),this.setInitialState()}componentDidUpdate(t){t.modalData!==this.props.modalData&&this.setInitialState()}render(){var t,e,s,i,l,p,m,g,v,x,w,f,j,b,_,y,N,T,S,k,A,E,L,O,R,U,G,M,B,H,z,F,W,K;const{descriptionEditable:q,addTagButton:V,tagString:Y,content:$,changesStatus:X,newTag:J}=this.state,{modalData:Q,networkData:Z,collections:tt,isTrash:et,changeHotspotStatus:st,enableHotspot:it,activeCarousalPost:lt,activeCarousalPostsList:at,carousalPostsList:ot,updateCarousalPost:nt,isShoppable:dt}=this.props,rt=18==Q.networkId?2:Q.networkId,ct=(Z&&Z.length>0&&Z.filter(t=>t.id==rt),null!==(t=window.APP_CONTENT)&&void 0!==t?t:{});return(0,C.jsxs)(o.A.Container,{id:"modal_aside_",defaultActiveKey:dt?"tag_product":"details",children:[(0,C.jsxs)(n.A,{variant:"underline",className:"border-bottom",children:[dt?(0,C.jsx)(n.A.Item,{children:(0,C.jsxs)(n.A.Link,{className:"ms-3 py-3",eventKey:"tag_product",children:[(0,C.jsx)(u.gc,{type:"solid",icon:"bag-shopping",iconClass:"me-1 fs-6"}),"Tag products"]})}):null,(0,C.jsx)(n.A.Item,{children:(0,C.jsxs)(n.A.Link,{className:"ms-3 py-3",eventKey:"details",children:[(0,C.jsx)(u.gc,{type:"solid",icon:"image",iconClass:"me-1 fs-6"}),"Details"]})})]}),(0,C.jsxs)(o.A.Content,{className:"m_sideCont_scroll_",children:[(0,C.jsx)(o.A.Pane,{eventKey:"tag_product",children:(0,C.jsx)(P,{updateCarousalPost:nt,carousalPostsList:ot,activeCarousalPostsList:at,activeCarousalPost:lt,modalData:Q,changeHotspotStatus:st,enableHotspot:it})}),(0,C.jsx)(o.A.Pane,{eventKey:"details",children:(0,C.jsxs)("div",{className:"position-relative",children:[(0,C.jsx)("div",{className:"px-4 mt-3",children:(0,C.jsx)(d.A,{className:"table-borderless mb-0",children:(0,C.jsxs)("tbody",{children:[(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,C.jsx)("span",{className:"text-muted",children:null!==(e=null===ct||void 0===ct||null===(s=ct.moderation)||void 0===s?void 0:s.field_author)&&void 0!==e?e:""})}),(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,C.jsxs)("div",{className:"d-flex align-items-center mr-2 cursor-pointer",onClick:Q.link?t=>window.open(Q.link,"_blank"):null,children:[(0,C.jsx)(h.A,{className:"symbol symbol-34 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:38,symbolClass:"symbol-label fs-8",name:Q.postname,profileUrl:(0,c.G9)(Q.picture),networkId:Q.networkId?Q.networkId:0}),(0,C.jsxs)("div",{children:[(0,C.jsx)("p",{className:" mb-0 text-break fw-bold",children:Q.postname}),(0,C.jsxs)("small",{className:"mb-0 text-muted text-break",children:["@",null===Q||void 0===Q||null===(i=Q.username)||void 0===i?void 0:i.replace(/\s+/g,"")]})]})]})})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,C.jsx)("span",{className:"text-muted",children:null!==(l=null===ct||void 0===ct||null===(p=ct.moderation)||void 0===p?void 0:p.field_network)&&void 0!==l?l:""})}),(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,C.jsxs)("div",{className:"d-flex align-items-center",children:[(0,C.jsx)("span",{className:"me-2 d-flex",children:0!=Q.networkId?(0,C.jsx)("img",{className:"img-fluid",src:(0,u.pc)("media/icons/social-icons/".concat((0,c.EC)(Q.networkId),".svg")),height:18,width:18,alt:Q.networkId?Q.networkId:0}):""}),(0,C.jsx)("span",{className:"",children:0==Q.networkId?"":(0,c.Oi)(Q.networkId)})]})})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,C.jsx)("span",{className:"text-muted",children:null!==(m=null===ct||void 0===ct||null===(g=ct.moderation)||void 0===g?void 0:g.field_feed)&&void 0!==m?m:""})}),(0,C.jsxs)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:[Q.feedname&&32==Q.networkId?(0,C.jsx)("img",{className:"img-fluid me-2",src:(0,u.pc)("media/icons/social-icons/".concat((0,c.EC)(32),".svg")),height:18,width:18,alt:"Chrome"}):null,(0,C.jsx)("span",{className:" text-break",children:Q.feedname?(0,a.Ay)(Q.feedname):0==Q.networkId?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("img",{className:"img-fluid",src:(0,u.pc)("media/icons/social-icons/".concat((0,c.EC)(0),".svg")),height:18,width:18,alt:0})," ",null!==(v=null===ct||void 0===ct||null===(x=ct.moderation)||void 0===x?void 0:x.manual_upload)&&void 0!==v?v:""," "]}):"--"})]})]}),Q.ugcstatus?(0,C.jsx)(C.Fragment,{children:2==Q.ugcstatus?(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,C.jsx)("span",{className:"text-muted",children:null!==(w=null===ct||void 0===ct||null===(f=ct.moderation)||void 0===f?void 0:f.field_rights)&&void 0!==w?w:""})}),(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,C.jsxs)("div",{className:"d-flex align-items-center flex-wrap text-success",children:[(0,C.jsx)("span",{className:"fs-6 me-1",children:(0,C.jsx)(u.gc,{type:"solid",icon:"user-check"})}),(0,C.jsx)("span",{className:"fw-medium",children:null!==(j=null===ct||void 0===ct||null===(b=ct.moderation)||void 0===b?void 0:b.rights_approved)&&void 0!==j?j:""})]})})]}):1==Q.ugcstatus?(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,C.jsx)("span",{className:"text-muted",children:null!==(_=null===ct||void 0===ct||null===(y=ct.moderation)||void 0===y?void 0:y.field_rights)&&void 0!==_?_:""})}),(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,C.jsxs)("div",{className:"d-flex align-items-center flex-wrap text-warning",children:[(0,C.jsx)("span",{className:"fs-6 me-1",children:(0,C.jsx)(u.gc,{type:"solid",icon:"user-clock"})}),(0,C.jsx)("span",{className:"fw-medium",children:null!==(N=null===ct||void 0===ct||null===(T=ct.moderation)||void 0===T?void 0:T.rights_pending)&&void 0!==N?N:""})]})})]}):3==Q.ugcstatus?(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,C.jsx)("span",{className:"text-muted",children:null!==(S=null===ct||void 0===ct||null===(k=ct.moderation)||void 0===k?void 0:k.field_rights)&&void 0!==S?S:""})}),(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,C.jsxs)("div",{className:"d-flex align-items-center flex-wrap text-danger",children:[(0,C.jsx)("span",{className:"fs-6 me-1",children:(0,C.jsx)(u.gc,{type:"solid",icon:"user-xmark"})}),(0,C.jsx)("span",{className:"fw-medium",children:null!==(A=null===ct||void 0===ct||null===(E=ct.moderation)||void 0===E?void 0:E.rights_rejected)&&void 0!==A?A:""})]})})]}):null}):null,parseInt(Q.sentiment)>0?(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,C.jsx)("span",{className:"text-muted",children:null!==(L=null===ct||void 0===ct||null===(O=ct.moderation)||void 0===O?void 0:O.filter_sentiment)&&void 0!==L?L:""})}),(0,C.jsxs)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:[" ",(0,C.jsx)("span",{className:" text-break",children:(0,C.jsxs)("span",{className:"d-flex fs-8  text-break",children:[(0,C.jsx)("div",{className:"h-16px w-16px me-1 d-flex",children:(0,C.jsx)("img",{className:"img-fluid",src:(0,u.pc)("media/icons/emoji/emoji".concat((0,c.Hp)(Q.sentiment).item,".svg")),height:16,width:16,alt:""})}),(0,c.Hp)(Q.sentiment).label]})})]})]}):null,!Q.recommendation||2!=Q.type&&4!=Q.type?null:(0,C.jsxs)("tr",{children:[(0,C.jsxs)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:[(0,C.jsx)("p",{className:"text-muted mb-1 text-nowrap me-2",children:null!==(R=null===ct||void 0===ct||null===(U=ct.moderation)||void 0===U?void 0:U.filter_ai)&&void 0!==R?R:""}),(0,C.jsxs)("span",{style:{verticalAlign:"middle",fontStyle:"italic",fontSize:"11px",color:"#999",fontWeight:"400"},children:[null!==(G=null===ct||void 0===ct||null===(M=ct.common)||void 0===M?void 0:M.powered_by)&&void 0!==G?G:"",(0,C.jsx)("img",{src:"".concat(D.P_W,"media/icons/svg-icons/true-sense.svg"),alt:"TruSense",height:16,width:16,className:"ms-1"}),(0,C.jsx)("span",{style:{verticalAlign:"middle",fontSize:"12px",fontStyle:"normal",color:"var(--bs-gray-900)"},children:" TruSense"})]})]}),(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,C.jsxs)("div",{className:"d-flex align-items-start",children:[(0,C.jsx)("div",{className:"h-12px w-12px rounded-circle d-flex flex-shrink-0 mt-1 ".concat(1==Q.recommendation.type?"bg-success":2==Q.recommendation.type?"bg-warning":3==Q.recommendation.type?"bg-danger":null)}),(0,C.jsxs)("span",{className:" text-break ps-1",children:[Q.recommendation.label," (",Q.recommendation.score,"%)"]})]})})]}),Q.rating>0&&1!=Q.type?(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 min-w-100 w-25",children:(0,C.jsx)("span",{className:"text-muted",children:null!==(B=null===ct||void 0===ct||null===(H=ct.moderation)||void 0===H?void 0:H.field_rating)&&void 0!==B?B:""})}),(0,C.jsx)("td",{className:"py-xxl-2 py-1 px-0 w-75",children:(0,C.jsx)("div",{className:"d-flex justify-content-start",children:(0,C.jsx)(I.A,{className:"fs-6",iconClass:"me-1",rating:Q.rating})})})]}):null]})})}),Y&&Y.length>0?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("h3",{className:"border-bottom p-4 fs-8",children:(0,C.jsx)("span",{className:"fw-medium",children:null!==(z=null===ct||void 0===ct||null===(F=ct.moderation)||void 0===F?void 0:F.btn_tags)&&void 0!==z?z:""})}),(0,C.jsx)("div",{className:"tags-group d-flex align-items-center flex-wrap mb-2",children:(0,C.jsx)("div",{className:"px-4 mt-3",children:Y.map((t,e)=>t&&String(t).length>0?(0,C.jsx)(r.A,{bg:"",className:"".concat(99999==e?"border-gradient":"border"),children:(0,C.jsx)("span",{className:"",children:t})},e):null)})})]}):null,(0,C.jsx)("h3",{className:"border-bottom p-4 fs-8",children:(0,C.jsx)("span",{className:"fw-medium",children:null!==(W=null===ct||void 0===ct||null===(K=ct.common)||void 0===K?void 0:K.description)&&void 0!==W?W:""})}),(0,C.jsx)("div",{className:"px-4 mb-3",children:(0,C.jsx)("div",{className:"d-flex flex-grow-1 pe-2",children:(0,C.jsx)("p",{style:{whiteSpace:"pre-line",wordBreak:"break-word"},children:(0,a.Ay)((0,c.K$)($||""))})})})]})})]})]})}}const L=(0,l.Ng)(t=>{var e,s,i,l,a,o;return{networkData:null===t||void 0===t||null===(e=t.networks)||void 0===e?void 0:e.networkData,tagList:null===t||void 0===t||null===(s=t.tags)||void 0===s?void 0:s.tagList,isShoppable:null===(i=t.authorized)||void 0===i||null===(l=i.userData)||void 0===l||null===(a=l.user_data)||void 0===a||null===(o=a.UserRule)||void 0===o?void 0:o.shoppableStatus}},t=>({}))(E)}}]);