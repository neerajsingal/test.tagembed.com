"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[6913],{42690:(e,t,s)=>{s.d(t,{A:()=>c});s(9950);var i=s(54810),a=s(80322),l=s(28429),n=s(44414);const c=e=>{var t,s;let{getWallData:c}=e;const{name:r,id:d}=c||{},o=(0,l.Zp)(),h=window.location.pathname,m=(e,t,s)=>{e.stopPropagation(),((0,a.Yj)("networkManager","manageFeed",!0)||[4,5].includes(s))&&o(t)};return(0,n.jsxs)("div",{className:"custom-side-menu-inn h-100",children:[(0,n.jsxs)("div",{className:"custom-side-menu-body",children:[(0,n.jsx)("p",{className:"csm-title mb-0 pb-3 pb-sm-2 border-bottom",children:"CONTENT"}),(0,n.jsxs)("ul",{className:"list-unstyled",children:[(0,n.jsxs)("li",{className:"py-3 border-bottom cursor-pointer ".concat(null===h||void 0===h||!h.includes("addfeed")||null!==h&&void 0!==h&&null!==(t=h.split("/"))&&void 0!==t&&t.includes("29")?"":"active"),onClick:e=>m(e,"/content/addfeed/".concat(d),2),children:[(0,n.jsx)(i.gc,{iconClass:"me-2",icon:"square-plus"}),(0,n.jsx)("span",{children:"Add Feed"})]}),(0,n.jsxs)("li",{className:"py-3 border-bottom cursor-pointer ".concat(null!==h&&void 0!==h&&h.includes("managefeed")?"active":""),onClick:e=>m(e,"/content/managefeed/".concat(d),3),children:[(0,n.jsx)(i.gc,{iconClass:"me-2",icon:"rectangle-history-circle-plus"}),(0,n.jsx)("span",{children:"Manage Feeds"})]}),(0,n.jsxs)("li",{className:"py-3 border-bottom cursor-pointer ".concat(null!==h&&void 0!==h&&h.includes("autopilot")?"active":""),onClick:e=>m(e,"/autopilot",4),children:[(0,n.jsx)(i.gc,{iconClass:"me-2",icon:"toggle-on"}),(0,n.jsx)("span",{children:"Auto Pilot"})]}),(0,n.jsxs)("li",{className:"py-3 border-bottom cursor-pointer ".concat(null!==h&&void 0!==h&&null!==(s=h.split("/"))&&void 0!==s&&s.includes("29")?"active":""),onClick:e=>m(e,"/content/addfeed/".concat(d,"/29"),5),children:[(0,n.jsx)(i.gc,{iconClass:"me-2",icon:"messages"}),(0,n.jsx)("span",{children:"Review Hub"})]})]})]}),(0,n.jsx)("div",{className:"custom-side-menu-footer d-flex justify-content-end border-top",children:(0,n.jsx)("div",{className:"f-between w-100 gap-3",children:(0,n.jsx)("button",{type:"button",id:"",className:"w-100 btn btn-primary",onClick:e=>{e.stopPropagation(),o("/publish/".concat(d))},children:"Publish"})})})]})}},46913:(e,t,s)=>{s.r(t),s.d(t,{default:()=>oe});var i=s(89379),a=s(9950),l=s(45358),n=s(471),c=s(17595),r=s(21432),d=s(95942),o=s(51960),h=s(31355),m=s(54810),u=s(34483),g=s(97937),p=s(4695),x=s.n(p);const f=[{icon:"pen-to-square",title:"Name Your Rule:",text:"Give Your rule a name"},{icon:"plus",title:"Select The Trigger:",text:"Select the Trigger on which you want to perform an action. Such as feed, network, hashtag."},{icon:"plus",title:"Choose an Action",text:"Select the action you want to execute based on your chosen trigger. For example, public, private, or delete."}],b=[{class:"primary",icon:"clone",title:"Bye-bye Duplicates",text:"Enable this AI-powered rule to automatically identify and remove duplicate posts using the TruSense AI Duplicate Detection feature. All detected duplicates will be made private, ensuring a cleaner and more organized experience."},{class:"primary",icon:"face-frown-slight",title:"Negativity Neutralizer",text:"Activate this AI rule to detect posts with negative sentiment and automatically make them private, keeping your feed focused and positive."},{class:"primary",icon:"square-check",title:"AI Content Spotlight",text:"Activate this rule to automatically make posts with high AI recommendation scores public, showcasing your best-performing content."}],v=[{heading:"Rule name"},{heading:"Status"},{heading:"Last executed"},{heading:"Action"}],y=["feeds","networks","handle","hashtag","keyword","showHide","tags","assetsType","duplicateAsset","sentiment","recommend","profanity"],j=e=>{x().fire({title:"Upgrade to create rules",text:"Oops! Looks like you need to upgrade your plan in order to create or modify rules.",icon:"error",showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonText:"Upgrade now!",confirmButtonColor:"var(--bs-success)"}).then((t=>{t.value?e("/price"):t.dismiss}))},w=[{id:"image_assets",val:"2,4",icon:"image",name:"Image"},{id:"video_assets",val:"3,5",icon:"video",name:"Video"},{id:"text_assets",val:"1",icon:"text",name:"Text"}];var N=s(44414);function k(e){const{filterTabs:t}=e,s=(e=>{let{duplicateAssets:t,handleTrigger:s}=e;return[{name:"Network",desc:"Select your preferred network",icon:"chart-network",fnc:()=>s("networks"),propName:"networks"},{name:"Feeds",desc:"Select the Feed type",icon:"image-portrait",fnc:()=>s("feeds"),propName:"feeds"},{name:"Media type",desc:"Choose the type of Media",icon:"image",fnc:()=>s("assetsType"),propName:"assetsType"},{name:"AI recommendation",desc:"Choose Ai recommendation",icon:"sparkles",fnc:()=>s("recommend"),propName:"recommend"},{name:"Tag",desc:"Select the preferred tag",icon:"tags",fnc:()=>s("tags"),propName:"tags"},{name:"Sentiment",desc:"Choose sentiment analysis",icon:"face-smile",fnc:()=>s("sentiment"),propName:"sentiment"},{name:"Public/Private",desc:"Select Posts Visibility",icon:"users",fnc:()=>s("showHide"),propName:"showHide"},{name:"By handle",desc:"Enter Handle",icon:"at",fnc:()=>s("handle"),propName:"handle"},{name:"By hashtag",desc:"Enter Hashtag",icon:"hashtag",fnc:()=>s("hashtag"),propName:"hashtag"},{name:"By keyword",desc:"Enter Keyword",icon:"text",fnc:()=>s("keyword"),propName:"keyword"},{name:"Profanity",desc:"Apply Profanity",icon:"ban",fnc:()=>s("profanity"),propName:"profanity"},{name:"Duplicate post",desc:parseInt(t)>0?"".concat(parseInt(t)," Select Posts"):"Select Posts",icon:"clone",fnc:()=>s("duplicateAsset"),propName:"duplicateAsset"},{name:"Language",desc:"Select your preferred language",icon:"chart-network",fnc:()=>s("language"),propName:"language"}]})(e);return(0,N.jsx)(u.A.Menu,{className:"w-100 overflow-auto px-0",style:{maxHeight:400},children:s.map(((e,s)=>t&&t.hasOwnProperty(e.propName)?null:(0,N.jsxs)(u.A.Item,{className:"d-flex align-items-center border-bottom py-2 rounded-0",onClick:e.fnc,children:[(0,N.jsx)("div",{className:"symbol symbol-36 bg-light-primary me-2 rounded-1",children:(0,N.jsx)(m.gc,{icon:e.icon,iconClass:"text-primary fs-6 me-0"})}),(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:"fs-9 fw-bold mb-0 text-gray-800",children:e.name}),(0,N.jsx)("span",{className:"fs-9 text-gray-500",children:e.desc})]})]},s)))})}function S(e){const{name:t,desc:s,icon:i,method:a,svgIcon:l,action:n,del:c}=e;return(0,N.jsxs)("div",{className:"d-flex align-items-center rounded-0 ".concat(c?"":"mb-2"),children:[(0,N.jsxs)("div",{className:"d-flex flex-grow-1 ".concat(n?"align-items-center":""),children:[n?(0,N.jsx)(m.gc,{icon:i,iconClass:"text-priamry me-1"}):(0,N.jsx)("div",{className:"symbol symbol-36 bg-light-primary me-2",children:(0,N.jsx)(m.gc,{icon:i,iconClass:"text-primary fs-6"})}),(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:"fs-9 fw-bold mb-0 text-gray-800",children:t}),s?(0,N.jsx)("span",{className:"fs-9 text-gray-500",children:s}):null]})]}),(0,N.jsx)(r.A,{placement:"top",overlay:(0,N.jsx)(d.A,{children:"Remove"}),children:(0,N.jsx)(g.A,{variant:"icon",className:"btn-active-light p-0 w-30px h-30px transition-none border-0","aria-label":"delete",onClick:a,children:(0,N.jsx)(m.gc,{icon:"trash-can",iconClass:"text-muted"})})})]})}var A=s(52867);class T extends a.Component{constructor(){super(...arguments),this.state={networkList:[]},this.onSearchNetwork=e=>{const{networkList:t}=this.props,s=t.filter((t=>t.name.toLowerCase().includes(e.target.value.toLowerCase())));this.setState({networkList:s})}}componentDidMount(){setTimeout((()=>{this.setState({networkList:this.props.networkList})}),100)}componentWillReceiveProps(e){this.setState({networkList:e.networkList})}render(){const{handleTrigger:e,selectedNetworks:t,onSelectNetwork:s,selectAllNetworks:i}=this.props,{networkList:a}=this.state;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:[(0,N.jsx)(S,{name:"Network",desc:"Choose the required network",icon:"chart-network",svgIcon:!0,method:()=>e("networks","selectedNetworks",[])}),(0,N.jsxs)(u.A,{className:"w-100",autoClose:"outside",children:[(0,N.jsx)(u.A.Toggle,{variant:"outline-secondary",className:"border-gray w-100 d-flex align-items-center",children:(0,N.jsx)("label",{className:"form-check flex-grow-1 overflow-hidden align-items-center",htmlFor:"filter_".concat((0,A.Oi)(t[0])),children:(0,N.jsx)("span",{className:"form-check-label text-gray-800 text-ellipsis fw-medium ps-0",children:t.length>0?1==t.length||2==t.length&&t.includes(18)&&t.includes(2)?(0,A.Oi)(t[0]):"".concat(t.includes(2)?t.length-1:t.length," selected"):"Select Network"})})}),(0,N.jsxs)(u.A.Menu,{className:"w-100 overflow-auto",style:{maxHeight:400},children:[(0,N.jsxs)("div",{className:"d-flex align-items-center px-3 cursor-pointer mb-2",children:[(0,N.jsx)("label",{className:"form-check flex-grow-1 fw-normal fs-8",htmlFor:"tri-searchNetwork",children:"Select All"}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",id:"tri-searchNetwork",onChange:e=>i(e),checked:t.length==this.props.networkList.length+1})]}),(0,N.jsx)("div",{className:"form-group mb-2",children:(0,N.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search your network",onChange:e=>this.onSearchNetwork(e)})}),a&&a.length>0?a.map((e=>(0,N.jsxs)("div",{className:"dropdown-item",children:[(0,N.jsxs)("label",{className:"form-check flex-grow-1 overflow-hidden align-items-center",htmlFor:"tri-network-".concat(e.id),children:[29==e.id?(0,N.jsx)(m.gc,{type:"solid",icon:"star",iconClass:"text-warning fs-6"}):(0,N.jsx)(o.A,{height:20,width:20,className:"me-2",src:(0,m.pc)("media/icons/social-icons-square/".concat((0,A.EC)(e.id),".svg")),alt:(0,A.Oi)(e.id),fluid:!0}),(0,N.jsx)("span",{className:"form-check-label text-gray-800 text-ellipsis fw-medium",children:e.name})]}),(0,N.jsx)("input",{className:"form-check-input flex-shrink-0",type:"checkbox",id:"tri-network-".concat(e.id),checked:t.includes(e.id),onChange:t=>s(e.id)})]},e.id))):(0,N.jsx)("div",{className:"py-4",children:(0,N.jsx)("h6",{className:"text-center fs-9 mb-0 text-gray-700",children:"No Networks Available"})})]})]})]}),(0,N.jsx)("div",{className:"action_gap"})]})}}const C=T,F=e=>{let{handleTrigger:t,selectedAiType:s,onSelectAiType:i,selectAllAiTypes:a}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:[(0,N.jsx)(S,{name:"AI Recommendation",desc:"Choose Ai recommendation.",icon:"sparkles",method:()=>t("recommend","selectedAiType",[])}),(0,N.jsxs)(u.A,{className:"w-100",autoClose:"outside",children:[(0,N.jsx)(u.A.Toggle,{variant:"outline-secondary",className:"border-gray w-100 d-flex align-items-center",children:(0,N.jsxs)("div",{className:"d-flex align-items-center flex-grow-1",children:[s&&1==s.length?(0,N.jsx)("span",{className:"h-10px w-10px rounded-circle me-2 bg-".concat(s.includes("1")?"success":s.includes("2")?"warning":"danger")}):null,(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:s.length>0?1==s.length?s.includes("1")?"Recommended":s.includes("2")?"Considerable":"Not Recommended":"".concat(s.length," selected"):"Select Recommendation Type"})]})}),(0,N.jsxs)(u.A.Menu,{className:"w-100",children:[(0,N.jsxs)("div",{className:"d-flex align-items-center px-3 cursor-pointer mb-2",children:[(0,N.jsx)("label",{className:"form-check flex-grow-1 fw-normal fs-8",htmlFor:"tri-MediaType",children:"Select All"}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",id:"tri-MediaType",onChange:e=>a(e),checked:3==s.length})]}),(0,N.jsxs)("div",{className:"mb-1 dropdown-item",children:[(0,N.jsxs)("label",{className:"form-check flex-grow-1 align-items-center",htmlFor:"recommend",children:[(0,N.jsx)("span",{className:"h-10px w-10px rounded-circle me-2 bg-success"}),(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:"Recommended"})]}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",value:"image",id:"recommend",onChange:e=>i("1"),checked:s.includes("1")})]}),(0,N.jsxs)("div",{className:"mb-1 dropdown-item",children:[(0,N.jsxs)("label",{className:"form-check flex-grow-1 align-items-center",htmlFor:"considerable",children:[(0,N.jsx)("span",{className:"h-10px w-10px rounded-circle me-2 bg-warning"}),(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:"Considerable"})]}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",value:"video",id:"considerable",onChange:e=>i("2"),checked:s.includes("2")})]}),(0,N.jsxs)("div",{className:"mb-1 dropdown-item",children:[(0,N.jsxs)("label",{className:"form-check flex-grow-1 align-items-center",htmlFor:"not_recommend",children:[(0,N.jsx)("span",{className:"h-10px w-10px rounded-circle me-2 bg-danger"}),(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:"Not Recommended"})]}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",value:"text",id:"not_recommend",onChange:e=>i("3"),checked:s.includes("3")})]})]})]})]}),(0,N.jsx)("div",{className:"action_gap"})]})};var L=s(70804);class I extends a.Component{constructor(){super(),this.timeoutId=null,this.onSearchFeed=e=>{const t=this.props.feedList.filter((t=>t.name.toLowerCase().includes(e.target.value.toLowerCase())));this.setState({feedList:t})},this.state={feedList:[]}}componentDidMount(){const{feedList:e}=this.props;this.timeoutId=setTimeout((()=>{this.setState({feedList:e||[]})}),100)}componentWillReceiveProps(e){const{feedList:t}=e;this.setState({feedList:t||[]})}componentWillUnmount(){this.timeoutId&&clearTimeout(this.timeoutId)}render(){const{handleTrigger:e,selectedFeeds:t,onSelectFeed:s,selectAllFeeds:i}=this.props,{feedList:a}=this.state;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:[(0,N.jsx)(S,{name:"Feeds",desc:"Select the feed type",icon:"image-portrait",method:()=>e("feeds","selectedFeeds",[]),svgIcon:!0}),(0,N.jsxs)(u.A,{className:"w-100",autoClose:"outside",children:[(0,N.jsx)(u.A.Toggle,{variant:"outline-secondary",className:"border-gray w-100 d-flex align-items-center",children:(0,N.jsx)("label",{className:"form-check flex-grow-1 overflow-hidden align-items-center",htmlFor:"filter_".concat(t&&t.length>0?(0,A.Oi)(t[0].networkId):""),children:(0,N.jsx)("span",{className:"form-check-label text-gray-800 text-ellipsis fw-medium ps-0",children:t.length>0?1==t.length?(0,L.Ay)(t[0].name):"".concat(t.length," selected"):"Select Feed"})})}),(0,N.jsxs)(u.A.Menu,{className:"w-100 overflow-auto",style:{maxHeight:400},children:[(0,N.jsxs)("div",{className:"d-flex align-items-center px-3 cursor-pointer mb-2",children:[(0,N.jsx)("label",{className:"form-check flex-grow-1 fw-normal fs-8",htmlFor:"tri-searchFeeds",children:"Select All"}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",value:"",id:"tri-searchFeeds",onChange:e=>i(e),checked:this.props.feedList.length==t.length&&0!=this.props.feedList.length})]}),(0,N.jsx)("div",{className:"form-group mb-2 px-3",children:(0,N.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search your Feed...",onChange:e=>this.onSearchFeed(e)})}),a&&a.length>0?a.map((e=>(0,N.jsxs)("div",{className:"dropdown-item",children:[(0,N.jsxs)("label",{className:"form-check flex-grow-1 overflow-hidden align-items-center",htmlFor:"tri-conn-".concat(e.feedId),children:[(0,N.jsx)("span",{className:"symbol symbol-20",children:(0,N.jsx)("img",{className:"img-fluid h-100",src:(0,m.pc)("media/icons/social-icons-square/".concat((0,A.EC)(e.networkId),".svg")),height:20,width:20,alt:(0,A.Oi)(e.networkId)})}),(0,N.jsx)("span",{className:"form-check-label text-gray-800 text-ellipsis fw-medium",children:(0,L.Ay)(e.name)})]}),(0,N.jsx)("input",{className:"form-check-input flex-shrink-0",type:"checkbox",name:"",id:"tri-conn-".concat(e.id),checked:t?t.some((t=>t.id==e.id)):"",onChange:t=>s(e)})]},e.feedId))):(0,N.jsx)("div",{className:"py-4",children:(0,N.jsx)("h6",{className:"text-center fs-9 mb-0 text-gray-700",children:"No Feeds Available"})})]})]})]}),(0,N.jsx)("div",{className:"action_gap"})]})}}const D=I,R=e=>{let{handleTrigger:t,selectedMedia:s,onSelectMediaType:i,selectAllMediaTypes:a}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:[(0,N.jsx)(S,{name:"Media Type",desc:"Choose the type of media",icon:"image",method:()=>t("assetsType","selectedMedia",[])}),(0,N.jsxs)(u.A,{className:"w-100",autoClose:"outside",children:[(0,N.jsx)(u.A.Toggle,{variant:"outline-secondary",className:"border-gray w-100 d-flex align-items-center",children:(0,N.jsxs)("div",{className:"d-flex align-items-center flex-grow-1",children:[s&&1==s.length?(0,N.jsx)("i",{className:"".concat(s.includes("1")?"ri-text":s.includes("2,4")?"ri-image-line":"ri-movie-line"," text-gray-800 icon-6 fw-normal")}):null,(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:s.length>0?1==s.length?s.includes("1")?"Text":s.includes("2,4")?"Image":"Video":"".concat(s.length," selected"):"Select Media Type"})]})}),(0,N.jsxs)(u.A.Menu,{className:"w-100",children:[(0,N.jsxs)("div",{className:"d-flex align-items-center px-3 cursor-pointer mb-2",children:[(0,N.jsx)("label",{className:"form-check flex-grow-1 fw-normal fs-8",htmlFor:"tri-MediaType",children:"Select All"}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",id:"tri-MediaType",onChange:e=>a(e),checked:3==s.length})]}),w.map(((e,t)=>(0,N.jsxs)("div",{className:"mb-1 dropdown-item",children:[(0,N.jsxs)("label",{className:"form-check flex-grow-1 align-items-center",htmlFor:e.id,children:[(0,N.jsx)(m.gc,{icon:e.icon,iconClass:"text-muted fs-6"}),(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:e.name})]}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",value:e.icon,id:e.id,onChange:t=>i(e.val),checked:s.includes(e.val)})]},t)))]})]})]}),(0,N.jsx)("div",{className:"action_gap"})]})};var P=s(31722);const E=e=>{let{handleTrigger:t,onSelectTag:s,onTagRemove:i,selectedTags:a,tagsList:l}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:[(0,N.jsx)(S,{name:"Add Tags",desc:"Select the preferred tag",icon:"tags",method:()=>t("tags","selectedTags",[])}),(0,N.jsx)(P.A,{placeholder:"Search or Create tag...",className:"selectpicker selectpicker-sm",classNamePrefix:"selectpicker",isClearable:!0,options:l,onChange:e=>s(e,"filter"),value:""}),a&&a.length>0?(0,N.jsx)("div",{className:"d-flex w-100 flex-wrap w-100 mt-1",children:a.map(((e,t)=>(0,N.jsxs)("div",{className:"badge bg-secondary rounded-pill text-gray-800 border me-1 mt-1 px-2 d-flex align-items-center",style:{top:0,maxWidth:"100%"},children:[(0,N.jsx)("span",{className:"text-break",style:{whiteSpace:"normal"},children:e}),(0,N.jsx)(g.A,{variant:"link",className:"btn p-0 ms-1 text-decoration-none",onClick:i(t,"filter"),children:(0,N.jsx)(m.gc,{icon:"xmark",iconClass:"text-muted"})})]})))}):null]}),(0,N.jsx)("div",{className:"action_gap"})]})},_=e=>{let{onSelectVisibility:t,handleTrigger:s,selectedVisibility:i}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:[(0,N.jsx)(S,{name:"Posts Visibility",desc:"Choose the visibility of posts",icon:"eye",method:()=>s("showHide","selectedVisibility",[])}),(0,N.jsxs)(u.A,{className:"w-100",children:[(0,N.jsx)(u.A.Toggle,{variant:"outline-secondary",className:"border-gray w-100 d-flex align-items-center",children:(0,N.jsxs)("div",{className:"d-flex align-items-center flex-grow-1",children:[i&&1==i.length?(0,N.jsx)(m.gc,{icon:i.includes("1")?"eye":"eye-slash",className:"text-muted"}):null,(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:i.length>0?1==i.length?i.includes("1")?"Public":"Private":"".concat(i.length," selected"):"Select Posts Visibility"})]})}),(0,N.jsxs)(u.A.Menu,{className:"w-100",children:[(0,N.jsxs)("div",{className:"mb-1 dropdown-item",children:[(0,N.jsxs)("label",{className:"form-check flex-grow-1 align-items-center",htmlFor:"tri-show-assets",children:[(0,N.jsx)(m.gc,{icon:"eye",iconClass:"text-muted fs-6"}),(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:"Public"})]}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",value:"",id:"tri-show-assets",onChange:e=>t("1","filter"),checked:i.includes("1")})]}),(0,N.jsxs)("div",{className:"mb-1 dropdown-item",children:[(0,N.jsxs)("label",{className:"form-check flex-grow-1 align-items-center",htmlFor:"tri-hide-assets",children:[(0,N.jsx)(m.gc,{icon:"eye-slash",iconClass:"text-muted fs-6"}),(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:"Private"})]}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",value:"",id:"tri-hide-assets",onChange:e=>t("2","filter"),checked:i.includes("2")})]})]})]})]}),(0,N.jsx)("div",{className:"action_gap"})]})},M=e=>{let{handleTrigger:t,duplicateAssets:s}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:(0,N.jsx)(S,{name:"Duplicate Assets",icon:"clone",method:()=>t("duplicateAsset","selectedDuplicateAsset",!1),desc:parseInt(s)>0?"".concat(parseInt(s)," Posts Selected"):"Select Posts",del:!0})}),(0,N.jsx)("div",{className:"action_gap"})]})},H=e=>{let{handleTrigger:t,selectedSentiment:s,onSelectSentiment:i,selectAllSentiments:a}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:[(0,N.jsx)(S,{name:"Sentiment",desc:"Choose sentiment analysis.",icon:"face-smile",method:()=>t("sentiment","selectedSentiment",[])}),(0,N.jsxs)(u.A,{className:"w-100",autoClose:"outside",children:[(0,N.jsx)(u.A.Toggle,{variant:"outline-secondary",className:"border-gray w-100 d-flex align-items-center",children:(0,N.jsxs)("div",{className:"d-flex align-items-center flex-grow-1",children:[s&&1==s.length?(0,N.jsx)(m.gc,{icon:"face-".concat(s.includes("1")?"smile":s.includes("2")?"meh":"frown"),iconClass:"text-muted"}):null,(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:s.length>0?1==s.length?s.includes("1")?"Positive":s.includes("2")?"Neutral":"Negative":"".concat(s.length," selected"):"Select Sentiment Type"})]})}),(0,N.jsxs)(u.A.Menu,{className:"w-100",children:[(0,N.jsxs)("div",{className:"d-flex align-items-center px-3 cursor-pointer mb-2",children:[(0,N.jsx)("label",{className:"form-check flex-grow-1 fw-normal fs-8",htmlFor:"allSentiments",children:"Select All"}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",id:"allSentiments",onChange:e=>a(e),checked:3==s.length})]}),(0,N.jsxs)("div",{className:"mb-1 dropdown-item",children:[(0,N.jsxs)("label",{className:"form-check flex-grow-1 align-items-center",htmlFor:"positive",children:[(0,N.jsx)(m.gc,{icon:"face-smile",iconClass:"text-muted fs-6"}),(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:"Positive"})]}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",value:"image",id:"positive",onChange:e=>i("1"),checked:s.includes("1")})]}),(0,N.jsxs)("div",{className:"mb-1 dropdown-item",children:[(0,N.jsxs)("label",{className:"form-check flex-grow-1 align-items-center",htmlFor:"neutral",children:[(0,N.jsx)(m.gc,{icon:"face-meh",iconClass:"text-muted fs-6"}),(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:"Neutral"})]}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",value:"video",id:"neutral",onChange:e=>i("2"),checked:s.includes("2")})]}),(0,N.jsxs)("div",{className:"mb-1 dropdown-item",children:[(0,N.jsxs)("label",{className:"form-check flex-grow-1 align-items-center",htmlFor:"negative",children:[(0,N.jsx)(m.gc,{icon:"face-frown",iconClass:"text-muted fs-6"}),(0,N.jsx)("p",{className:"fs-9 fw-medium mb-0",children:"Negative"})]}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",name:"",value:"text",id:"negative",onChange:e=>i("3"),checked:s.includes("3")})]})]})]})]}),(0,N.jsx)("div",{className:"action_gap"})]})};function O(e){let{icon:t,name:s,handleAction:i,val:a,index:l}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:(0,N.jsx)(S,{name:s,icon:t,method:()=>i(a),action:!0,del:!0})}),1!=l&&"delete"!=a?(0,N.jsx)("div",{className:"action_gap"}):null]})}function V(e){const{actionTabs:t,handleAction:s,selectedActionTags:i,onSelectTag:a,onTagRemove:l,tagsList:n,isTriggerSelected:c,selectedVisibility:r}=e,d=(e=>[{name:"Public",icon:"eye",fnc:()=>e("public"),propName:"public"},{name:"Private",icon:"eye-slash",fnc:()=>e("private"),propName:"private"},{name:"Assign tag",icon:"tag",fnc:()=>e("addTag"),propName:"addTag"},{name:"Delete",icon:"trash-can",fnc:()=>e("delete"),propName:"delete"}])(s);return(0,N.jsxs)(N.Fragment,{children:[t&&Object.keys(t).length>0?null:(0,N.jsxs)(u.A,{className:"w-100 mb-2 rule_actions",children:[(0,N.jsxs)(u.A.Toggle,{variant:"outline-secondary",id:"rule-action",className:"border border-gray text-dark border-1 w-100 p-4 arrow_disabled rounded-2",disabled:!c,children:[(0,N.jsx)(m.gc,{icon:"plus",iconClass:"text-muted"}),(0,N.jsx)("span",{className:"fs-9 fw-medium",children:"Add action"})]}),(0,N.jsx)(u.A.Menu,{className:"w-100",children:d.map(((e,t)=>1==r&&0==t||2==r&&1==t?null:(0,N.jsxs)(u.A.Item,{className:"block-center py-2 mb-1",onClick:e.fnc,children:[(0,N.jsx)(m.gc,{icon:e.icon,iconClass:"text-muted fs-6"}),(0,N.jsx)("span",{className:"menu-title",children:e.name})]},t)))})]}),t&&Object.keys(t).map(((e,t)=>"public"==e?(0,N.jsx)(O,{name:"Public",val:e,index:t,handleAction:s,icon:"eye"},t):"private"==e?(0,N.jsx)(O,{name:"Private",val:e,index:t,handleAction:s,icon:"eye-slash"},t):"addTag"==e?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:[(0,N.jsx)(S,{name:"Add Tags",icon:"ri-price-tag-3-line",method:()=>s("addTag","selectedActionTags",[]),action:!0}),(0,N.jsx)(P.A,{className:"selectpicker selectpicker-sm",classNamePrefix:"selectpicker",isClearable:!0,options:n,onChange:e=>a(e,"action"),value:""}),i&&i.length>0?(0,N.jsx)("div",{className:"d-flex w-100 flex-wrap w-100 mt-1",children:i.map(((e,t)=>(0,N.jsxs)("div",{className:"badge bg-secondary rounded-pill text-gray-800 border me-1 mt-1 px-2 d-flex align-items-center",style:{top:0,maxWidth:"100%"},children:[(0,N.jsx)("span",{className:"text-break",style:{whiteSpace:"normal"},children:e}),(0,N.jsx)(g.A,{variant:"link",className:"btn p-0 ms-1 text-decoration-none",onClick:l(t,"action"),children:(0,N.jsx)(m.gc,{icon:"xmark",iconClass:"text-muted me-1"})})]})))}):null]}),1!=t?(0,N.jsx)("div",{className:"action_gap"}):null," "]}):"delete"==e?(0,N.jsx)(O,{name:"Delete",val:e,index:t,handleAction:s,icon:"trash-can"},t):null)),t&&Object.keys(t).length>0?t.hasOwnProperty("delete")?null:Object.keys(t).length<2?(0,N.jsxs)(u.A,{className:"w-100 text-center",children:[(0,N.jsx)(u.A.Toggle,{variant:"outline-secondary",id:"rule-dd",className:"p-0 border-0 arrow_disabled",children:(0,N.jsx)(m.gc,{type:"light",icon:"circle-plus",iconClass:"text-muted me-0 fs-4"})}),(0,N.jsx)(u.A.Menu,{className:"w-100 more_actions",children:d.map(((e,s)=>3!=s?0==s||1==s?t.hasOwnProperty("public")||t.hasOwnProperty("private")||1==r&&0==s||2==r&&1==s?null:(0,N.jsxs)(u.A.Item,{className:"block-center py-2 mb-1",onClick:e.fnc,children:[(0,N.jsx)(m.gc,{icon:e.icon,iconClass:"text-muted fs-6"}),(0,N.jsx)("span",{className:"menu-title",children:e.name})]}):t.hasOwnProperty(e.propName)?null:(0,N.jsxs)(u.A.Item,{className:"block-center py-2 mb-1",onClick:e.fnc,children:[(0,N.jsx)(m.gc,{icon:e.icon,iconClass:"text-muted fs-6"}),(0,N.jsx)("span",{className:"menu-title",children:e.name})]}):null))})]}):null:null]})}var B=s(73878),U=s(58423),q=s(64323),z=s(54480),W=s(66345),K=s(14313);var Y=s(49332),G=s(76955),Z=s(85608);class J extends a.Component{constructor(){super(...arguments),this.uppyUploader=new Y.A([".csv"]),this.state={text:"Upload Your File",name:""},this.handleFilePickerClick=()=>{const e=document.querySelector('input[type="file"]');e&&e.click()}}componentDidMount(){const{setProfanity:e}=this.props;this.uppyUploader.uppy.on("transloadit:result",((t,s)=>{this.setState({loading:!1,name:s.name},(()=>{e("".concat(Z.$r).concat(s.id,".").concat(s.ext))}))})),this.uppyUploader.uppy.on("upload-progress",((e,t)=>{this.state.text.includes("File")&&this.setState({text:"Loading..."})}))}componentWillUnmount(){this.uppyUploader.uppy.cancelAll()}render(){const{handleTrigger:e,onChangeProfanity:t,preProfanity:s,defaultProf:i,profName:a}=this.props,{text:l,name:n}=this.state;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:[(0,N.jsx)(S,{name:"Profanity Filter",desc:"Apply Profanity",icon:"ban",method:()=>e("profanity","profName",""),svgIcon:!0}),(0,N.jsxs)("div",{className:"d-flex justify-content-between mt-4",children:[(0,N.jsxs)("div",{className:"d-flex align-items-center w-75",children:[(0,N.jsx)(c.A.Check,{type:"switch",checked:s,onChange:t}),(0,N.jsx)("p",{className:"ms-2 mb-0 cursor-pointer text-ellipsis overflow-hidden w-75",children:s?"Predefined CSV":n||(a?a.split("/").pop():l)})]}),!s&&(0,N.jsx)(r.A,{placement:"top",overlay:(0,N.jsx)(d.A,{children:"Upload CSV"}),children:(0,N.jsx)(g.A,{variant:"outline-secondary",className:"f-center border rounded-circle h-30px w-30px p-0",onClick:()=>s?null:this.handleFilePickerClick(),children:(0,N.jsx)(m.gc,{icon:"arrow-up-to-line",iconClass:"me-0 mt-1 text-muted fs-6"})})}),(0,N.jsx)(r.A,{placement:"top",overlay:(0,N.jsx)(d.A,{children:"Download CSV"}),children:(0,N.jsx)(g.A,{variant:"outline-secondary",className:"f-center border rounded-circle h-30px w-30px p-0",onClick:()=>s?window.open(i):a?window.open(a):null,children:(0,N.jsx)(m.gc,{icon:"arrow-down-to-line",iconClass:"me-0 mt-1 text-muted fs-6"})})})]})]}),(0,N.jsx)("div",{}),(0,N.jsx)("div",{className:"d-none",children:(0,N.jsx)(G.zp,{uppy:this.uppyUploader.uppy,id:"upload_auto_csv"})}),(0,N.jsx)("div",{className:"action_gap"})]})}}const $=J;var Q=s(41397);const X=e=>{let{handleTrigger:t,selectedVal:s,method:i,isError:a,filter:l,name:n,icon:c}=e;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:[(0,N.jsx)(S,{name:"By ".concat(n),desc:"Enter ".concat(n),icon:c,method:()=>t(l,"handle"==l?"selectedHandle":"hashtag"==l?"selectedHashtag":"selectedKeyword","")}),(0,N.jsxs)("div",{className:"position-relative w-100",style:{zIndex:0},children:[(0,N.jsx)("span",{className:"h-34px w-34px text-gray-500 position-absolute top-0 start-0 translate-middle-x ms-3 ps-1 f-center",style:{zIndex:9},children:(0,N.jsx)(m.gc,{icon:c,iconClass:"text-muted"})}),(0,N.jsx)("input",{type:"text",className:"ps-7 fw-medium form-control form-control-sm ".concat(a?"is-invalid":""),value:s,onChange:e=>i(e)}),a&&(0,N.jsx)("div",{className:"invalid-feedback d-block",children:"Minimum ".concat("keyword"==l?"3":"2"," letters are required.")})]})]}),(0,N.jsx)("div",{className:"action_gap"})]})};s(66621);class ee extends a.Component{constructor(){super(...arguments),this.state={languageList:[]},this.onSearchLanguage=e=>{const{languageList:t}=this.props,s=t.filter((t=>t.language.toLowerCase().includes(e.target.value.toLowerCase())));this.setState({languageList:s})}}componentDidMount(){setTimeout((()=>{this.setState({languageList:this.props.languageList})}),100)}componentWillReceiveProps(e){this.setState({languageList:e.languageList})}render(){var e;const{handleTrigger:t,selectLanguage:s,onSelectLanguage:i,selectAllLanguage:a}=this.props,{languageList:l}=this.state;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"border-dashed border-1 border-gray rounded-2 p-3",children:[(0,N.jsx)(S,{name:"Language",desc:"Choose the required language",icon:"chart-network",svgIcon:!0,method:()=>t("language","selectLanguage",[])}),(0,N.jsxs)(u.A,{className:"w-100",autoClose:"outside",children:[(0,N.jsx)(u.A.Toggle,{variant:"outline-secondary",className:"border-gray w-100 d-flex align-items-center",children:(0,N.jsx)("label",{className:"form-check flex-grow-1 overflow-hidden align-items-center",htmlFor:"filter_".concat(null===s||void 0===s||null===(e=s[0])||void 0===e?void 0:e.language),children:(0,N.jsx)("span",{className:"form-check-label text-gray-800 text-ellipsis fw-medium ps-0",children:(null===s||void 0===s?void 0:s.length)>0?1==(null===s||void 0===s?void 0:s.length)?null===s||void 0===s?void 0:s[0]:"".concat(null===s||void 0===s?void 0:s.length," selected"):"Select Language"})})}),(0,N.jsxs)(u.A.Menu,{className:"w-100 overflow-auto",style:{maxHeight:400},children:[(0,N.jsxs)("div",{className:"d-flex align-items-center px-3 cursor-pointer mb-2",children:[(0,N.jsx)("label",{className:"form-check flex-grow-1 fw-normal fs-8",htmlFor:"tri-searchNetwork",children:"Select All"}),(0,N.jsx)("input",{className:"form-check-input",type:"checkbox",id:"tri-searchNetwork",onChange:e=>a(e)})]}),(0,N.jsx)("div",{className:"form-group mb-2",children:(0,N.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search your network",onChange:e=>this.onSearchLanguage(e)})}),l&&l.length>0?l.map((e=>(0,N.jsxs)("div",{className:"dropdown-item",children:[(0,N.jsx)("label",{className:"form-check flex-grow-1 overflow-hidden align-items-center",htmlFor:"tri-network-".concat(e.language),children:(0,N.jsx)("span",{className:"form-check-label text-gray-800 text-ellipsis fw-medium",children:e.language})}),(0,N.jsx)("input",{className:"form-check-input flex-shrink-0",type:"checkbox",id:"tri-network-".concat(e.language),checked:s.includes(e.language),onChange:t=>i(e.language)})]},e.language))):(0,N.jsx)("div",{className:"py-4",children:(0,N.jsx)("h6",{className:"text-center fs-9 mb-0 text-gray-700",children:"No Networks Available"})})]})]})]}),(0,N.jsx)("div",{className:"action_gap"})]})}}const te=ee;class se extends a.Component{constructor(){super(...arguments),this.state={ruleName:"",filterTabs:{},actionTabs:{},feedList:[],tagsList:[],selectedNetworks:[],selectedFeeds:[],selectedMedia:[],selectedTags:[],networkList:[],selectedVisibility:"",selectedActionTags:[],selectedActionVisibility:[],selectedAiType:[],selectedSentiment:[],selectedHandle:"",selectedHashtag:"",selectedKeyword:"",selectedDuplicateAsset:!1,isActionSelected:!1,isTriggerSelected:!1,isError:!1,ruleStatus:!0,isEdit:!1,loading:!1,ruleId:null,prevRuleName:"",preProfanity:!0,profName:"",defaultProf:"https://cloud.tagbox.com/react-app/media/downloads/profanity.csv",order:null,isShow:!1,handleError:!1,keyError:!1,hashError:!1,isChanged:!1,selectLanguage:[]},this.timeouts=[],this.getRuleData=()=>{const{ruleData:e}=this.props,{feedList:t,defaultProf:s}=this.state;var i={},a={};Object.keys(e).map((l=>{if(e[l]){if("name"==l&&this.setState({ruleName:e[l],prevRuleName:e[l]}),y.includes(l)){if(i[l]=!0,"feeds"==l){const s=t?t.filter((t=>e[l].includes(t.id))):[];this.setState({selectedFeeds:s})}if("networks"==l){const t=e[l].split(",").map(Number);this.setState({selectedNetworks:t})}if("assetsType"==l){const t=[];e[l].includes("1")&&t.push("1"),e[l].includes("3")&&t.push("3,5"),e[l].includes("2")&&t.push("2,4"),this.setState({selectedMedia:t})}"recommend"==l&&this.setState({selectedAiType:e[l].split(",")}),"sentiment"==l&&this.setState({selectedSentiment:e[l].split(",")}),"showHide"==l&&this.setState({selectedVisibility:String(e[l])}),"tags"==l&&this.setState({selectedTags:e[l].split(",")}),"handle"==l&&this.setState({selectedHandle:e[l]}),"hashtag"==l&&this.setState({selectedHashtag:e[l]}),"keyword"==l&&this.setState({selectedKeyword:e[l]}),"duplicateAsset"==l&&this.setState({selectedDuplicateAsset:!0}),"profanity"==l&&this.setState({preProfanity:e.profanity==s,profName:e.profanity==s?"":e.profanity})}"actions"==l&&e[l].map((e=>{1==e.type&&(a.public=!0),2==e.type&&(a.private=!0),3==e.type&&(a.addTag=!0,this.setState({selectedActionTags:e.value.split(",")})),4==e.type&&(a.delete=!0)}))}})),this.setState({filterTabs:i,actionTabs:a,ruleName:e.name,ruleId:e.id,isActionSelected:!0,isTriggerSelected:!0,ruleStatus:e.status,isEdit:!0,order:e.order})},this.handleTrigger=(e,t,s)=>{var{filterTabs:a,handleError:l,keyError:n,hashError:c}=this.state;a[e]?(delete a[e],this.setState((0,i.A)({filterTabs:a,[t]:s,hashError:"hashtag"!=e&&c,keyError:"keyword"!=e&&n,handleError:"handle"!=e&&l,isChanged:!0},"profName"==t?{preProfanity:!0}:{}),(()=>this.enableAction()))):"duplicateAsset"==e?(a[e]=!0,this.setState({filterTabs:a,selectedDuplicateAsset:!0,isChanged:!0},(()=>this.enableAction()))):(a[e]=!0,this.setState({filterTabs:a,isChanged:!0}),"profanity"==e&&this.enableAction())},this.handleAction=(e,t,s)=>{var{actionTabs:a}=this.state;a[e]?delete a[e]:a[e]=!0,this.setState((0,i.A)({actionTabs:a,isChanged:!0},t&&"delete"!=e?{[t]:s}:{}),(()=>this.enableCreateRule()))},this.setNetworks=()=>{const{networks:e}=this.props;this.setState({networkList:e.filter((e=>![33,34,35,0].includes(e.id)))})},this.setFeeds=()=>{const{feeds:e}=this.props;this.setState({feedList:e.filter((e=>0!=e.networkId))})},this.enableAction=()=>{const{selectedNetworks:e,selectedFeeds:t,selectedMedia:s,selectedTags:i,selectedVisibility:a,selectedHandle:l,selectedHashtag:n,selectedKeyword:c,selectedDuplicateAsset:r,selectedAiType:d,selectedSentiment:o,preProfanity:h,filterTabs:m,profName:u,handleError:g,keyError:p,hashError:x,selectLanguage:f}=this.state;!(f.length>0||e.length>0||t.length>0||s.length>0||i.length>0||a.length>0||l||c||n||r||d.length>0||o.length>0||m.profanity&&(h||u))||g||p||x?this.setState({isTriggerSelected:!1}):this.setState({isTriggerSelected:!0})},this.setDefRule=e=>{const{isEdit:t}=this.state;if(1==e){this.resetRule(t);const e=setTimeout((()=>{this.setState({filterTabs:{duplicateAsset:!0},selectedDuplicateAsset:!0,isTriggerSelected:!0,actionTabs:{private:!0},isActionSelected:!0,ruleName:"Bye-bye Duplicates",isChanged:!0})}),10);this.timeouts.push(e)}else if(2==e){this.resetRule(t);const e=setTimeout((()=>{this.setState({filterTabs:{sentiment:!0},selectedSentiment:["3"],isTriggerSelected:!0,actionTabs:{private:!0},isActionSelected:!0,ruleName:"Negativity Neutralizer",isChanged:!0})}),10);this.timeouts.push(e)}else if(3==e){this.resetRule(t);const e=setTimeout((()=>{this.setState({filterTabs:{recommend:!0},selectedAiType:["1"],isTriggerSelected:!0,actionTabs:{public:!0},isActionSelected:!0,ruleName:"AI Content Spotlight",isChanged:!0})}),10);this.timeouts.push(e)}else if(null==e){this.resetRule(t);const e=setTimeout((()=>{this.setState({filterTabs:{},selectedAiType:[],isTriggerSelected:!1,actionTabs:{},isActionSelected:!1,ruleName:"",isChanged:!1})}),10);this.timeouts.push(e)}},this.onSelectLanguage=e=>{let{selectLanguage:t}=this.state;t.includes(e)?t=t.filter((t=>t!==e)):t.push(e),this.setState({selectLanguage:t,isChanged:!0},(()=>this.enableAction()))},this.selectAllLanguage=e=>{const{languageData:t}=this.props;var s=[];e.target.checked&&(s=t.map((e=>e.language))),this.setState({selectLanguage:s,isChanged:!0},(()=>this.enableAction()))},this.onSelectNetwork=e=>{let{selectedNetworks:t}=this.state;t.includes(e)?t=t.filter((t=>t!==e&&(18!==e||2!==t))):t.push(e,...18===e?[2]:[]),this.setState({selectedNetworks:t,isChanged:!0},(()=>this.enableAction()))},this.selectAllNetworks=e=>{const{networkList:t}=this.state;var s=[];e.target.checked&&(s=t.map((e=>e.id))).push(2),this.setState({selectedNetworks:s,isChanged:!0},(()=>this.enableAction()))},this.onChangeRuleName=e=>{""==e.target.value?this.setState({ruleName:e.target.value,isError:!0}):this.setState({ruleName:e.target.value,isError:!1,isChanged:!0})},this.onChangeRuleStatus=e=>this.setState({ruleStatus:!this.state.ruleStatus,isChanged:!0}),this.onSelectFeed=e=>{let{selectedFeeds:t}=this.state;t.includes(e)?t=t.filter((t=>t!=e)):t.push(e),this.setState({selectedFeeds:t,isChanged:!0},(()=>this.enableAction()))},this.selectAllFeeds=e=>{const{feedList:t}=this.state;this.setState({selectedFeeds:e.target.checked?t:[],isChanged:!0},(()=>this.enableAction()))},this.onSelectMediaType=e=>{let{selectedMedia:t}=this.state;t.includes(e)?t=t.filter((t=>t!=e)):t.push(e),this.setState({selectedMedia:t,isChanged:!0},(()=>this.enableAction()))},this.selectAllMediaTypes=e=>this.setState({selectedMedia:e.target.checked?["1","2,4","3,5"]:[],isChanged:!0},(()=>this.enableAction())),this.onSelectAiType=e=>{let{selectedAiType:t}=this.state;t.includes(e)?t=t.filter((t=>t!=e)):t.push(e),this.setState({selectedAiType:t,isChanged:!0},(()=>this.enableAction()))},this.selectAllAiTypes=e=>this.setState({selectedAiType:e.target.checked?["1","2","3"]:[],isChanged:!0},(()=>this.enableAction())),this.onSelectSentiment=e=>{let{selectedSentiment:t}=this.state;t.includes(e)?t=t.filter((t=>t!=e)):t.push(e),this.setState({selectedSentiment:t,isChanged:!0},(()=>this.enableAction()))},this.selectAllSentiments=e=>this.setState({selectedSentiment:e.target.checked?["1","2","3"]:[],isChanged:!0},(()=>this.enableAction())),this.onSelectTag=(e,t)=>{const{selectedTags:s,selectedActionTags:i}=this.state;"filter"==t?(s.push(e.value),this.setState({selectedTags:s,isChanged:!0},(()=>this.enableAction()))):(i.push(e.value),this.setState({selectedActionTags:i,isChanged:!0},(()=>this.enableCreateRule())))},this.onTagRemove=(e,t)=>s=>{let{selectedTags:i,selectedActionTags:a}=this.state;"filter"==t?(i.splice(e,1),this.setState({selectedTags:i,isChanged:!0},(()=>this.enableAction()))):(a.splice(e,1),this.setState({selectedActionTags:a,isChanged:!0},(()=>this.enableCreateRule())))},this.onSelectVisibility=(e,t)=>{"filter"==t?this.setState({selectedVisibility:e,isChanged:!0},(()=>this.enableAction())):this.setState({selectedActionVisibility:e,isChanged:!0},(()=>this.enableCreateRule()))},this.onChangeHandle=e=>this.setState({selectedHandle:e.target.value,handleError:String(e.target.value).length<2,isChanged:!0},(()=>this.enableAction())),this.onChangeHashtag=e=>this.setState({selectedHashtag:e.target.value,hashError:String(e.target.value).length<2,isChanged:!0},(()=>this.enableAction())),this.onChangeKeyword=e=>this.setState({selectedKeyword:e.target.value,keyError:String(e.target.value).length<3,isChanged:!0},(()=>this.enableAction())),this.onChangeProfanity=()=>this.setState((e=>({preProfanity:!e.preProfanity,isChanged:!0})),(()=>this.enableAction())),this.setProfanity=e=>this.setState({profName:e,isChanged:!0},(()=>this.enableAction())),this.enableCreateRule=()=>{const{selectedActionTags:e,selectedActionVisibility:t,isTriggerSelected:s,actionTabs:i}=this.state;s&&(e.length>0||i.public||i.delete||i.private)?this.setState({isActionSelected:!0}):this.setState({isActionSelected:!1})},this.confirmReset=()=>{x().fire({title:"Are you sure?",text:"All changes will be removed.",icon:"warning",showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonText:"Reset",confirmButtonColor:"var(--bs-success)"}).then((e=>{e.value?this.resetRule():e.dismiss}))},this.resetRule=e=>{this.setState({ruleName:"",filterTabs:{},actionTabs:{},selectedNetworks:[],selectedFeeds:[],selectedMedia:[],selectedTags:[],selectedVisibility:"",selectedActionTags:[],selectedActionVisibility:[],selectedAiType:[],selectedSentiment:[],selectedHandle:"",selectedHashtag:"",selectedKeyword:"",selectedDuplicateAsset:!1,isActionSelected:!1,isTriggerSelected:!1,isError:!1,ruleStatus:!0,isEdit:!!e,loading:!1,ruleId:e?this.state.ruleId:null,prevRuleName:e?this.state.prevRuleName:"",preProfanity:!0,profName:"",defaultProf:"".concat(W.kuD,"app/assets/media/downloads/profanity.csv"),isChanged:!1}),(0,A.C2)()&&(0,A.Fl)("hide")},this.saveRule=()=>{const{planId:e,navigate:t}=this.props;57==e?((0,A.Fl)("hide"),j(t)):(window.saveBar.set({saveAction:{loading:!0}}),this.onSubmitData())},this.onSubmitData=()=>{const{ruleName:e,isEdit:t,prevRuleName:s}=this.state,{ruleList:a,modifyRule:l}=this.props;if(e.length>0){const n=a&&(null===a||void 0===a?void 0:a.length)>0?a.filter((t=>String(t.name).toLowerCase()==String(e).toLowerCase())):[];if(n&&n.length>0&&(!t||n[0].name!=s))(0,A.r$)("Rule name already exists. ");else{l(this.createPayload(),!1,(()=>this.setState((0,i.A)({isChanged:!1},t?{prevRuleName:e}:{}))))}}else this.setState({isError:!0})},this.createPayload=()=>{const{actionTabs:e,filterTabs:t,ruleName:s,selectedFeeds:a,selectedNetworks:l,selectedTags:n,selectedVisibility:c,selectedMedia:r,selectedActionTags:d,selectedHandle:o,selectedHashtag:h,selectedKeyword:m,ruleStatus:u,selectedDuplicateAsset:g,selectedAiType:p,selectedSentiment:x,isEdit:f,ruleId:b,preProfanity:v,profName:y,defaultProf:j,order:w,selectLanguage:N}=this.state,{ruleList:k}=this.props;let S=[],A=[],T=[],C=[],F="",L=[],I="",D="",R="",P=0,E=[],_=[],M="",H=[];Object.keys(t).map((e=>{"feeds"==e&&a.length>0&&a.map((e=>S.push(e.id))),"networks"==e&&l.length>0&&l.map((e=>A.push(e))),"language"==e&&N.length>0&&N.map((e=>H.push(e))),"tags"==e&&n.length>0&&n.map((e=>T.push(e))),"assetsType"==e&&r.length>0&&r.map((e=>C.push(e))),"showHide"==e&&c.length>0&&(F=c),"handle"==e&&o&&(I=o),"hashtag"==e&&h&&(D=h),"keyword"==e&&m&&(R=m),"duplicateAsset"==e&&g&&(P=1),"recommend"==e&&p.length>0&&p.map((e=>E.push(e))),"sentiment"==e&&x.length>0&&x.map((e=>_.push(e))),"profanity"==e&&(v||y)&&(M=v?j:y)})),Object.keys(e).map((e=>{let t="";"addTag"==e&&d.length>0&&(d.map((e=>t+=e+",")),t=t.slice(0,-1),L.push({type:3,value:t})),"public"==e&&L.push({type:1,value:"1"}),"private"==e&&L.push({type:2,value:"1"}),"delete"==e&&L.push({type:4,value:""})}));let O={name:s,status:u?1:0,feeds:String(S),networks:String(A),tags:String(T),assetsType:String(C),showHide:Number(F),handle:I,hashtag:D,keyword:R,duplicateAsset:P,recommend:String(E),sentiment:String(_),profanity:String(M),actions:L,actionsType:1,order:k.length,language:String(H)};return O=f?(0,i.A)((0,i.A)({},O),{},{id:b,actionsType:2,order:w}):O,O}}componentDidMount(){const{networks:e,getNetworks:t,feeds:s,getFeeds:i,getTags:a,tagsList:l,ownerId:n,languageData:c,getLanguage:r}=this.props;e?this.setNetworks():t(),s?this.setFeeds():i(),l.length<=0&&a(n),c||r(),(0,A.C2)()&&(window.addEventListener("onSaveClicked",this.saveRule),window.addEventListener("onDiscardClicked",this.resetRule))}componentDidUpdate(e,t){const{defRule:s,defIndex:i,ruleData:a,reset:l,editId:n,editStatus:c,editOrder:r}=this.props,{isTriggerSelected:d,isActionSelected:o,isChanged:h}=this.state;e.networks!=this.props.networks&&this.setNetworks(),e.feeds!=this.props.feeds&&this.setFeeds(),0==e.defRule&&1==s&&0!=i&&this.setDefRule(i),n==this.state.ruleId&&null!=c&&e.editStatus!=c&&this.setState({ruleStatus:c}),n==this.state.ruleId&&null!=r&&e.editOrder!=r&&this.setState({order:r}),!(0,Q.isEqual)(e.ruleData,a)&&Object.keys(a).length>0&&this.getRuleData(),0==e.reset&&1==l&&this.resetRule(),(0,A.C2)()&&(t.isChanged!=h&&h&&((0,A.Fl)(),window.saveBar.set({saveAction:{disabled:!0}})),t.isTriggerSelected==d&&t.isActionSelected==o||!h||(d&&o?window.saveBar.set({saveAction:{disabled:!1}}):window.saveBar.set({saveAction:{disabled:!0}})))}componentWillUnmount(){(0,A.C2)()&&(window.removeEventListener("onSaveClicked",this.saveRule),window.removeEventListener("onDiscardClicked",this.resetRule)),this.timeouts.forEach((e=>clearTimeout(e))),this.timeouts=[]}render(){const{filterTabs:e,actionTabs:t,ruleName:s,isError:i,ruleStatus:a,isEdit:l,duplicateAssets:c,networkList:r,feedList:d,preProfanity:o,defaultProf:h,profName:p,isTriggerSelected:x,isActionSelected:f,isShow:b,handleError:v,keyError:y,hashError:w,isChanged:S}=this.state,{tagsList:T,spinner:L,planId:I,navigate:P,languageData:O}=this.props;return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"d-flex flex-column flex-grow-1 justify-content-between mb-10 pb-7 overflow-auto rule_action mt-5 mt-lg-0",children:[(0,N.jsxs)("div",{className:"mb-8 mx-auto w-100 py-lg-10 py-4 px-4",style:{maxWidth:"350px"},children:[(0,N.jsxs)("div",{className:"mb-2 w-100",children:[(0,N.jsx)("input",{type:"text",className:"form-control ".concat(i?"is-invalid":""),placeholder:"Enter rule name",onChange:this.onChangeRuleName,value:s}),i&&(0,N.jsx)("div",{className:"invalid-feedback d-block",children:"Enter rule name."})]}),(0,N.jsxs)("label",{className:"form-check form-switch mb-3 fw-medium mb-8",children:[(0,N.jsx)("input",{className:"form-check-input me-2",type:"checkbox",checked:a,onChange:this.onChangeRuleStatus}),"Rule status"]}),e&&Object.keys(e).length>0?null:(0,N.jsxs)(u.A,{className:"w-100 add_rule",children:[(0,N.jsxs)(u.A.Toggle,{variant:"outline-secondary",id:"rule-dd",className:"border border-gray border-1 w-100 p-4 arrow_disabled rounded-2",children:[(0,N.jsx)(m.gc,{icon:"plus",iconClass:"text-muted"}),(0,N.jsx)("span",{className:"fs-9 fw-medium",children:"Add trigger"})]}),(0,N.jsx)(k,{handleTrigger:this.handleTrigger,filterTabs:e,duplicateAssets:c})]}),e&&Object.keys(e).map((e=>"language"==e?(0,N.jsx)(te,{handleTrigger:this.handleTrigger,selectLanguage:this.state.selectLanguage,onSelectLanguage:this.onSelectLanguage,languageList:O,selectAllLanguage:this.selectAllLanguage},e):"networks"==e?(0,N.jsx)(C,{handleTrigger:this.handleTrigger,selectedNetworks:this.state.selectedNetworks,onSelectNetwork:this.onSelectNetwork,networkList:r,selectAllNetworks:this.selectAllNetworks},e):"feeds"==e?(0,N.jsx)(D,{handleTrigger:this.handleTrigger,selectedFeeds:this.state.selectedFeeds,onSelectFeed:this.onSelectFeed,feedList:d,selectAllFeeds:this.selectAllFeeds},e):"assetsType"==e?(0,N.jsx)(R,{handleTrigger:this.handleTrigger,selectedMedia:this.state.selectedMedia,onSelectMediaType:this.onSelectMediaType,selectAllMediaTypes:this.selectAllMediaTypes}):"tags"==e?(0,N.jsx)(E,{handleTrigger:this.handleTrigger,selectedTags:this.state.selectedTags,onSelectTag:this.onSelectTag,onTagRemove:this.onTagRemove,tagsList:T},e):"showHide"==e?(0,N.jsx)(_,{handleTrigger:this.handleTrigger,onSelectVisibility:this.onSelectVisibility,selectedVisibility:this.state.selectedVisibility},e):"handle"==e?(0,N.jsx)(X,{filter:e,handleTrigger:this.handleTrigger,method:this.onChangeHandle,selectedVal:this.state.selectedHandle,isError:v,name:"Handle",icon:"at"},e):"hashtag"==e?(0,N.jsx)(X,{filter:e,handleTrigger:this.handleTrigger,method:this.onChangeHashtag,selectedVal:this.state.selectedHashtag,isError:w,name:"Hashtag",icon:"hashtag"},e):"keyword"==e?(0,N.jsx)(X,{filter:e,handleTrigger:this.handleTrigger,method:this.onChangeKeyword,selectedVal:this.state.selectedKeyword,isError:y,name:"Keyword",icon:"text"},e):"duplicateAsset"==e?(0,N.jsx)(M,{handleTrigger:this.handleTrigger,duplicateAssets:c},e):"recommend"==e?(0,N.jsx)(F,{handleTrigger:this.handleTrigger,selectedAiType:this.state.selectedAiType,onSelectAiType:this.onSelectAiType,selectAllAiTypes:this.selectAllAiTypes}):"sentiment"==e?(0,N.jsx)(H,{handleTrigger:this.handleTrigger,selectedSentiment:this.state.selectedSentiment,onSelectSentiment:this.onSelectSentiment,selectAllSentiments:this.selectAllSentiments}):"profanity"==e?(0,N.jsx)($,{handleTrigger:this.handleTrigger,onChangeProfanity:this.onChangeProfanity,preProfanity:o,defaultProf:h,profName:p,setProfanity:this.setProfanity}):null)),e&&Object.keys(e).length>0&&Object.keys(e).length<13?(0,N.jsxs)(u.A,{className:"w-100 text-center add_more_rule",show:b,onToggle:t=>this.setState({isShow:12!=Object.keys(e).length&&t}),children:[(0,N.jsx)(u.A.Toggle,{variant:"outline-secondary",id:"rule-dd",className:"p-0 border-0 arrow_disabled d-flex m-auto",children:(0,N.jsx)(m.gc,{type:"light",icon:"circle-plus",iconClass:"text-muted me-0 fs-4"})}),(0,N.jsx)(k,{handleTrigger:this.handleTrigger,filterTabs:e,duplicateAssets:c})]}):null,(0,N.jsx)(V,{actionTabs:t,handleAction:this.handleAction,isTriggerSelected:this.state.isTriggerSelected,selectedActionTags:this.state.selectedActionTags,onSelectTag:this.onSelectTag,onTagRemove:this.onTagRemove,tagsList:T,selectedVisibility:this.state.selectedVisibility})]}),(0,N.jsx)("div",{className:"p-4 bg-body position-sticky bottom-0",children:(0,N.jsx)("div",{className:"my-0 border border-warning alert alert-warning",children:"Note*: AI-driven rules may take some time to activate. During this period, affected posts will be temporarily moved to a private tab. Once activated, the rules will adhere to the established guidelines."})}),!(0,A.C2)()&&(0,N.jsx)(n.A.Footer,{className:"f-center justify-content-end position-absolute bottom-0 start-0 w-100 py-4 px-4 px-xl-6 bg-body",children:(0,N.jsxs)("div",{className:"block-center d-flex align-items-center justify-content-between w-100",children:[(0,N.jsx)("div",{children:(0,N.jsxs)("span",{className:"d-flex align-items-center text-muted py-1 px-3 rounded-pill badge-light-primary",children:["Need help with Auto-Pilot?",(0,N.jsxs)("span",{className:"cursor-pointer f-center ms-1 d-flex btn btn-link",onClick:A.tk,children:["Talk to Us! ",(0,N.jsx)("strong",{className:"ms-1",children:"24/7"})]})]})}),(0,N.jsxs)(g.A,{type:"button",className:"btn btn-primary btn-min-w ".concat(L?"spinner":""),disabled:!(x&&f),onClick:()=>57==I?j(P):this.onSubmitData(),children:[l?"Update":"Create"," rule"]})]})})]})})}}const ie=(0,B.Ng)((e=>{var t,s,i,a,l;return{feeds:null===(t=e.manageFeeds)||void 0===t?void 0:t.feeds,networks:null===(s=e.addFeedReducer)||void 0===s||null===(i=s.addFeedNetworks)||void 0===i?void 0:i.networks,tagsList:null===(a=e.tags)||void 0===a?void 0:a.tagsList,languageData:null===(l=e.manageFeeds)||void 0===l?void 0:l.languageData}}),(e=>({getNetworks:()=>e((0,U.Ux)()),getFeeds:()=>e((0,q.LF)()),getTags:t=>e((e=>t=>{let s=[];const i=W.onz?W.kuD:"".concat(W.kuD,"test/tagshop/");(new K.A).get("".concat(i,"media/").concat(e,"/tags_").concat(e,".json")).then((e=>{const{data:i}=e;s=Object.values(i).filter((e=>""!==e)).map((e=>({value:e,label:e}))),t({type:z.ES0,payload:s})})).catch((e=>{t({type:z.ES0,payload:s})}))})(t)),getLanguage:()=>e((0,q.Z0)())})))(se);var ae=s(59051),le=s.n(ae);function ne(){return(0,N.jsxs)("div",{children:[(0,N.jsx)("div",{className:"w-100",children:(0,N.jsx)("div",{className:"border-bottom p-4 h-56px f-center justify-content-start",children:(0,N.jsx)("div",{className:"sk_line w-100px d-block h-14px"})})}),(0,N.jsxs)("div",{className:"d-flex flex-row align-items-center border-bottom py-3 px-4 h-46px",children:[(0,N.jsx)("div",{className:"w-25",children:(0,N.jsx)("div",{className:"sk_line h-14px w-90px"})}),(0,N.jsx)("div",{className:"w-25",children:(0,N.jsx)("div",{className:"sk_line h-14px w-40px"})}),(0,N.jsx)("div",{className:"w-25",children:(0,N.jsx)("div",{className:"sk_line h-14px w-80px"})}),(0,N.jsx)("div",{className:"w-25 f-center justify-content-end",children:(0,N.jsx)("div",{className:"sk_line h-14px w-60px"})})]}),(0,A.OZ)(3).map(((e,t)=>(0,N.jsxs)("div",{className:"d-flex align-items-center flex-row border-bottom py-2 px-4 h-48px",children:[(0,N.jsx)("div",{className:"w-25",children:(0,N.jsx)("div",{className:"d-flex align-items-center flex-row",children:(0,N.jsx)("div",{className:"sk_line w-60px h-12px pe-4"})})}),(0,N.jsx)("div",{className:"w-25",children:(0,N.jsx)("div",{className:"sk_line w-32px h-12px me-2"})}),(0,N.jsx)("div",{className:"w-25",children:(0,N.jsx)("div",{className:"pe-3",children:(0,N.jsx)("div",{className:"sk_line w-90px h-12px"})})}),(0,N.jsx)("div",{className:"w-25 f-center justify-content-end",children:(0,N.jsx)("div",{className:"sk_rect h-20px w-20px"})})]})))]})}s(1391);var ce=s(26787),re=s(42690);class de extends a.Component{constructor(e){super(e),this.timeouts=[],this.getRules=e=>{e||this.setState({loading:!0}),(new K.A).get("".concat(W.OYq,"/").concat(this.state.wallId)).then((e=>{const{responseData:t}=e.data;this.setState({ruleList:t,loading:!1})}))},this.modifyRule=(e,t,s)=>{const{editId:a,wallId:l}=this.state,n=(0,A.HA)();t||this.setState({spinner:!0}),3==e.actionsType&&this.setState({isStatus:!0}),(new K.A).post("".concat(W.izg),(0,i.A)((0,i.A)({},e),{},{wallId:l})).then((t=>{const{responseMessage:i}=t.data;(0,A.C2)()&&(window.saveBar.set({saveAction:{loading:!1}}),(0,A.Fl)("hide")),(0,A._q)(n,"success",i),1==e.actionsType?this.setState({reset:!0,spinner:!1,isStatus:!1,activeDefIndex:null},(()=>{const e=setTimeout((()=>{this.setState({reset:!1})}),100);this.timeouts.push(e)})):3==e.actionsType&&e.id==a?this.setState({editStatus:e.status,spinner:!1,isStatus:!1,activeDefIndex:null},(()=>{const e=setTimeout((()=>{this.setState({editStatus:null})}),10);this.timeouts.push(e)})):this.setState({spinner:!1,isStatus:!1,activeDefIndex:null},(()=>s?s():null)),this.getRules(!0)})).catch((e=>{(0,A.C2)()&&(window.saveBar.set({saveAction:{loading:!1}}),(0,A.Fl)("hide")),this.setState({spinner:!1}),(0,A._q)(n,"error","Some error occured, please try again later.")}))},this.confirmDelete=e=>{x().fire({title:"Are you sure?",text:"Are you sure you want to delete this rule?",icon:"warning",showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete"}).then((t=>{t.value?this.deleteRule(e):t.dismiss}))},this.deleteRule=e=>{let{ruleList:t,editId:s,wallId:i}=this.state;const a=(0,A.HA)();this.setState({isDelete:!0}),(new K.A).delete("".concat(W.rkf,"/").concat(e,"/").concat(i)).then((i=>{const{responseMessage:l}=i.data;(0,A._q)(a,"success",l),e==s&&this.setState({reset:!0},(()=>{const e=setTimeout((()=>{this.setState({reset:!1})}),100);this.timeouts.push(e)})),this.setState({ruleList:t.filter((t=>t.id!=e)),isDelete:!1})})).catch((e=>{(0,A._q)(a,"error","Some error occured, please try again later.")}))},this.changeStatus=(e,t)=>{const s={id:e,status:Number(t),actionsType:3};this.modifyRule(s,!0)},this.setDefault=e=>{this.setState({defRule:!0,defIndex:e,activeDefIndex:e},(()=>{const e=setTimeout((()=>{this.setState({defRule:!1,defIndex:0})}),200);this.timeouts.push(e)}))},this.state={defRule:!1,defIndex:0,ruleList:[],loading:!1,ruleData:{},reset:!1,wallId:localStorage.getItem("wallId"),spinner:!1,editId:null,editStatus:null,editOrder:null,isDelete:!1,isStatus:!1,activeDefIndex:null},this.onDragEnd=this.onDragEnd.bind(this)}componentDidMount(){const{ruleList:e}=this.state;(null===e||void 0===e?void 0:e.length)<=0&&this.getRules()}componentDidUpdate(e){var t,s,i;(null===(t=this.props.manageFeeds)||void 0===t?void 0:t.loading)!=(null===(s=e.manageFeeds)||void 0===s?void 0:s.loading)&&1!=(null===(i=this.props.manageFeeds)||void 0===i?void 0:i.loading)&&this.setState({reset:!0,wallId:localStorage.getItem("wallId")},(()=>{const e=setTimeout((()=>{this.setState({reset:!1})}),100);this.timeouts.push(e),this.getRules()}))}onDragEnd(e){if(!e.destination)return;const t=((e,t,s)=>{const i=Array.from(e),[a]=i.splice(t,1);return i.splice(s,0,a),i})(this.state.ruleList,e.source.index,e.destination.index),s=(0,A.HA)();let i=[];t.map(((e,t)=>i.push({[e.id]:t}))),(new K.A).post(W.w3J,{rules:i,wallId:this.state.wallId}).then((e=>{let t=i.find((e=>e.hasOwnProperty(this.state.editId)));t&&this.setState({editOrder:t[this.state.editId]},(()=>{const e=setTimeout((()=>{this.setState({editOrder:null})}),10);this.timeouts.push(e)})),this.getRules(!0);const{responseMessage:a}=e.data;(0,A._q)(s,"success",a)})).catch((e=>{this.getRules(!0),(0,A._q)(s,"error","Some error occured, please try again later.")})),this.setState({ruleList:t})}componentWillUnmount(){this.timeouts.forEach((e=>clearTimeout(e))),this.timeouts=[]}render(){var e,t,s;const{defRule:u,defIndex:g,ruleList:p,loading:x,ruleData:y,reset:w,spinner:k,editId:S,editStatus:T,editOrder:C,isDelete:F,isStatus:L,activeDefIndex:I}=this.state,{planId:D,navigate:R,ownerId:P,allWalls:E,userData:_}=this.props,M=null!==(e=null===E||void 0===E?void 0:E.find((e=>e.id==localStorage.getItem("wallId"))))&&void 0!==e?e:{},H=null===_||void 0===_?void 0:_.truSense,O=(0,A.C2)();return(0,N.jsxs)(N.Fragment,{children:[null!==E&&void 0!==E&&E.length?(0,N.jsx)(ce.A,{showGallerySwitcher:!1,crumbs:[{name:null!==(t=null===M||void 0===M?void 0:M.name)&&void 0!==t?t:"",icon:"grid-2-plus",imgUrl:null!==(s=null===M||void 0===M?void 0:M.thumbnail)&&void 0!==s?s:""},{name:"Home",link:"/home"},{name:"Content Gallery",link:"/content"},{name:null===M||void 0===M?void 0:M.name,link:"/content/moderation/".concat(null===M||void 0===M?void 0:M.id)},{name:"Autopilot",link:"/autopilot"}]},null===M||void 0===M?void 0:M.id):null,(0,N.jsxs)("div",{className:"custom-side-menu d-flex ".concat(O?"isShopify":""),children:[(0,N.jsx)(re.A,{getWallData:M}),(0,N.jsx)("div",{className:"custom-main-content",children:(0,N.jsx)("div",{className:"d-flex flex-column flex-column-fluid w-100 full-content",children:(0,N.jsxs)(l.A,{fluid:!0,className:O?"":"container-autopilot",children:[(0,N.jsxs)("div",{className:"d-flex justify-content-between position-relative w-100",children:[(0,N.jsx)("div",{className:"mb-sm-3 mb-lg-5 mb-xl-5 mb-md-4 mb-3",children:(0,N.jsx)("h3",{className:"text-capitalize fs-5 cont-title mb-0",children:"Auto Pilot"})}),(0,N.jsx)("div",{onClick:()=>R("/content/moderation/".concat(localStorage.getItem("wallId"))),style:{right:"0",top:"10px",zIndex:"8",height:"20px",width:"20px",display:"flex",alignItems:"center",justifyContent:"center"},className:"position-absolute cursor-pointer rounded-2 text-muted",children:(0,N.jsx)(m.gc,{icon:"xmark",iconClass:"cursor-pointer fs-3"})})]}),(0,N.jsx)(n.A,{className:"a_header_",children:(0,N.jsxs)(n.A.Body,{className:"d-flex flex-wrap flex-lg-nowrap align-items-start p-0 aside_body flex-lg-row-reverse align-items-stretch",children:[(0,N.jsxs)("div",{className:"d-lg-flex flex-column flex-shrink-0 overflow-auto rule_guide w-100",children:[x?(0,N.jsx)(ne,{}):0==(null===p||void 0===p?void 0:p.length)?(0,N.jsxs)(a.Fragment,{children:[(0,N.jsx)("div",{className:"w-100",children:(0,N.jsx)("h4",{className:"border-bottom p-4 fs-6 mb-0",children:"Here's all that you can do:"})}),(0,N.jsx)("div",{className:"px-5 mt-3",children:null!==f&&void 0!==f&&f.length?f.map(((e,t)=>(0,N.jsxs)("div",{className:" rule-box d-flex flex-column position-relative pb-2",children:[(0,N.jsxs)("h5",{className:"d-flex fs-8 mb-0",children:[(0,N.jsx)("span",{className:"bg-body d-inline-block",style:{zIndex:"1"},children:(0,N.jsx)("div",{className:"f-center me-2 h-26px w-26px rounded-1 bg-dark me-2",style:{},children:(0,N.jsx)(m.gc,{icon:e.icon,iconClass:"text-light"})})}),e.title]}),(0,N.jsx)("p",{className:"fs-8 ps-5 ms-3",children:e.text})]},t))):null})]},0):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"w-100",children:(0,N.jsx)("h4",{className:"border-bottom p-4 fs-6 mb-0",children:"Manage rules"})}),(0,N.jsx)("div",{className:"d-flex flex-row border-bottom py-3 px-4",children:null!==v&&void 0!==v&&v.length?v.map(((e,t)=>(0,N.jsx)("div",{className:"fw-semibold ".concat(3===t?"text-end":""),style:{width:"".concat(t%2?"15":"35","%")},children:e.heading},t))):null}),(0,N.jsx)(h.JY,{onDragEnd:this.onDragEnd,children:(0,N.jsx)(h.gL,{droppableId:"droppable",isDropDisabled:(null===p||void 0===p?void 0:p.length)<2||57==D,children:(e,t)=>(0,N.jsxs)("div",(0,i.A)((0,i.A)({},e.droppableProps),{},{ref:e.innerRef,children:[null===p||void 0===p?void 0:p.map(((e,t)=>(0,N.jsx)(h.sx,{draggableId:String(e.id),index:t,children:(s,a)=>{return(0,N.jsx)("div",(0,i.A)((0,i.A)((0,i.A)({ref:s.innerRef},s.draggableProps),s.dragHandleProps),{},{style:(a.isDragging,l=s.draggableProps.style,(0,i.A)({userSelect:"none",borderBottom:"1px solid #F5F5F5"},l)),className:"bg-body border-bottom",children:(0,N.jsxs)("div",{className:"d-flex align-items-center flex-row py-2 px-4 pe-1",children:[(0,N.jsxs)("div",{className:"d-flex p-1",style:{width:"35%"},children:[(0,N.jsx)(m.gc,{icon:"grip-dots-vertical",iconClass:"me-2 mt-1 text-muted"}),(0,N.jsx)("span",{className:"d-inline-block text-break text-dark",children:e.name})]}),(0,N.jsx)("div",{className:"p-1",style:{width:"15%"},children:(0,N.jsx)(c.A.Check,{type:"switch",checked:e.status,onChange:()=>57==D?j(R):this.changeStatus(e.id,!e.status),disabled:L})}),(0,N.jsx)("div",{className:"p-1",style:{width:"35%"},children:e.lastExecuted?le().unix(e.lastExecuted).format("DD MMM YYYY"):"--"}),(0,N.jsxs)("div",{className:"d-flex align-items-center justify-content-end text-end",style:{width:"15%"},children:[(0,N.jsx)(r.A,{placement:"top",overlay:(0,N.jsx)(d.A,{children:"Edit"}),children:(0,N.jsx)("button",{id:"edit_".concat(t),className:"border-0 btn btn-icon btn-sm bg-transparent",style:{background:"#F5F5F5"},onClick:()=>this.setState({ruleData:e,editId:e.id},(()=>{const e=setTimeout((()=>{this.setState({ruleData:{}})}),100);this.timeouts.push(e)})),children:(0,N.jsx)(m.gc,{icon:"pen-to-square",iconClass:"me-1 text-muted"})})}),(0,N.jsx)(r.A,{placement:"top",overlay:(0,N.jsx)(d.A,{children:"Delete"}),children:(0,N.jsx)("button",{id:"delete_".concat(t),className:"border-0 btn btn-icon btn-sm bg-transparent","aria-label":"delete",style:{background:"#F5F5F5"},onClick:()=>57==D?j(R):this.confirmDelete(e.id),disabled:F,children:(0,N.jsx)(m.gc,{icon:"trash-can",iconClass:"me-1 text-muted"})})})]})]})}));var l}},e.id))),e.placeholder]}))})})]}),(0,N.jsx)("div",{className:"w-100 mb-4 mt-5",children:(0,N.jsx)("h4",{className:"border-bottom p-4 fs-6 mb-0",children:"Here's default rules list"})}),(0,N.jsx)("div",{className:"px-5 rules-list",children:(0,N.jsxs)("div",{className:"border rounded-2 p-4 mb-4",children:[(0,N.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[(0,N.jsx)("h3",{className:"fs-7 mb-0",children:"Read-to-use AI rules:"}),(0,N.jsxs)("span",{style:{verticalAlign:"middle",fontStyle:"italic",fontSize:"11px",color:"rgb(153, 153, 153)",fontWeight:"400"},children:["Powered By ",(0,N.jsx)(o.A,{src:"https://cloud.tagbox.com/react-app/media/icons/svg-icons/true-sense.svg",alt:"TruSense",height:"16",width:"16"}),(0,N.jsx)("span",{style:{verticalAlign:"middle",fontSize:"13px",fontStyle:"normal",color:"var(--bs-gray-900)"},children:" TruSense"})]})]}),null!==b&&void 0!==b&&b.length?b.map(((e,t)=>{var s,i;return(0,N.jsx)("div",{className:"d-flex rounded-2 border border primary p-2 mb-3 cursor-pointer ".concat(H||"Negativity Neutralizer"==e.title?"prefix_rule":""),style:{background:"var(--bs-gray-100)"},children:(0,N.jsx)("div",{className:"d-flex flex-column w-100",children:(0,N.jsxs)("h5",{className:"d-flex align-items-center justify-content-between fs-8 mb-0",children:[(0,N.jsxs)("div",{className:"d-flex align-items-center",children:[(0,N.jsx)("div",{className:"f-center me-2 h-26px w-26px rounded-1 bg-dark",children:(0,N.jsx)(m.gc,{icon:e.icon,iconClass:"text-light"})}),(0,N.jsx)("span",{className:"d-inline-block me-2",children:e.title}),(0,N.jsx)(r.A,{placement:"top",overlay:(0,N.jsx)(d.A,{children:e.text}),children:(0,N.jsx)("span",{children:(0,N.jsx)(m.gc,{type:"solid",icon:"circle-info",iconClass:"text-muted"})})})]}),H||"Negativity Neutralizer"==e.title?(0,N.jsx)(c.A.Check,{type:"switch",checked:(null===p||void 0===p||null===(s=p.map((e=>e.name)))||void 0===s?void 0:s.includes(e.title))||t==I-1,onClick:s=>s.target.checked?this.setDefault(t+1,e.title):this.setDefault(null,""),disabled:null===p||void 0===p||null===(i=p.map((e=>e.name)))||void 0===i?void 0:i.includes(e.title)}):(0,N.jsx)("div",{className:"",children:(0,N.jsx)("button",{className:"btn btn-link text-primary text-nowrap p-0",type:"button",onClick:()=>R("/price"),children:"Upgrade Plan"})})]})})})})):null]})})]}),(0,N.jsx)("div",{className:"d-flex flex-grow-1 position-relative",children:(0,N.jsx)(ie,{defRule:u,defIndex:g,modifyRule:this.modifyRule,ruleList:p,ruleData:y,reset:w,spinner:k,editId:S,editStatus:T,editOrder:C,navigate:R,planId:D,ownerId:P})})]})})]})})})]})]})}}const oe=(0,B.Ng)((e=>{var t,s,i,a;return{allWalls:null===e||void 0===e||null===(t=e.dashboardData)||void 0===t||null===(s=t.dashboarddata)||void 0===s?void 0:s.allWalls,manageFeeds:e.manageFeeds,userData:null===(i=e.authorized)||void 0===i||null===(a=i.userData)||void 0===a?void 0:a.user_data}}),null)(de)}}]);