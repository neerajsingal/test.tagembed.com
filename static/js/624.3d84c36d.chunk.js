"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[624],{10624:(e,l,s)=>{s.r(l),s.d(l,{default:()=>ee});var i=s(9950),t=s(45358),o=s(471),a=s(97937),n=s(17595),d=s(1093),c=s(21432),r=s(95942),u=s(54810),m=s(51960),h=s(4342),p=s(42074),v=s(44414);const x=e=>{let{toolTip:l,clickAction:s,product:i,iconImg:t}=e;return(0,v.jsx)(c.A,{placement:"top",overlay:(0,v.jsx)(r.A,{children:l}),children:(0,v.jsx)(a.A,{id:"action-".concat(t),variant:"icon",size:"sm","aria-label":t,className:"btn-active-".concat("pen"==t?"primary":"danger"," ms-2"),onClick:e=>s(i),children:(0,v.jsx)(u.gc,{type:"solid",icon:t})})})};class g extends i.Component{constructor(){super(...arguments),this.onErrorImageUpdate=e=>e.target.src=(0,u.pc)("media/images/error/no-product.svg")}render(){var e,l,s;const{product:i,onEditPost:t,onProductSelect:o,selectedProducts:a,onDelete:d,content:c}=this.props,r=i.tags?i.tags.split(", "):[];return(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{className:"align-middle",children:(0,v.jsx)("div",{className:"form-check",children:(0,v.jsx)(n.A.Check,{id:"check-".concat(null===i||void 0===i?void 0:i.id),"aria-label":"select",checked:a.includes(null===i||void 0===i?void 0:i.id),onChange:e=>o(null===i||void 0===i?void 0:i.id,e.target.checked)})})}),(0,v.jsx)("td",{className:"align-middle",children:(0,v.jsxs)("div",{className:"d-flex align-items-center mr-2",children:[(0,v.jsx)("div",{className:"symbol symbol-50 rounded-2 flex-shrink-0 me-3 overflow-hidden",children:(0,v.jsx)(m.A,{"data-media":"product-".concat(null===i||void 0===i?void 0:i.id),className:"object-center-contain",src:i.product_image,height:50,width:50,alt:null===i||void 0===i?void 0:i.product_title,title:null===i||void 0===i?void 0:i.product_title,onError:this.onErrorImageUpdate,loading:"lazy"})}),(0,v.jsx)("div",{className:"overflow-hidden",children:(0,v.jsx)("span",{"data-title":"product-".concat(null===i||void 0===i?void 0:i.id),className:"d-block fs-8 fw-semibold text-ellipsis",style:{maxWidth:200},children:null===i||void 0===i?void 0:i.product_title})})]})}),(0,v.jsx)("td",{className:"align-middle",children:(0,v.jsx)("span",{"data-price":"price-".concat(null===i||void 0===i?void 0:i.id),children:i.product_price?"".concat(i.price_currency_symbol).concat(i.product_price):"--"})}),(0,v.jsx)("td",{className:"align-middle",children:(0,v.jsx)("span",{"data-price":"discount-price-".concat(null===i||void 0===i?void 0:i.id),children:(null===i||void 0===i?void 0:i.product_discount)>0?"".concat(i.price_currency_symbol).concat(i.product_discount):"--"})}),(0,v.jsx)("td",{className:"align-middle",children:(0,v.jsxs)("div",{className:"position-relative",children:[(0,v.jsx)(n.A.Control,{id:"link-".concat(null===i||void 0===i?void 0:i.id),size:"sm",className:"pe-7 text-gray-700",value:i.product_url,"aria-label":"Product Url",readOnly:!0}),(0,v.jsx)(p.N_,{id:"link-open-".concat(null===i||void 0===i?void 0:i.id),className:"btn btn-link position-absolute top-50 translate-middle",to:i.product_url,target:"_blank",title:"Link",style:{right:-5},children:(0,v.jsx)(u.gc,{icon:"external-link"})})]})}),(0,v.jsx)("td",{className:"align-middle",children:(0,v.jsx)("div",{className:"w-auto",children:(null===(e=i.shopify_product_id)||void 0===e?void 0:e.length)>0?(0,v.jsx)(n.A.Control,{id:"pro-id-".concat(null===i||void 0===i?void 0:i.id),size:"sm",className:"pe-4 text-gray-700",value:i.shopify_product_id,style:{maxWidth:150,minWidth:100},"aria-label":"Product id",readOnly:!0}):"--"})}),(0,v.jsx)("td",{className:"align-middle",children:(0,v.jsx)("span",{id:"cat-".concat(null===i||void 0===i?void 0:i.id),className:"d-inline-block break-all",style:{overflowWrap:"anywhere",maxWidth:200},children:i.shopify_product_type?i.shopify_product_type:"--"})}),(0,v.jsx)("td",{className:"align-middle",children:(0,v.jsx)("span",{id:"sku-".concat(null===i||void 0===i?void 0:i.id),children:i.product_sku?i.product_sku:"--"})}),(0,v.jsx)("td",{className:"align-middle",style:{minWidth:200},children:(0,v.jsx)("div",{className:"",style:{maxWidth:200},children:r.length>0?r.map(((e,l)=>(0,v.jsx)(h.A,{"data-tags":"tag-".concat(null===i||void 0===i?void 0:i.id,"-").concat(l),bg:"",className:"badge-secondary",children:e},l))):" -- "})}),(0,v.jsx)("td",{className:"align-middle text-end position-sticky end-0 pe-4",children:(0,v.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[(0,v.jsx)(x,{toolTip:null!==(l=null===c||void 0===c?void 0:c.edit)&&void 0!==l?l:"Edit",clickAction:t,product:i,iconImg:"pen"}),(0,v.jsx)(x,{toolTip:null!==(s=null===c||void 0===c?void 0:c.delete)&&void 0!==s?s:"Remove",clickAction:d,product:i,iconImg:"trash-can"})]})})]})}}const b=g;var f=s(26661),j=s(86781),_=s(68459),y=s(30615),N=s(76955),w=s(3302),A=s.n(w),C=s(49332),P=s(52867);const S=[{value:"\u060b,AFN",label:"AFN"},{value:"Lek,ALL",label:"ALL"},{value:"$,USD",label:"USD"},{value:"$,ARS",label:"ARS"},{value:"\u0192,AWG",label:"AWG"},{value:"$,AUD",label:"AUD"},{value:"\u043c\u0430\u043d,AZN",label:"AZN"},{value:"B$,BSD",label:"BSD"},{value:"Bds$,BBD",label:"BBD"},{value:"Rbl,BYR",label:"BYR"},{value:"\u20ac,EUR",label:"EUR"},{value:"BZ$,BZD",label:"BZD"},{value:"$,BMD",label:"BMD"},{value:"Bs,BOB",label:"BOB"},{value:"KM,BAM",label:"BAM"},{value:"P,BWP",label:"BWP"},{value:"R$,BRL",label:"BRL"},{value:"\xa3,GBP",label:"GBP"},{value:"B$,BND",label:"BND"},{value:"\u043b\u0432,BGN",label:"BGN"},{value:"\u17db,KHR",label:"KHR"},{value:"$,CAD",label:"CAD"},{value:"$,KYD",label:"KYD"},{value:"$,CLP",label:"CLP"},{value:"\xa5,CNY",label:"CNY"},{value:"$,COP",label:"COP"},{value:"\u20a1,CRC",label:"CRC"},{value:"kn,HRK",label:"HRK"},{value:"\u20b1,CUP",label:"CUP"},{value:"\u20ac,EUR",label:"EUR"},{value:"K\u010d,CZK",label:"CZK"},{value:"kr,DKK",label:"DKK"},{value:"RD$,DOP",label:"DOP"},{value:"$,XCD",label:"XCD"},{value:"E\xa3,EGP",label:"EGP"},{value:"SVC,SVC",label:"SVC"},{value:"\xa3,GBP",label:"GBP"},{value:"\u20ac,EUR",label:"EUR"},{value:"\xa3,FKP",label:"FKP"},{value:"FJ$,FJD",label:"FJD"},{value:"\u20ac,EUR",label:"EUR"},{value:"GH\u20b5,GHC",label:"GHC"},{value:"\xa3,GIP",label:"GIP"},{value:"\u20ac,EUR",label:"EUR"},{value:"Q,GTQ",label:"GTQ"},{value:"\xa3,GGP",label:"GGP"},{value:"GY$,GYD",label:"GYD"},{value:"\u20ac,EUR",label:"EUR"},{value:"L,HNL",label:"HNL"},{value:"HK$,HKD",label:"HKD"},{value:"Ft,HUF",label:"HUF"},{value:"kr,ISK",label:"ISK"},{value:"\u20b9,INR",label:"INR"},{value:"Rp,IDR",label:"IDR"},{value:"\ufdfc,IRR",label:"IRR"},{value:"\u20ac,EUR",label:"EUR"},{value:"\xa3,IMP",label:"IMP"},{value:"\u20aa,ILS",label:"ILS"},{value:"\u20ac,EUR",label:"EUR"},{value:"J$,JMD",label:"JMD"},{value:"\xa5,JPY",label:"JPY"},{value:"\xa3,JEP",label:"JEP"},{value:"\u20b8,KZT",label:"KZT"},{value:"\u20a9,KPW",label:"KPW"},{value:"\u20a9,KRW",label:"KRW"},{value:"\u043b\u0432,KGS",label:"KGS"},{value:"\u20ad,LAK",label:"LAK"},{value:"Ls,LVL",label:"LVL"},{value:"L\xa3,LBP",label:"LBP"},{value:"L$,LRD",label:"LRD"},{value:"CHF,CHF",label:"CHF"},{value:"Lt,LTL",label:"LTL"},{value:"\u20ac,EUR",label:"EUR"},{value:"\u0434\u0435\u043d,MKD",label:"MKD"},{value:"RM,MYR",label:"MYR"},{value:"\u20ac,EUR",label:"EUR"},{value:"\u20a8,MUR",label:"MUR"},{value:"Mex$,MXN",label:"MXN"},{value:"\u20ae,MNT",label:"MNT"},{value:"MT,MZN",label:"MZN"},{value:"N$,NAD",label:"NAD"},{value:"\u20a8,NPR",label:"NPR"},{value:"\u20ac,EUR",label:"EUR"},{value:"\u0192,ANG",label:"ANG"},{value:"$,NZD",label:"NZD"},{value:"C$,NIO",label:"NIO"},{value:"\u20a6,NGN",label:"NGN"},{value:"\u20a9,KPW",label:"KPW"},{value:"kr,NOK",label:"NOK"},{value:"bz,OMR",label:"OMR"},{value:"\u20a8,PKR",label:"PKR"},{value:"B/.,PAB",label:"PAB"},{value:"Gs,PYG",label:"PYG"},{value:"S/.,PEN",label:"PEN"},{value:"\u20b1,PHP",label:"PHP"},{value:"z\u0142,PLN",label:"PLN"},{value:"QR,QAR",label:"QAR"},{value:"lei,RON",label:"RON"},{value:"\u20bd,RUB",label:"RUB"},{value:"\xa3,SHP",label:"SHP"},{value:"\ufdfc,SAR",label:"SAR"},{value:"din,RSD",label:"RSD"},{value:"SR,SCR",label:"SCR"},{value:"$,SGD",label:"SGD"},{value:"\u20ac,EUR",label:"EUR"},{value:"Si$,SBD",label:"SBD"},{value:"Sh.so.,SOS",label:"SOS"},{value:"R,ZAR",label:"ZAR"},{value:"\u20a9,KRW",label:"KRW"},{value:"\u20ac,EUR",label:"EUR"},{value:"\u20a8,LKR",label:"LKR"},{value:"$,SRD",label:"SRD"},{value:"kr,SEK",label:"SEK"},{value:"CHF,CHF",label:"CHF"},{value:"\xa3,SYP",label:"SYP"},{value:"NT$,TWD",label:"TWD"},{value:"\u0e3f,THB",label:"THB"},{value:"TT$,TTD",label:"TTD"},{value:"\u20ba,TRY",label:"TRY"},{value:"\u20ba,TRL",label:"TRL"},{value:"$,TVD",label:"TVD"},{value:"\u20b4,UAH",label:"UAH"},{value:"dhs,AED",label:"AED"},{value:"\xa3,GBP",label:"GBP"},{value:"$,USD",label:"USD"},{value:"$U,UYU",label:"UYU"},{value:"\u043b\u0432,UZS",label:"UZS"},{value:"\u20ac,EUR",label:"EUR"},{value:"Bs,VEF",label:"VEF"},{value:"\u20ab,VND",label:"VND"},{value:"\ufdfc,YER",label:"YER"},{value:"Z$,ZWD",label:"ZWD"},{value:"\u062f\u062c,DZD",label:"DZD"}];var k=s(85608);class D extends i.Component{constructor(){super(...arguments),this.uppyUploader=new C.A(null,5e6),this.state={pName:"",pPrice:"",dPrice:"",pUrl:"",sku:"",pId:"",category:"",tags:"",filename:"",selectedFile:"",selected:"",modalOpen:!1,errorShow:!1,preview:!1,pCurrency:"USD",pCurrencySymbol:"$",isLoading:!1,currencySelect:S[2],pNameError:!1,pPriceError:!1,pUrlError:!1},this.onClickToOpen=e=>{this.setState({modalOpen:!0}),A()(".uppy-Dashboard-close").click((()=>{this.uppyUploader.uppy.cancelAll(),this.setState({modalOpen:!1})}))},this.onClickToClose=()=>{this.uppyUploader.uppy.cancelAll(),this.setState({modalOpen:!1})},this.doneButtonHandler=()=>{this.uppyUploader.uppy.cancelAll(),this.onClickToClose()},this.submitForm=e=>{const{pName:l,pPrice:s,dPrice:i,pUrl:t}=this.state;this.setState({isLoading:!0});const o=parseInt(s)?parseInt(s):0,a=parseInt(i)?parseInt(i):0;!l||!(0,P.m$)(t)||o<a?this.setState({pNameError:!l,pUrlError:!(0,P.m$)(t),pPriceError:o<a,isLoading:!1}):this.onProductAdd()},this.onCurrenyChange=e=>{if(e&&Object.keys(e).length>0&&e.value){let l=e.value.split(",");this.setState({currencySelect:e,pCurrency:l[1],pCurrencySymbol:l[0]})}},this.onProductAdd=()=>{const{filename:e,selectedFile:l,image:s,file:i,pName:t,pPrice:o,dPrice:a,pUrl:n,sku:d,pId:c,category:r,tags:u,preview:m,pCurrency:h,pCurrencySymbol:p}=this.state,{ACTION_PRODUCT_ADD:v,closePopup:x,editProductData:g,ACTION_PRODUCT_UPDATE:b}=this.props;var f={wall:localStorage.getItem("wallId"),image:e,title:t,priceCurrency:h,priceCurrencySymbol:p,price:o,discountCurrencySymbol:p,discountCurrency:h,discount:a,url:n,sku:d,shopify_product_id:c,shopify_product_type:r,shopify_product_tags:u};g&&g.id?(f.id=g.id,b(f,this.resetCallback)):v(f,this.resetCallback)},this.resetCallback=()=>this.setState({isLoading:!1},(()=>this.props.closePopup())),this.onClickRemove=e=>this.setState({filename:"",selectedFile:"",selected:""})}componentDidMount(){const{editProductData:e}=this.props;if(e){var l;const s=S.filter((l=>l.label==e.price_currency));let i="",t="";if((null===s||void 0===s?void 0:s.length)>0&&null!==(l=s[0])&&void 0!==l&&l.value){let l=s[0].value.split(",");i=l[1],t=l[0],this.setState({pName:e.product_title,pPrice:e.product_price,dPrice:e.product_discount,pUrl:e.product_url,sku:e.product_sku,pId:e.shopify_product_id,category:e.shopify_product_type,tags:e.tags,filename:e.product_image,selectedFile:e.product_image,selected:e.product_image,pCurrency:i,pCurrencySymbol:t,currencySelect:S.filter((l=>l.label==e.price_currency))})}}this.uppyUploader.uppy.on("transloadit:result",((e,l)=>{this.setState({selectedFile:l.id,filename:"".concat(k.$r).concat(l.id,".").concat(l.ext),selected:"".concat(k.$r).concat(l.id,".").concat(l.ext)},(()=>{setTimeout((()=>{this.uppyUploader.uppy.cancelAll(),this.setState({modalOpen:!1})}),300)}))}))}componentWillReceiveProps(e){if(e.editProductData&&e.editProductData!==this.props.editProductData){const{editProductData:l}=e;this.setState({pName:l.product_title,pPrice:l.product_price,dPrice:l.product_discount,pUrl:l.product_url,sku:l.product_sku,pId:l.shopify_product_id,category:l.shopify_product_type,tags:l.tags,filename:l.product_image,selectedFile:l.product_image,selected:l.product_image,pCurrency:l.discount_currency,pCurrencySymbol:l.discount_currency_symbol})}}componentWillUnmount(){this.uppyUploader.uppy.cancelAll(),this.uppyUploader.uppy.close({reason:"unmount"}),this.setState({modalOpen:!1})}render(){var e,l,s,i,t,o,d,h,x,g,b,w,A,C,P,k,D,I,T,U,R,E,B,M,L,O,G,H,z,F;const{showAddProduct:K,closePopup:W,editProductData:$,content:Y}=this.props,{filename:Z,modalOpen:q,pName:V,pPrice:J,dPrice:Q,pUrl:X,sku:ee,pId:le,category:se,tags:ie,preview:te,pCurrencySymbol:oe,isLoading:ae,currencySelect:ne,pNameError:de,pPriceError:ce,pUrlError:re}=this.state;return(0,v.jsxs)(f.A,{show:K,size:"lg",dialogClassName:"modal-dialog-centered",id:"addNewCustomProduct",onHide:W,children:[(0,v.jsx)(f.A.Header,{closeButton:!0,children:(0,v.jsxs)(f.A.Title,{children:[" ",null!==$&&void 0!==$&&$.id?null!==(e=null===Y||void 0===Y?void 0:Y.update)&&void 0!==e?e:"Update":null!==(l=null===Y||void 0===Y?void 0:Y.add)&&void 0!==l?l:"Add"," ",null!==(s=null===Y||void 0===Y?void 0:Y.heading)&&void 0!==s?s:"product"]})}),(0,v.jsx)(f.A.Body,{children:(0,v.jsx)("div",{className:"addPro_modal mx-xl-4 px-0 px-lg-4 mx-0",children:(0,v.jsxs)(j.A,{children:[(0,v.jsxs)(_.A,{md:6,lg:5,children:[(0,v.jsx)("p",{className:"text-center fw-medium text-gray-400 fs-8 mb-1",children:te?null!==(i=null===Y||void 0===Y?void 0:Y.product_preview)&&void 0!==i?i:"":null!==(t=null===Y||void 0===Y?void 0:Y.product_image)&&void 0!==t?t:""}),(0,v.jsx)("div",{className:"border rounded-1 mb-4 mb-lg-0 position-relative overflow-hidden",style:{minHeight:430},children:te?(0,v.jsxs)("div",{className:"tb_pro__wrap_in p-5 mt-6",children:[(0,v.jsx)("div",{className:"tb_pro__img_wrapper",children:(0,v.jsx)("div",{className:"tb_pro__image_wrap mediaHolder",children:(0,v.jsx)("img",{className:"tb_pro__image",src:Z||(0,u.pc)("media/images/error/no-product.svg")})})}),(0,v.jsx)("div",{className:"tb_pro__title",children:V}),(0,v.jsx)("div",{className:"tb_pro__price_wrap",children:0==Q?(0,v.jsxs)("div",{className:"tb_pro__price",children:[oe,J||0]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"tb_pro__price",children:[oe,Q||0]}),(0,v.jsxs)("div",{className:"tb_pro__discount_price",children:[oe,J||0]})]})}),(0,v.jsx)("div",{className:"tb_pro__link",children:(0,v.jsx)(p.N_,{className:"tb_pro__btn text-white",to:X,target:"_blank",title:"Shop Now",children:null!==(o=null===Y||void 0===Y?void 0:Y.shop_now)&&void 0!==o?o:""})})]}):Z?(0,v.jsxs)("div",{className:"p-3 mb-2",children:[(0,v.jsx)(m.A,{id:"product_img",className:"w-100 mb-10",fluid:!0,src:Z}),(0,v.jsxs)("div",{className:"f-center position-absolute bottom-0 start-0 w-100 p-2",children:[(0,v.jsx)(c.A,{placement:"top",overlay:(0,v.jsx)(r.A,{id:"button-tooltip-2",children:null!==(d=null===Y||void 0===Y?void 0:Y.edit)&&void 0!==d?d:""}),children:(0,v.jsx)(a.A,{id:"product_edit",variant:"icon",className:"btn-active-primary mx-1",onClick:this.onClickToOpen,children:(0,v.jsx)(u.gc,{icon:"pen"})})}),(0,v.jsx)(c.A,{placement:"top",overlay:(0,v.jsx)(r.A,{id:"button-tooltip-2",children:null!==(h=null===Y||void 0===Y?void 0:Y.remove)&&void 0!==h?h:""}),children:(0,v.jsx)(a.A,{id:"product_remove",variant:"icon",className:"btn-active-primary mx-1","aria-label":"delete",onClick:this.onClickRemove,children:(0,v.jsx)(u.gc,{icon:"trash-can"})})})]})]}):(0,v.jsxs)("div",{id:"upload_pro_media",className:"f-center flex-column cursor-pointer",onClick:this.onClickToOpen,style:{height:395},children:[(0,v.jsx)("span",{className:"text-gray-300 mb-2",style:{fontSize:80},children:(0,v.jsx)("i",{className:"fa-duotone fa-solid fa-bag-shopping-plus"})}),(0,v.jsx)("strong",{className:"text-center text-muted mb-2",children:null!==(x=null===Y||void 0===Y?void 0:Y.click_here)&&void 0!==x?x:""}),(0,v.jsx)("span",{children:null!==(g=null===Y||void 0===Y?void 0:Y.to_upload)&&void 0!==g?g:""})]})})]}),(0,v.jsxs)(_.A,{md:6,lg:7,children:[(0,v.jsxs)("div",{className:"mb-2 mb-xl-3",children:[(0,v.jsx)(n.A.Label,{children:null!==(b=null===Y||void 0===Y?void 0:Y.label_name)&&void 0!==b?b:"Product name"}),(0,v.jsx)(n.A.Control,{id:"pro_name",name:"pname",className:de?"is-invalid":"",value:V,placeholder:null!==(w=null===Y||void 0===Y?void 0:Y.plc_name)&&void 0!==w?w:"",onChange:e=>this.setState({pName:e.target.value})}),de&&(0,v.jsx)("div",{className:"invalid-feedback d-block",children:null!==(A=null===Y||void 0===Y?void 0:Y.product_name_req)&&void 0!==A?A:""})]}),(0,v.jsxs)("div",{className:"row mb-2 mb-xl-3",children:[(0,v.jsxs)("div",{className:"col",children:[(0,v.jsx)(n.A.Label,{children:null!==(C=null===Y||void 0===Y?void 0:Y.label_price)&&void 0!==C?C:"Price"}),(0,v.jsxs)("div",{className:"input-group",children:[(0,v.jsx)("span",{className:"input-group-text p-0",children:(0,v.jsx)(y.Ay,{id:"select_currency",className:"selectpicker selectpicker-sm border-0",classNamePrefix:"selectpicker",onChange:this.onCurrenyChange,name:"Price",value:ne,options:S})}),(0,v.jsx)(n.A.Control,{id:"input_price",value:J,className:ce?"is-invalid":"",placeholder:"0.00",size:"8",type:"number",min:0,onChange:e=>this.setState({pPrice:e.target.value})})]})]}),(0,v.jsxs)("div",{className:"col",children:[(0,v.jsxs)(n.A.Label,{children:[null!==(P=null===Y||void 0===Y?void 0:Y.label_discount)&&void 0!==P?P:"",(0,v.jsx)(c.A,{placement:"top",overlay:(0,v.jsx)(r.A,{children:null!==(k=null===Y||void 0===Y?void 0:Y.discount_tooltip)&&void 0!==k?k:""}),children:(0,v.jsx)("sapn",{className:"ms-1",children:(0,v.jsx)(u.gc,{type:"solid",icon:"circle-info",iconClass:"fs-7 text-gray-500"})})})]}),(0,v.jsxs)("div",{className:"input-group",children:[(0,v.jsx)("span",{className:"input-group-text",children:oe}),(0,v.jsx)(n.A.Control,{id:"input_discount",value:Q,placeholder:"0.00",size:"8",type:"number",min:0,onChange:e=>this.setState({dPrice:e.target.value}),className:ce?"is-invalid":""}),ce&&(0,v.jsx)("div",{className:"invalid-feedback d-block",children:null!==(D=null===Y||void 0===Y?void 0:Y.discount_err)&&void 0!==D?D:""})]})]})]}),(0,v.jsxs)("div",{className:"mb-2 mb-xl-3",children:[(0,v.jsx)(n.A.Label,{children:null!==(I=null===Y||void 0===Y?void 0:Y.label_url)&&void 0!==I?I:"Product URL"}),(0,v.jsx)(n.A.Control,{id:"input_url",value:X,className:re?"is-invalid":"",placeholder:"https://www.website.com",onChange:e=>this.setState({pUrl:e.target.value})}),re&&(0,v.jsx)("div",{className:"invalid-feedback d-block",children:null!==(T=null===Y||void 0===Y?void 0:Y.valid_url)&&void 0!==T?T:""})]}),(0,v.jsxs)("div",{className:"row mb-2 mb-xl-3",children:[(0,v.jsxs)("div",{className:"col",children:[(0,v.jsx)(n.A.Label,{children:null!==(U=null===Y||void 0===Y?void 0:Y.label_sku)&&void 0!==U?U:"Product SKU"}),(0,v.jsx)(n.A.Control,{id:"input_sku",value:ee,placeholder:null!==(R=null===Y||void 0===Y?void 0:Y.plc_sku)&&void 0!==R?R:"Enter Product SKU",onChange:e=>this.setState({sku:e.target.value})})]}),(0,v.jsxs)("div",{className:"col",children:[(0,v.jsx)(n.A.Label,{children:null!==(E=null===Y||void 0===Y?void 0:Y.label_id)&&void 0!==E?E:"Product Id"}),(0,v.jsx)(n.A.Control,{id:"input_p_id",value:le,placeholder:null!==(B=null===Y||void 0===Y?void 0:Y.plc_id)&&void 0!==B?B:"Enter Product Id",onChange:e=>this.setState({pId:e.target.value})})]})]}),(0,v.jsxs)("div",{className:"mb-2 mb-xl-3",children:[(0,v.jsx)(n.A.Label,{children:null!==(M=null===Y||void 0===Y?void 0:Y.label_category)&&void 0!==M?M:"Category"}),(0,v.jsx)(n.A.Control,{id:"input_p_cat",value:se,placeholder:null!==(L=null===Y||void 0===Y?void 0:Y.plc_category)&&void 0!==L?L:"Enter Category",onChange:e=>this.setState({category:e.target.value})})]}),(0,v.jsxs)("div",{className:"mb-2 mb-xl-3",children:[(0,v.jsx)(n.A.Label,{children:null!==(O=null===Y||void 0===Y?void 0:Y.label_tags)&&void 0!==O?O:"Tags"}),(0,v.jsx)(n.A.Control,{id:"input_p_tag",value:ie,placeholder:null!==(G=null===Y||void 0===Y?void 0:Y.plc_tags)&&void 0!==G?G:"Enter Multiple Tags Comma Separated",onChange:e=>this.setState({tags:e.target.value})})]})]})]})})}),(0,v.jsxs)(f.A.Footer,{className:"p-3",children:[(0,v.jsx)(a.A,{id:"btn_preview",variant:"outline-primary",size:"sm",className:"ms-2",onClick:()=>this.setState({preview:!te}),children:te?null!==(z=null===Y||void 0===Y?void 0:Y.btn_edit)&&void 0!==z?z:"Edit Mode":null!==(H=null===Y||void 0===Y?void 0:Y.btn_preview)&&void 0!==H?H:"Preview"}),(0,v.jsx)(a.A,{id:"product_save_",variant:"primary",size:"sm",className:"ms-2 ".concat(ae?"spinner":""),onClick:this.submitForm,children:null!==(F=null===Y||void 0===Y?void 0:Y.btn_submit)&&void 0!==F?F:"Submit"})]}),(0,v.jsx)(N.KG,{animateOpenClose:!0,proudlyDisplayPoweredByUppy:!1,inline:!1,showProgressDetails:!0,height:750,browserBackButtonClose:!0,showRemoveButtonAfterComplete:!1,uppy:this.uppyUploader.uppy,open:q,onRequestCloseModal:this.onClickToClose,closeAfterFinish:!0,doneButtonHandler:this.doneButtonHandler,plugins:["Instagram","GoogleDrive","Url","Webcam"]})]})}}var I=s(61075),T=s(28429),U=s(73878);const R=e=>{var l,s,a,n,d;let{openManualSyncModal:c,openSyncProduct:r}=e;(0,T.Zp)(),(0,U.wA)();const h=(0,i.useMemo)((()=>{var e,l,s;return null!==(e=null===(l=window)||void 0===l||null===(s=l.APP_CONTENT)||void 0===s?void 0:s.product_catalog)&&void 0!==e?e:{}}),[]);return(0,v.jsx)(t.A,{children:(0,v.jsx)("div",{className:"f-center w-100 sync_products",style:{minHeight:"calc(100vh - 150px)"},children:(0,v.jsx)(j.A,{className:"justify-content-center pb-lg-10",id:"sync_products-container",children:(0,v.jsxs)(_.A,{lg:8,className:"w-100",children:[(0,v.jsxs)("div",{className:"mb-5 mb-lg-10",children:[(0,v.jsx)("h3",{children:null!==(l=null===h||void 0===h?void 0:h.sync_products_title)&&void 0!==l?l:""}),(0,v.jsx)("p",{className:"fw-medium text-muted",children:null!==(s=null===h||void 0===h?void 0:h.sync_products_desc)&&void 0!==s?s:""})]}),(0,v.jsxs)(j.A,{className:"gx-3 w-100",children:[null!==h&&void 0!==h&&null!==(a=h.csm_options)&&void 0!==a&&a.length?null===h||void 0===h?void 0:h.csm_options.map(((e,l)=>(0,v.jsx)(_.A,{xs:6,sm:4,children:(0,v.jsx)(o.A,{id:"".concat(e.icon,"_btn_"),className:"card-stretch gutter-b cursor-pointer",onClick:()=>""===e.type?c():r(e.type),children:(0,v.jsxs)(o.A.Body,{className:"flex-column f-center px-2",children:[(0,v.jsx)(m.A,{className:"my-3 ".concat("bmc"===e.type||""===e.type?"invert":""),src:(0,u.pc)("media/images/cms/".concat(e.icon,".svg")),height:40,width:40,alt:e.title,fluid:!0}),(0,v.jsx)("h5",{className:"text-center fs-8",style:{minHeight:30},children:e.title})]})})},l))):null,(0,v.jsx)(_.A,{xs:6,sm:4,children:(0,v.jsx)(I.A,{title:null!==(n=null===h||void 0===h?void 0:h.request_platform)&&void 0!==n?n:"",children:(0,v.jsx)(o.A,{className:"card-stretch gutter-b cursor-pointer",children:(0,v.jsxs)(o.A.Body,{className:"flex-column f-center px-2",children:[(0,v.jsxs)("div",{className:"my-3 position-relative",style:{width:40,height:40},children:[(0,v.jsx)("div",{className:"position-absolute w-100 h-100 rounded-circle bg-white",style:{border:"1px dashed #D7D7D7"}}),(0,v.jsx)("div",{className:"position-absolute w-100 h-100 rounded-circle",style:{background:"#EBEBEB",transform:"scale(0.85)"}}),(0,v.jsx)("div",{className:"position-absolute w-100 h-100 d-flex align-items-center justify-content-center",children:(0,v.jsx)(u.gc,{icon:"plus",iconClass:"fs-5"})})]}),(0,v.jsx)("h5",{className:"text-center fs-8",style:{minHeight:30},children:null!==(d=null===h||void 0===h?void 0:h.request_platform)&&void 0!==d?d:""})]})})})})]})]})})})})};var E=s(89379),B=s(19360),M=s(1480),L=s(41225),O=s(85861);class G extends i.Component{constructor(){var e,l;super(...arguments),this.state={shopifyUrl:"",gmc_id:"",m_url:"",w_url:"",sales_url:"",gmc_error:!1,shopify_error:!1,m_error:!1,w_error:!1,sales_error:!1,isConnected:!1},this.appContent=null!==(e=null===(l=window)||void 0===l?void 0:l.APP_CONTENT)&&void 0!==e?e:{},this.handleMessage=async e=>{try{const d=(0,P.KK)(e.data),{code:c,type:r}=d;if(c)if("shopifyLogin"==r)(0,M.Tn)(c,this.refreshProducts),setTimeout((()=>{this.props.refreshProducts()}),200);else try{const e=await(0,O.O4)(c);if(e){var l,s,i;const t=await(0,M.BC)(e);localStorage.removeItem("shopUrl"),t.error?(0,P.r$)(null!==(l=null===(s=this.appContent)||void 0===s||null===(i=s.common)||void 0===i?void 0:i.some_error_occured)&&void 0!==l?l:""):(this.props.refreshProducts(),(0,P.k1)(t.message))}}catch(n){var t,o,a;console.error("Error during authentication:",n),(0,P.r$)(null!==(t=null===(o=this.appContent)||void 0===o||null===(a=o.common)||void 0===a?void 0:a.auth_failed)&&void 0!==t?t:"")}}catch(n){console.error("Error parsing event data:",n)}},this.onAddGmcAccount=e=>{const l=/^\d{1,18}$/.test(e);this.setState({gmc_error:!l}),l&&((0,L.Zs)(),localStorage.setItem("shopUrl",e))},this.setUrl=(e,l,s)=>{const i=(0,P.s3)(e);let t={};"shopifyUrl"==l&&(t.isConnected=!1),this.setState((0,E.A)({[l]:e,[s]:""!=e&&!i},t))},this.checkShopify=e=>{if(""==String(e).trim())this.setState({shopify_error:!0});else{const{stores:l}=this.props;let s=[];(null===l||void 0===l?void 0:l.length)>0&&(s=l.filter((l=>String(l.domain).toLowerCase()==String(e).toLowerCase()))),s.length>0?this.setState({isConnected:!0,shopify_error:!0}):(0,M.S5)(String(e).toLowerCase())}}}componentDidMount(){window.addEventListener("message",this.handleMessage)}componentWillUnmount(){window.removeEventListener("message",this.handleMessage)}render(){var e,l,s,i,t,o,d,c,r,h,x,g,b,j,_,y,N,w,A,C,S,k,D,T,U,R,E,L,O,G,H,z,F,K,W,$,Y;const{show:Z,onHide:q,product:V,stores:J,showMagento:Q,onDelete:X,refreshProducts:ee,isShopify:le,showManualSyncModal:se}=this.props,{gmc_error:ie,shopify_error:te,m_error:oe,w_error:ae,isConnected:ne,shopifyUrl:de,gmc_id:ce,m_url:re,w_url:ue,sales_error:me,sales_url:he}=this.state,pe=le?null===J||void 0===J?void 0:J.find((e=>"shopify"==e.created_from)):null,ve=null!==(e=null===(l=this.appContent)||void 0===l||null===(s=l.product_catalog)||void 0===s?void 0:s.pop_sync)&&void 0!==e?e:"";return le&&!Z?(0,v.jsx)("div",{className:"shopifyApp-modal card shadow-sm border-0 rounded-3 w-100",children:(0,v.jsxs)("div",{className:"card-body",children:[(0,v.jsxs)("div",{className:"card-top",children:[(0,v.jsx)("div",{className:"text-center mb-5 pb-3",children:(0,v.jsx)("h4",{className:"fs-4 fw-bold",children:null!==(i=null===ve||void 0===ve?void 0:ve.heading_shopify)&&void 0!==i?i:""})}),(0,v.jsxs)("div",{className:"d-flex align-items-start flex-md-row flex-column",children:[(0,v.jsxs)("div",{className:"flex-md-grow-1 flex-grow-0 me-2 w-100 mb-5 mb-md-0",children:[(0,v.jsx)(n.A.Control,{id:"shopify_c_input",size:"lg",placeholder:"example.myshopify.com",value:null!==(t=null===pe||void 0===pe?void 0:pe.domain)&&void 0!==t?t:"",readOnly:!0}),null!==pe&&void 0!==pe&&pe.modified?(0,v.jsx)("span",{className:"text-gray-700 fs-8 fw-medium",children:(0,P.dz)(null!==(o=null===ve||void 0===ve?void 0:ve.last_synced)&&void 0!==o?o:"",{time:(0,P.S)(null!==(d=null===pe||void 0===pe?void 0:pe.modified)&&void 0!==d?d:"")})}):null]}),(0,v.jsxs)(a.A,{id:"shopify_id_btn",className:"btn border-0 d-flex align-items-center signInWithBrand signIn-Shopify",value:"shopify",onClick:()=>(0,M.Tn)(null===pe||void 0===pe?void 0:pe.id,ee),children:[(0,v.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,v.jsx)("img",{src:(0,u.pc)("media/icons/platform-icons/shopify.svg"),height:20,width:20,alt:"shopify"})}),(0,v.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,v.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:null!==(c=null===ve||void 0===ve?void 0:ve.connect_shop)&&void 0!==c?c:""})})]})]})]}),(0,v.jsxs)("div",{className:"card-bottom px-4",children:[(0,v.jsx)("div",{className:"text-center mb-5",children:(0,v.jsx)("p",{className:"text-muted mb-0",children:null!==(r=null===ve||void 0===ve?void 0:ve.sync_product_other)&&void 0!==r?r:""})}),(0,v.jsxs)("div",{className:"d-flex justify-content-center flex-column flex-sm-row gap-3 mb-4",children:[(0,v.jsxs)(a.A,{variant:"secondary",className:"d-flex align-items-center justify-content-center",onClick:()=>se("showAddProduct"),children:[(0,v.jsx)(u.gc,{icon:"plus",className:"me-2"}),null!==(h=null===ve||void 0===ve?void 0:ve.add_product)&&void 0!==h?h:""]}),(0,v.jsxs)(a.A,{variant:"secondary",className:"d-flex align-items-center justify-content-center",onClick:()=>se("uploadCsv"),children:[(0,v.jsx)(u.gc,{icon:"file-import",className:"me-2"}),null!==(x=null===ve||void 0===ve?void 0:ve.import)&&void 0!==x?x:""]})]})]})]})}):(0,v.jsxs)(f.A,{show:Z,onHide:q,size:"xl",id:"syncProducts","aria-labelledby":"syncProducts",centered:!0,children:[(0,v.jsx)(f.A.Header,{closeButton:!0,children:(0,v.jsx)(f.A.Title,{children:null!==(g=null===ve||void 0===ve?void 0:ve.heading)&&void 0!==g?g:"Sync Product"})}),(0,v.jsx)(f.A.Body,{children:(0,v.jsxs)("div",{className:"p-lg-8 p-4",children:[localStorage.getItem("shopifyLogin")?null:(0,v.jsxs)("div",{children:[["google",""].includes(V)?(0,v.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,v.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,v.jsx)(m.A,{className:"h-100",src:(0,u.pc)("media/icons/platform-icons/google.svg"),height:43,width:43,alt:"Google Merchant",fluid:!0})}),(0,v.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:null!==(b=null===ve||void 0===ve?void 0:ve.google_merchant)&&void 0!==b?b:"Google Merchant"})]})}),(0,v.jsx)("div",{className:"d-flex flex-grow-1",children:(0,v.jsxs)("div",{className:"mb-2 w-100 mx-0 mx-sm-3",children:[(0,v.jsx)(n.A.Control,{id:"google_id_input",size:"lg",className:ie?"is-invalid":"",placeholder:null!==(j=null===ve||void 0===ve?void 0:ve.plc_google)&&void 0!==j?j:"Google Merchant ID",value:ce,onInput:e=>this.setState({gmc_id:e.target.value,gmc_error:!1}),required:!0}),ie?(0,v.jsx)("div",{className:"invalid-feedback",children:ce?null!==(_=null===ve||void 0===ve?void 0:ve.err_google_invalid)&&void 0!==_?_:"":null!==(y=null===ve||void 0===ve?void 0:ve.err_required)&&void 0!==y?y:""}):null]})}),(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)(a.A,{id:"google_id_btn",className:"btn border-0 d-flex signInWithBrand signIn-Google mb-2",onClick:()=>{ce?this.onAddGmcAccount(ce):this.setState({gmc_error:!0})},children:[(0,v.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,v.jsx)("img",{src:(0,u.pc)("media/icons/platform-icons/google.svg"),height:43,width:43,alt:"google"})}),(0,v.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,v.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:null!==(N=null===ve||void 0===ve?void 0:ve.btn_google)&&void 0!==N?N:"Sign in with Google"})})]})})]}):null,["shopify",""].includes(V)?(0,v.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,v.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,v.jsx)(m.A,{className:"h-100",src:(0,u.pc)("media/icons/platform-icons/shopify.svg"),height:20,width:20,alt:"shopify",fluid:!0})}),(0,v.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:null!==(w=null===ve||void 0===ve?void 0:ve.shopify)&&void 0!==w?w:"Shopify"})]})}),(0,v.jsx)("div",{className:"d-flex flex-grow-1",children:(0,v.jsxs)("div",{className:"mb-2 w-100 mx-0 mx-sm-3",children:[(0,v.jsx)(n.A.Control,{id:"shopify_id_input",size:"lg",className:te?"is-invalid":"",placeholder:null!==(A=null===ve||void 0===ve?void 0:ve.plc_shopify)&&void 0!==A?A:"example.myshopify.com",value:de,onInput:e=>this.setUrl(e.target.value,"shopifyUrl","shopify_error"),required:!0}),te?(0,v.jsx)("div",{className:"invalid-feedback",children:ne?null!==(C=null===ve||void 0===ve?void 0:ve.err_shopify_connected)&&void 0!==C?C:"":null!==(S=null===ve||void 0===ve?void 0:ve.err_shopify_invalid)&&void 0!==S?S:""}):null]})}),(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)(a.A,{id:"shopify_id_btn",className:"btn border-0 d-flex signInWithBrand signIn-Shopify mb-2",value:"shopify",onClick:de&&!te?()=>this.checkShopify(de):()=>{this.setState({shopify_error:!0})},children:[(0,v.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,v.jsx)("img",{src:(0,u.pc)("media/icons/platform-icons/shopify.svg"),height:20,width:20,alt:"shopify"})}),(0,v.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,v.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:null!==(k=null===ve||void 0===ve?void 0:ve.btn_shopify)&&void 0!==k?k:"Connect Shop"})})]})})]}):null,["bmc",""].includes(V)?(0,v.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,v.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,v.jsx)(m.A,{className:"h-100 invert",src:(0,u.pc)("media/icons/platform-icons/bigcommerce.svg"),height:20,width:20,alt:"bigcommerce",title:"bigcommerce",fluid:!0})}),(0,v.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:null!==(D=null===ve||void 0===ve?void 0:ve.bigcommerce)&&void 0!==D?D:"BigCommerce"})]})}),(0,v.jsx)("div",{className:"d-flex flex-grow-1",children:(0,v.jsx)("div",{className:"my-2 w-100 mx-0 mx-sm-3",children:(0,v.jsx)("p",{className:"mb-0 fs-8",children:null!==(T=null===ve||void 0===ve?void 0:ve.plc_bigcommerce)&&void 0!==T?T:"Install our BigCommerce app to sync products."})})}),(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)(p.N_,{id:"bmc_btn",to:"https://www.bigcommerce.com/apps/taggshop",className:"border-0 d-flex signInWithBrand signIn-Bigcommerce mb-2",title:"CSV",children:[(0,v.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,v.jsx)(m.A,{src:(0,u.pc)("media/icons/platform-icons/bigcommerce.svg"),height:20,width:20,alt:"bigcommerce",title:"bigcommerce"})}),(0,v.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,v.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:null!==(U=null===ve||void 0===ve?void 0:ve.btn_bigcommerce)&&void 0!==U?U:"Install App"})})]})})]}):null,["magento",""].includes(V)?(0,v.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,v.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,v.jsx)(m.A,{className:"h-100",src:(0,u.pc)("media/icons/platform-icons/magento.svg"),height:20,width:20,alt:"magento",title:"magento",fluid:!0})}),(0,v.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:null!==(R=null===ve||void 0===ve?void 0:ve.magento)&&void 0!==R?R:"Magento"})]})}),(0,v.jsxs)("div",{className:"d-flex flex-grow-1 flex-column mx-0 mx-sm-3",children:[(0,v.jsxs)("div",{className:"mb-2 w-100",children:[(0,v.jsx)(n.A.Control,{id:"magento_input",size:"lg",className:oe?"is-invalid":"",placeholder:null!==(E=null===ve||void 0===ve?void 0:ve.plc_magento)&&void 0!==E?E:'Enter your "magento" store URL',value:re,onInput:e=>this.setUrl(e.target.value,"m_url","m_error"),required:!0}),oe?(0,v.jsx)("div",{className:"invalid-feedback",children:null!==(L=null===ve||void 0===ve?void 0:ve.err_required)&&void 0!==L?L:""}):null]}),(0,v.jsx)("span",{className:"text-gray-700 fs-8 fw-medium",children:null!==(O=null===ve||void 0===ve?void 0:ve.text_magento)&&void 0!==O?O:"Note: Only Compatible with Magento 2.x"})]}),(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)(a.A,{id:"magento_btn",className:"border-0 d-flex signInWithBrand signIn-Magento mb-2",onClick:re&&!oe?()=>{Q(re)}:()=>{this.setState({m_error:!0})},children:[(0,v.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,v.jsx)("img",{src:(0,u.pc)("media/icons/platform-icons/magento.svg"),height:20,width:20,alt:"magento"})}),(0,v.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,v.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:null!==(G=null===ve||void 0===ve?void 0:ve.btn_shopify)&&void 0!==G?G:"Connect Shop"})})]})})]}):null,["woocommerce",""].includes(V)?(0,v.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,v.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,v.jsx)("img",{className:"img-fluid h-100",src:(0,u.pc)("media/icons/platform-icons/woocommerce.svg"),height:20,width:20,alt:"woocommerce"})}),(0,v.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:null!==(H=null===ve||void 0===ve?void 0:ve.woocommerce)&&void 0!==H?H:"Woocommerce"})]})}),(0,v.jsx)("div",{className:"d-flex flex-grow-1 flex-column mx-0 mx-sm-3",children:(0,v.jsxs)("div",{className:"mb-2 w-100",children:[(0,v.jsx)(n.A.Control,{id:"wooco_input",size:"lg",className:ae?"is-invalid":"",placeholder:null!==(z=null===ve||void 0===ve?void 0:ve.plc_woocommerce)&&void 0!==z?z:'Enter your "woocommerce" store URL',value:ue,onInput:e=>this.setUrl(e.target.value,"w_url","w_error"),required:!0}),ae?(0,v.jsx)("div",{className:"invalid-feedback",children:null!==(F=null===ve||void 0===ve?void 0:ve.err_required)&&void 0!==F?F:""}):null]})}),(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)(a.A,{id:"wooco_btn",className:"border-0 d-flex signInWithBrand signIn-Woocommerce mb-2",onClick:()=>{ue&&!ae?(0,M.wl)(ue):this.setState({w_error:!0})},children:[(0,v.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,v.jsx)("img",{src:(0,u.pc)("media/icons/platform-icons/woocommerce.svg"),height:20,width:20,alt:"woocommerce"})}),(0,v.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,v.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:null!==(K=null===ve||void 0===ve?void 0:ve.btn_shopify)&&void 0!==K?K:"Connect Shop"})})]})})]}):null]}),J&&""==V&&J.length?(0,v.jsxs)("div",{children:[localStorage.getItem("shopifyLogin")?"":(0,v.jsx)("h4",{children:null!==(W=null===ve||void 0===ve?void 0:ve.connected_shop)&&void 0!==W?W:""}),(0,v.jsx)("div",{className:"".concat(localStorage.getItem("shopifyLogin")?"":"border-top ","pt-5"),children:J.map((e=>{var l,s,i,t,o,d,c,r,h,p,x,g,b,f,j,_,y,N,w,A;return"googlemerchant"==e.created_from?(0,v.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,v.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,v.jsx)(m.A,{className:"h-100",src:(0,u.pc)("media/icons/platform-icons/google.svg"),height:43,width:43,alt:"Google Merchant",fluid:!0})}),(0,v.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:null!==(l=null===ve||void 0===ve?void 0:ve.google_merchant)&&void 0!==l?l:"Google Merchant"})]})}),(0,v.jsx)("div",{className:"d-flex flex-grow-1",children:(0,v.jsxs)("div",{className:"mb-2 w-100 mx-0 mx-sm-3",children:[(0,v.jsx)(n.A.Control,{id:"google_c_id",size:"lg",placeholder:null!==(s=null===ve||void 0===ve?void 0:ve.plc_google)&&void 0!==s?s:"Google Merchant ID",value:e.storeId,readOnly:!0}),e.modified?(0,v.jsx)("span",{className:"text-gray-700 fs-8 fw-medium",children:(0,P.dz)(null!==(i=null===ve||void 0===ve?void 0:ve.last_synced)&&void 0!==i?i:"",{time:(0,P.S)(e.modified)})}):""]})}),(0,v.jsxs)("div",{className:"d-flex flex-shrink-0",children:[(0,v.jsxs)(a.A,{id:"google_c_btn",className:"btn border-0 d-flex signInWithBrand signIn-Google mb-2",onClick:()=>(0,M.UZ)(e.id,(l=>{l?this.onAddGmcAccount(e.storeId):ee()})),children:[(0,v.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,v.jsx)("img",{src:(0,u.pc)("media/icons/platform-icons/google.svg"),height:43,width:43,alt:"Google Merchant"})}),(0,v.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,v.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:null!==(t=null===ve||void 0===ve?void 0:ve.btn_google)&&void 0!==t?t:"Sign in with Google"})})]}),(0,v.jsx)("div",{className:"ms-2",children:(0,v.jsx)(a.A,{id:"google_c_d_btn",variant:"icon",size:"lg",className:"btn-active-danger","aria-label":"delete",onClick:()=>X(e.id),children:(0,v.jsx)(u.gc,{type:"solid",icon:"trash-can"})})})]})]},0):"bigcommerce"==e.created_from?(0,v.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,v.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,v.jsx)(m.A,{className:"h-100 invert",src:(0,u.pc)("media/icons/platform-icons/bigcommerce.svg"),height:20,width:20,alt:"bigcommerce",fluid:!0})}),(0,v.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:null!==(o=null===ve||void 0===ve?void 0:ve.bigcommerce)&&void 0!==o?o:"BigCommerce"})]})}),(0,v.jsxs)("div",{className:"d-flex flex-grow-1 flex-column mx-0 mx-sm-3",children:[(0,v.jsx)("div",{className:"mb-2 w-100",children:(0,v.jsx)(n.A.Control,{id:"bcm_c_input",size:"lg",placeholder:'Enter your "magento" store URL',value:e.domain,readOnly:!0})}),e.modified?(0,v.jsx)("span",{className:"text-gray-700 fs-8 fw-medium",children:(0,P.dz)(null!==(d=null===ve||void 0===ve?void 0:ve.last_synced)&&void 0!==d?d:"",{time:(0,P.S)(e.modified)})}):null]}),(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)(a.A,{id:"bcm_c_btn",className:"border-0 d-flex signInWithBrand signIn-Bigcommerce mb-2",onClick:()=>(0,M.VQ)(e.id,ee),children:[(0,v.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,v.jsx)("img",{src:(0,u.pc)("media/icons/platform-icons/bigcommerce.svg"),height:20,width:20,alt:"bigcommerce"})}),(0,v.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,v.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:null!==(c=null===ve||void 0===ve?void 0:ve.sync_products)&&void 0!==c?c:"Sync Products"})})]})})]},1):"shopify"==e.created_from?(0,v.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,v.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,v.jsx)(m.A,{className:"h-100",src:(0,u.pc)("media/icons/platform-icons/shopify.svg"),height:20,width:20,alt:"shopify",fluid:!0})}),(0,v.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:null!==(r=null===ve||void 0===ve?void 0:ve.shopify)&&void 0!==r?r:"Shopify"})]})}),(0,v.jsx)("div",{className:"d-flex flex-grow-1",children:(0,v.jsxs)("div",{className:"mb-2 w-100 mx-0 mx-sm-3",children:[(0,v.jsx)(n.A.Control,{id:"shopify_c_input",size:"lg",placeholder:"example.myshopify.com",value:e.domain,readOnly:!0}),e.modified?(0,v.jsx)("span",{className:"text-gray-700 fs-8 fw-medium",children:(0,P.dz)(null!==(h=null===ve||void 0===ve?void 0:ve.last_synced)&&void 0!==h?h:"",{time:(0,P.S)(e.modified)})}):""]})}),(0,v.jsxs)("div",{className:"d-flex flex-shrink-0",children:[(0,v.jsxs)(a.A,{id:"shopify_c_btn",className:"btn border-0 d-flex signInWithBrand signIn-Shopify mb-2",value:"shopify",onClick:()=>(0,M.Tn)(e.id,ee),children:[(0,v.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,v.jsx)("img",{src:(0,u.pc)("media/icons/platform-icons/shopify.svg"),height:20,width:20,alt:"shopify"})}),(0,v.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,v.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:null!==(p=null===ve||void 0===ve?void 0:ve.btn_shopify)&&void 0!==p?p:"Connect Shop"})})]}),localStorage.getItem("shopifyLogin")?"":(0,v.jsx)("div",{className:"ms-2",children:(0,v.jsx)(a.A,{id:"shopify_c_d_btn",variant:"icon",size:"lg",className:"btn-active-danger","aria-label":"delete",onClick:()=>X(e.id),children:(0,v.jsx)(u.gc,{type:"solid",icon:"trash-can"})})})]})]},2):"magento"==e.created_from?(0,v.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,v.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,v.jsx)("img",{className:"img-fluid h-100",src:(0,u.pc)("media/icons/platform-icons/magento.svg"),height:20,width:20,alt:"magento"})}),(0,v.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:null!==(x=null===ve||void 0===ve?void 0:ve.magento)&&void 0!==x?x:"Magento"})]})}),(0,v.jsxs)("div",{className:"d-flex flex-grow-1 flex-column mx-0 mx-sm-3",children:[(0,v.jsxs)("div",{className:"mb-2 w-100",children:[(0,v.jsx)(n.A.Control,{id:"magento_c_url_input",className:"mb-3",size:"lg",placeholder:null!==(g=null===ve||void 0===ve?void 0:ve.plc_magento)&&void 0!==g?g:'Enter your "magento" store URL',value:null===e||void 0===e?void 0:e.domain,readOnly:!0}),(0,v.jsxs)(B.A,{variant:"success",className:"p-2 rounded-1 mb-2",children:[(0,v.jsxs)(B.A.Heading,{className:"h5 mb-1",children:[(0,v.jsxs)("span",{className:"text-muted",children:[(0,v.jsx)(u.gc,{icon:"store",iconClass:"me-1"})," ",null!==(b=null===ve||void 0===ve?void 0:ve.label_store)&&void 0!==b?b:""," "]}),null===e||void 0===e?void 0:e.storeId]}),e.modified?(0,v.jsx)("p",{className:"mb-0",children:(0,P.dz)(null!==(f=null===ve||void 0===ve?void 0:ve.last_synced)&&void 0!==f?f:"",{time:(0,P.S)(e.modified)})}):""]})]}),(0,v.jsx)("span",{className:"text-gray-700 fs-8 fw-medium",children:null!==(j=null===ve||void 0===ve?void 0:ve.text_magento)&&void 0!==j?j:"Note: Only Compatible with Magento 2.x"})]}),(0,v.jsxs)("div",{className:"d-flex flex-shrink-0",children:[(0,v.jsxs)(a.A,{id:"magento_c_btn",className:"border-0 d-flex signInWithBrand signIn-Magento mb-2",onClick:()=>(0,M.Gg)(null===e||void 0===e?void 0:e.storeId,null===e||void 0===e?void 0:e.accessToken,null===e||void 0===e?void 0:e.shop,(l=>{!0===l?Q(null===e||void 0===e?void 0:e.domain):l||ee()})),children:[(0,v.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,v.jsx)("img",{src:(0,u.pc)("media/icons/platform-icons/magento.svg"),height:20,width:20,alt:"magento"})}),(0,v.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,v.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:null!==(_=null===ve||void 0===ve?void 0:ve.sync_products)&&void 0!==_?_:"Sync Products"})})]}),(0,v.jsx)("div",{className:"ms-2",children:(0,v.jsx)(a.A,{id:"magento_c_d_btn",variant:"icon",size:"lg",className:"btn-active-danger","aria-label":"delete",onClick:()=>X(e.id),children:(0,v.jsx)(u.gc,{type:"solid",icon:"trash-can"})})})]})]},3):"woocommerce"==e.created_from?(0,v.jsxs)("div",{className:"syncPro_modal_wrapper mb-2 mb-lg-3 mb-xl-4",children:[(0,v.jsx)("div",{className:"d-flex flex-shrink-0",children:(0,v.jsxs)("div",{className:"d-flex align-items-center mb-2 py-1",children:[(0,v.jsx)("span",{className:"symbol symbol-30 me-2",children:(0,v.jsx)("img",{className:"img-fluid h-100",src:(0,u.pc)("media/icons/platform-icons/woocommerce.svg"),height:20,width:20,alt:"twitter"})}),(0,v.jsx)("span",{className:"fw-semibold fs-8 text-ellipsis",children:null!==(y=null===ve||void 0===ve?void 0:ve.woocommerce)&&void 0!==y?y:"Woocommerce"})]})}),(0,v.jsx)("div",{className:"d-flex flex-grow-1 flex-column mx-0 mx-sm-3",children:(0,v.jsxs)("div",{className:"mb-2 w-100",children:[(0,v.jsx)(n.A.Control,{id:"woco_c_input",size:"lg",placeholder:null!==(N=null===ve||void 0===ve?void 0:ve.plc_woocommerce)&&void 0!==N?N:'Enter your "woocommerce" store URL',value:null===e||void 0===e?void 0:e.domain,readOnly:!0}),e.modified?(0,v.jsx)("span",{className:"text-gray-700 fs-8 fw-medium",children:(0,P.dz)(null!==(w=null===ve||void 0===ve?void 0:ve.last_synced)&&void 0!==w?w:"",{time:(0,P.S)(e.modified)})}):""]})}),(0,v.jsxs)("div",{className:"d-flex flex-shrink-0",children:[(0,v.jsxs)(a.A,{id:"woco_c_btn",className:"border-0 d-flex signInWithBrand signIn-Woocommerce mb-2",onClick:()=>(0,M.KT)(null===e||void 0===e?void 0:e.id,ee),children:[(0,v.jsx)("span",{className:"h-38px w-38px d-flex align-items-center flex-shrink-0 signInWithBrandIcon me-1 bg-white",children:(0,v.jsx)("img",{src:(0,u.pc)("media/icons/platform-icons/woocommerce.svg"),height:20,width:20,alt:"woocommerce"})}),(0,v.jsx)("div",{className:"overflow-hidden signIn_txt",children:(0,v.jsx)("span",{className:"text-white mb-0 w-100 fs-8 fw-medium text-ellipsis mx-1",children:null!==(A=null===ve||void 0===ve?void 0:ve.sync_products)&&void 0!==A?A:"Sync Products"})})]}),(0,v.jsx)("div",{className:"ms-2",children:(0,v.jsx)(a.A,{id:"woco_c_d_btn",variant:"icon",size:"lg",className:"btn-active-danger","aria-label":"delete",onClick:()=>X(e.id),children:(0,v.jsx)(u.gc,{type:"solid",icon:"trash-can"})})})]})]},4):void 0}))})]}):null,(0,v.jsx)(I.A,{title:null!==($=null===ve||void 0===ve?void 0:ve.btn_req)&&void 0!==$?$:"Request Platform",children:(0,v.jsxs)(a.A,{variant:"secondary",children:[(0,v.jsx)(u.gc,{icon:"plus"}),null!==(Y=null===ve||void 0===ve?void 0:ve.btn_req)&&void 0!==Y?Y:"Request Platform"]})})]})})]})}}const H=e=>{let{icon:l,title:s,onClick:i}=e;return(0,v.jsx)(_.A,{sm:6,children:(0,v.jsx)(o.A,{id:"m-".concat(l,"_btn"),className:"card-stretch gutter-b cursor-pointer",onClick:i,children:(0,v.jsxs)(o.A.Body,{className:"flex-column f-center px-2",style:{height:150},children:[(0,v.jsx)("span",{className:"h-40px w-40px rounded-2 bg-dark text-light mb-3 f-center fs-4",children:(0,v.jsx)(u.gc,{icon:l})}),(0,v.jsx)("h5",{className:"text-center fs-8",children:s})]})})})},z=e=>{var l,s,i,t,o,a;let{show:n,handleClose:d,uploadCsv:c,onAddProduct:r}=e;const u=null!==(l=null===(s=window)||void 0===s||null===(i=s.APP_CONTENT)||void 0===i?void 0:i.manual_upload)&&void 0!==l?l:"";return(0,v.jsxs)(f.A,{show:n,size:"md",onHide:d,id:"manual_upload_m",centered:!0,children:[(0,v.jsx)(f.A.Header,{closeButton:!0,children:(0,v.jsx)(f.A.Title,{children:null!==(t=null===u||void 0===u?void 0:u.manual_upload_products)&&void 0!==t?t:""})}),(0,v.jsx)(f.A.Body,{}),(0,v.jsx)(f.A.Body,{children:(0,v.jsx)("div",{className:"syncPro_modal",children:(0,v.jsxs)(j.A,{className:"px-sm-10",children:[(0,v.jsx)(H,{icon:"download",title:null!==(o=null===u||void 0===u?void 0:u.upload_csv_file)&&void 0!==o?o:"",onClick:c}),(0,v.jsx)(H,{icon:"bag-shopping-plus",title:null!==(a=null===u||void 0===u?void 0:u.add_single_product)&&void 0!==a?a:"",onClick:r})]})})})]})};class F extends i.Component{constructor(){super(...arguments),this.state={selectedFile:"",filename:"",selected:"",uploadedFileName:"",isLoading:!1,loading:!1},this.uppyUploader=new C.A([".csv"]),this.onUploadCSV=()=>{const{filename:e}=this.state,{countAllPage:l,fromOB:s,navigate:i}=this.props;(new FormData).append("csv_url",e),i?(0,M.$g)(e,this.onClose,l,s,i):(0,M.$g)(e,this.onClose,l)},this.onClose=()=>{this.setState({selectedFile:"",filename:"",selected:"",uploadedFileName:"",isLoading:!1,loading:!1},(()=>{this.uppyUploader.uppy.cancelAll(),this.props.onHide()}))}}componentDidMount(){this.uppyUploader.uppy.on("transloadit:result",((e,l)=>{this.setState({loading:!1,selectedFile:l.id,filename:"".concat(k.$r).concat(l.id,".").concat(l.ext),selected:"".concat(k.$r).concat(l.id,".").concat(l.ext),uploadedFileName:l.name},(()=>{setTimeout((()=>{this.uppyUploader.uppy.cancelAll()}),300)}))})),this.uppyUploader.uppy.on("file-added",(e=>this.setState({loading:!0})))}render(){var e,l,s,i,t,o;const{show:n,content:d}=this.props,{loading:c,uploadedFileName:r}=this.state;return(0,v.jsxs)(f.A,{show:n,onHide:this.onClose,size:"md",id:"ImportProducts",centered:!0,children:[(0,v.jsx)(f.A.Header,{closeButton:!0,children:(0,v.jsx)(f.A.Title,{children:null!==(e=null===d||void 0===d?void 0:d.heading)&&void 0!==e?e:"Import products by csv"})}),(0,v.jsxs)(f.A.Body,{children:[(0,v.jsxs)("p",{className:"mb-2 fw-medium",children:[null!==(l=null===d||void 0===d?void 0:d.sub_heading1)&&void 0!==l?l:"Download the",(0,v.jsxs)(p.N_,{id:"download_csv",to:(0,u.pc)("media/downloads/sample-product.csv"),target:"_blank",className:"btn-link",title:"CSV",download:!0,children:[null!==(s=null===d||void 0===d?void 0:d.sub_heading2)&&void 0!==s?s:"sample csv template","\xa0"]}),null!==(i=null===d||void 0===d?void 0:d.sub_heading3)&&void 0!==i?i:"to see an example of the format required"]}),(0,v.jsx)("div",{className:"w-100 mb-2",children:(0,v.jsx)(N.OX,{proudlyDisplayPoweredByUppy:!1,hideUploadButton:!0,showProgressDetails:!0,disableThumbnailGenerator:!1,width:"100%",style:{padding:0},id:"upload_csv",showRemoveButtonAfterComplete:!1,uppy:this.uppyUploader.uppy})}),(0,v.jsx)("p",{className:"mb-0 fw-medium text-gray-500",children:c?(null===d||void 0===d?void 0:d.loading)||"":r||(null===d||void 0===d?void 0:d.your_file)||""})]}),(0,v.jsxs)(f.A.Footer,{children:[(0,v.jsx)(a.A,{id:"close_import_btn",variant:"secondary",size:"sm",className:"btn-min-w me-3",onClick:this.onClose,children:null!==(t=null===d||void 0===d?void 0:d.btn_cancel)&&void 0!==t?t:"Cancel"}),(0,v.jsx)(a.A,{id:"import_btn",variant:"primary",size:"sm",className:"btn-min-w me-3".concat(""==r?" disabled":""),onClick:this.onUploadCSV,children:null!==(o=null===d||void 0===d?void 0:d.btn_upload)&&void 0!==o?o:"Upload and continue"})]})]})}}const K=/^(http:\/\/|https:\/\/).+/,W=e=>{let{show:l,onHide:s,refreshProducts:t,m_url:o}=e;const[d,c]=(0,i.useState)([]),[r,u]=(0,i.useState)(!1),[m,h]=(0,i.useState)(""),[x,g]=(0,i.useState)(null),[b,j]=(0,i.useState)(""),[_,N]=(0,i.useState)(!1),[w,A]=(0,i.useState)(""),C=e=>{N(!1),A(e),e||(s(),t())};return(0,v.jsxs)(f.A,{show:l,onHide:s,size:"md",centered:!0,children:[(0,v.jsx)(f.A.Header,{closeButton:!0,children:(0,v.jsx)(f.A.Title,{children:"Connect Your Store"})}),(0,v.jsxs)(f.A.Body,{className:"p-5",children:[(0,v.jsx)("p",{className:"h5",children:"You are trying to connect the Store. Please Enter Access Token for your website."}),(0,v.jsxs)(n.A.Group,{className:"mb-3",children:[(0,v.jsx)(n.A.Label,{children:"Access Token"}),(0,v.jsx)("div",{className:"position-relative",children:(0,v.jsxs)("span",{className:"p-0 w-100 ".concat(r?"spinner":""," spinner-gray"),children:[(0,v.jsx)(n.A.Control,{size:"lg",className:"fw-bold ".concat(w?"is-invalid":""),placeholder:"Enter Access Token",value:m,onChange:e=>h(e.target.value),id:"accessToken",required:!0}),(0,v.jsx)("span",{className:"invalid-feedback",children:w})]})})]}),d&&d.length>0?(0,v.jsxs)(n.A.Group,{className:"mb-3",children:[(0,v.jsx)(n.A.Label,{children:"Choose Store"}),(0,v.jsx)(y.Ay,{className:"selectpicker selectpicker-lg",classNamePrefix:"selectpicker",options:d,value:b,onChange:e=>j(e)})]}):null,(0,v.jsx)(B.A,{variant:"warning",className:"rounded-1 p-2",children:"Note: Only Compatible with Magento 2.x"}),(0,v.jsxs)("p",{className:"mb-3",children:["How to generate access Token. ",(0,v.jsx)(p.N_,{className:"btn btn-link p-0",to:"https://devdocs.magento.com/guides/v2.4/get-started/authentication/gs-authentication-token.html",alt:"How to generate access Token.",target:"_blank",title:"How to generate access Token.",children:"Click here"})," "]})]}),(0,v.jsx)(f.A.Footer,{children:(0,v.jsxs)("div",{className:"d-flex align-items-center justify-content-end w-100",children:[(0,v.jsx)(a.A,{variant:"secondary",className:"me-2",onClick:()=>C(),children:"Close"}),x?(0,v.jsx)(a.A,{variant:"primary",id:"sync_pro_btn_",className:"".concat(_?"spinner":""),onClick:()=>{var e;N(!0),(0,M.Gg)(null!==(e=null===b||void 0===b?void 0:b.value)&&void 0!==e?e:"",m,K.test(o)?o:"https://".concat(o),C,null===b||void 0===b?void 0:b.websiteId)},children:"Sync Product"}):(0,v.jsx)(a.A,{variant:"primary",id:"verify_tok_btn",onClick:()=>{var e=o;u(!0),K.test(e)||(e="https://".concat(e)),(0,M.G4)({accessToken:m,magentourl:e}).then((e=>{const{status:l,storelist:s,message:i}=e.data;if(l&&Array.isArray(s)){let e=s.map((e=>({label:e.name,value:e.code,websiteId:e.website_id})));c(e),g(s),u(!1),s.length&&j(e[0])}else(0,P.r$)(Array.isArray(s)?i:s.message),u(!1)}))},children:"Verify Token"})]})})]})};var $=s(18633),Y=s(1391),Z=s(48459),q=s(80322),V=s(26787),J=s(66345);const Q=e=>(0,v.jsx)("th",{className:"fw-bold text-nowrap",style:{minWidth:e.width},children:e.children});class X extends i.Component{constructor(){super(...arguments),this.state={productsyncmodal:!0,currentPage:1,showPost:10,showAddProduct:!1,searchText:"",paginationItems:[],editProductData:null,selectedProducts:[],manualSyncModal:!1,uploadCsv:!1,productSync:!1,productName:"",addMagento:!1,loading:!0,m_url:"",searchLoding:!1,searching:!1},this.pageContent=window.APP_CONTENT.product_catalog||{},this.handleMessage=e=>{try{const l=(0,P.KK)(e.data),{code:s,type:i}=l;"shopifyLogin"==i&&s&&((0,M.Tn)(s,this.refreshProducts),setTimeout((()=>{this.setState({productSync:!1,manualSyncModal:!1,productName:""},(()=>this.props.shopifyProducts()))}),200))}catch(l){console.log("--- handleMessage error ---",l)}},this.nextPrev=e=>l=>{this.setState({currentPage:e},(()=>this.props.fetchProductList(e,10,"",this.state.searchText,this.generatePagination)))},this.searchProduct=(0,P.sg)((()=>{const{searchText:e}=this.state,l=(null===e||void 0===e?void 0:e.length)>1?e:"";this.setState({loading:!0,searchLoding:!0,currentPage:1},(()=>this.props.fetchProductList(1,10,"",l,this.generatePagination)))}),500),this.changePage=e=>{const{showPost:l,searchText:s}=this.state;this.setState({currentPage:e},(()=>{this.props.fetchProductList(e,l,"",s,this.generatePagination)}))},this.generatePagination=()=>{const{currentPage:e}=this.state,{total_pages:l}=this.props,s=10;let i=[];if(l<=s)i=(0,P.OZ)(l);else if(e<=5)i=(0,P.OZ)(s);else if(e>l-5)i=Array.from({length:s},((e,i)=>l-s+i+1));else{const l=Math.floor(e-5);i=Array.from({length:s},((e,s)=>l+s))}1!==i[0]&&(i.unshift(1),2!==i[1]&&i.splice(1,0,"...")),i[i.length-1]!==l&&(i[i.length-1]!==l-1&&i.push("..."),i.push(l)),this.setState({loading:!1,paginationItems:i,searchLoding:!1})},this.onEditPost=e=>{(0,q.Yj)("product_catalog","",!0)&&this.setState({editProductData:e,showAddProduct:!0})},this.onProductSelect=(e,l)=>{const{selectedProducts:s}=this.state;l?this.setState({selectedProducts:[...s,e]}):this.setState({selectedProducts:s.filter((l=>l!=e))})},this.onAllProductSelect=e=>{e?this.setState({selectedProducts:this.props.allProducts.map((e=>e.id))}):this.setState({selectedProducts:[]})},this.deleteAllProduct=e=>{const{ACTION_PRODUCT_DELETE:l}=this.props,{selectedProducts:s,paginationItems:i}=this.state;var t,o,a,n,d,c,r,u;(0,q.Yj)("product_catalog","",!0)&&(0,P.l1)({title:null!==(t=null===(o=this.pageContent)||void 0===o?void 0:o.are_you_sure)&&void 0!==t?t:"",text:(0,P.dz)(null!==(a=null===(n=this.pageContent)||void 0===n?void 0:n.are_you_sure_msg)&&void 0!==a?a:"",{count:this.state.selectedProducts.length}),icon:"warning",showCancelButton:!0,confirmButtonText:null!==(d=null===(c=this.pageContent)||void 0===c?void 0:c.delete_pro)&&void 0!==d?d:"",cancelButtonText:null!==(r=null===(u=this.pageContent)||void 0===u?void 0:u.cancel)&&void 0!==r?r:""}).then((t=>{var o,a,n,d;if(t.value){const t=(0,P.HA)();l({id:e?[e.id]:s},(()=>{var e,l;i.length>1&&this.setState({loading:!0},(()=>this.refreshProducts())),(0,P._q)(t,"success",null!==(e=null===(l=this.pageContent)||void 0===l?void 0:l.success_deleted)&&void 0!==e?e:"")})),this.onAllProductSelect()}else"cancel"===t.dismiss&&(0,P.k1)((0,P.dz)(null!==(o=null===(a=this.pageContent)||void 0===a?void 0:a.safe_deleted)&&void 0!==o?o:"",{count:(null===(n=this.state)||void 0===n||null===(d=n.selectedProducts)||void 0===d?void 0:d.length)||0}))}))},this.checkTour=async()=>{var e;const l=(0,P.lL)("tourStep"),i=null===(e=(0,P.lL)("isTour"))||void 0===e||e,{default:t}=await s.e(8695).then(s.bind(s,8695)),{tour:o}=new t(this.props.navigate,!1,this.props.dispatch);i||"#upload-products"!=(null===l||void 0===l?void 0:l.id)||((0,P.n4)("tourStep",{id:"#tag_pro",step:7}),setTimeout((()=>{var e;return o.drive(null!==(e=null===l||void 0===l?void 0:l.step)&&void 0!==e?e:6)}),400))},this.refreshProducts=e=>{const{searchText:l}=this.state;this.setState({productSync:!1}),this.props.fetchProductList(1,10,"",e?l:"",this.generatePagination),this.props.shopifyProducts()},this.showManualSyncModal=e=>{(0,q.Yj)("product_catalog","",!0)&&this.setState({[e]:!0})},this.onDelete=e=>{var l,s,i,t,o,a,n,d;(0,q.Yj)("product_catalog","",!0)&&(0,P.l1)({icon:"warning",title:null!==(l=null===(s=this.pageContent)||void 0===s?void 0:s.are_you_sure)&&void 0!==l?l:"",html:(0,P.dz)(null!==(i=null===(t=this.pageContent)||void 0===t?void 0:t.delete_pro_catalog)&&void 0!==i?i:"",{COMPANY_NAME:J.SxH}),showCancelButton:!0,cancelButtonText:null!==(o=null===(a=this.pageContent)||void 0===a?void 0:a.cancel)&&void 0!==o?o:"",confirmButtonText:null!==(n=null===(d=this.pageContent)||void 0===d?void 0:d.delete_pro)&&void 0!==n?n:""}).then((l=>{var s,i;l.value?this.props.STORE_DELETE(e,this.refreshProducts):"cancel"===l.dismiss&&(0,P.k1)(null!==(s=null===(i=this.pageContent)||void 0===i?void 0:i.safe_delete)&&void 0!==s?s:"")}))}}componentDidMount(){const{currentPage:e,showPost:l,searchText:s}=this.state;this.props.shopifyProducts(),this.props.fetchProductList(e,l,"",s,this.generatePagination),window.addEventListener("message",this.handleMessage);const i=(0,P.u0)();if(null!==i&&void 0!==i&&i.success)(0,P.k1)("Product Synced Successfully!");else if("salesforce"==(null===i||void 0===i?void 0:i.state)&&null!==i&&void 0!==i&&i.code){var t;(0,M.KS)(null!==(t=null===i||void 0===i?void 0:i.code)&&void 0!==t?t:"")}}render(){var e,l,s,i,m,h,x,g,f,j,_,y,N,w,A,C,S,k,I,T,U,E,B,M,L,O,H,K,Y,q,J,X;const{currentPage:ee,addMagento:le,showAddProduct:se,searchText:ie,paginationItems:te,editProductData:oe,selectedProducts:ae,manualSyncModal:ne,uploadCsv:de,productSync:ce,productName:re,loading:ue,m_url:me,searchLoding:he,searching:pe}=this.state,{allProducts:ve,stores:xe,loadingProd_cat:ge}=this.props,be=(0,P.C2)(),fe=be?(null===ve||void 0===ve?void 0:ve.length)||pe:(null===xe||void 0===xe?void 0:xe.length)||(null===ve||void 0===ve?void 0:ve.length)||pe,je=null===(e=window)||void 0===e||null===(l=e.APP_CONTENT)||void 0===l?void 0:l.sideBar,_e=this.pageContent;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.A,{crumbs:[{name:null===je||void 0===je?void 0:je.productCatalog,link:"/products",icon:"bag-shopping"},{name:null===je||void 0===je?void 0:je.home,link:"/home"},{name:null===je||void 0===je?void 0:je.productCatalog,link:"/products"}],crumbIcon:"bag-shopping"}),(0,v.jsxs)("div",{className:"d-flex flex-column flex-column-fluid w-100 pb-5 products_",children:[(0,v.jsx)(t.A,{fluid:!0,className:be&&!fe?"f-center h-100vh":"container-catalogue",style:be?{}:{marginTop:"55px"},children:fe?(0,v.jsxs)(o.A,{className:"border-none w-100",style:be?{minHeight:"calc(100vh - 40px)"}:{},children:[(0,v.jsxs)(o.A.Header,{className:"f-between pt-lg-6 pt-4",children:[(0,v.jsx)("h4",{className:"text-xl",children:null!==(s=null===_e||void 0===_e?void 0:_e.heading)&&void 0!==s?s:"Product Catalog List"}),(0,v.jsxs)("div",{className:"d-flex justify-content-end flex-wrap flex-sm-row flex-column flex-grow-1",children:[(0,v.jsxs)(a.A,{id:"import_pro",variant:"dark",size:"sm",className:"me-sm-2 mb-2 text-nowrap",onClick:e=>this.showManualSyncModal("uploadCsv"),children:[(0,v.jsx)(u.gc,{type:"solid",icon:"download"}),null!==(i=null===_e||void 0===_e?void 0:_e.btn_import)&&void 0!==i?i:"Import product list"]}),(0,v.jsx)(a.A,{variant:"primary",size:"sm",className:"me-sm-2 mb-2 text-nowrap",onClick:e=>this.showManualSyncModal("productSync"),children:null!==(m=null===_e||void 0===_e?void 0:_e.btn_sync)&&void 0!==m?m:"Sync product catalog"}),(0,v.jsxs)(a.A,{id:"add_pro",variant:"primary",size:"sm",className:"mb-2 text-nowrap",onClick:e=>this.showManualSyncModal("showAddProduct"),children:[(0,v.jsx)(u.gc,{type:"solid",icon:"plus"}),null!==(h=null===_e||void 0===_e?void 0:_e.btn_add)&&void 0!==h?h:"Add product"]})]})]}),(0,v.jsxs)(o.A.Body,{className:"py-0",children:[(0,v.jsx)("div",{className:"d-flex align-items-start justify-content-between flex-wrap pt-3",children:(0,v.jsxs)("div",{className:"f-between w-100",children:[(0,v.jsx)("div",{className:"p-0 position-relative w-100 mb-2 d-flex flex-grow-1",style:{maxWidth:320},children:(0,v.jsxs)("span",{className:"p-0 w-100 ".concat(he?"spinner spinner-gray spinner-sm":""),children:[(0,v.jsx)(n.A.Control,{id:"search_pro",type:"text",className:"pe-8",value:ie,onChange:e=>this.setState({searchText:e.target.value,searching:!0},(()=>this.searchProduct())),placeholder:null!==(x=null===_e||void 0===_e?void 0:_e.placeholder_search)&&void 0!==x?x:"Search by product name, SKU, or URL"}),he?null:(0,v.jsx)("span",{id:"search_spinner",className:"h-38px w-38px text-gray-500 f-center position-absolute top-50 translate-middle fs-6",style:{right:-19},onClick:()=>ie?this.setState({searchText:""},(()=>this.searchProduct())):[],children:(0,v.jsx)(u.gc,{icon:ie?"xmark":"magnifying-glass"})})]})}),(0,v.jsxs)("div",{className:"f-center ms-3",children:[ae&&ve&&(ae.length>1||ae.length==ve.length)&&0!=ve.length?(0,v.jsxs)(a.A,{id:"d_selected_btn",variant:"primary",size:"sm",className:"mb-2 me-4",onClick:()=>this.deleteAllProduct(!1),children:[(0,v.jsx)(u.gc,{icon:"trash-can"}),ae.length==ve.length?null!==(g=null===_e||void 0===_e?void 0:_e.delete_all)&&void 0!==g?g:"":(0,P.dz)(null!==(f=null===_e||void 0===_e?void 0:_e.delete_selected)&&void 0!==f?f:"",{count:"(".concat((null===ae||void 0===ae?void 0:ae.length)||0,")")})]}):null,(0,v.jsxs)(p.N_,{variant:"secondary",id:"tag_pro",to:"/content/moderation/".concat(localStorage.getItem("wallId")?localStorage.getItem("wallId"):""),className:"btn btn-primary btn-sm me-sm-2 mb-2 text-nowrap",title:"Tag products",children:[(0,v.jsx)(u.gc,{type:"solid",icon:"tag"}),null!==(j=null===_e||void 0===_e?void 0:_e.btn_tag)&&void 0!==j?j:"Tag products"]})]})]})}),(0,v.jsxs)(d.A,{className:"mb-0 pb-3",size:"lg",responsive:!0,children:[(0,v.jsx)("thead",{className:"thead-light",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{className:"fw-bold flex items-center",children:(0,v.jsx)("div",{className:"form-check",children:(0,v.jsx)(n.A.Check,{id:"check_all_pro","aria-label":"checkall",checked:0!=ae.length&&ae.length==ve.length,onChange:e=>this.onAllProductSelect(e.target.checked)})})}),(0,v.jsx)(Q,{width:200,children:null!==(_=null===_e||void 0===_e||null===(y=_e.table_text)||void 0===y?void 0:y.product)&&void 0!==_?_:"Product"}),(0,v.jsx)(Q,{width:50,children:null!==(N=null===_e||void 0===_e||null===(w=_e.table_text)||void 0===w?void 0:w.price)&&void 0!==N?N:"Price"}),(0,v.jsxs)(Q,{width:50,children:[null!==(A=null===_e||void 0===_e||null===(C=_e.table_text)||void 0===C?void 0:C.discounted_price)&&void 0!==A?A:"Discounted Price",(0,v.jsx)(c.A,{placement:"top",overlay:(0,v.jsx)(r.A,{children:null!==(S=null===_e||void 0===_e||null===(k=_e.table_text)||void 0===k?void 0:k.tooltip_discount)&&void 0!==S?S:"This represents the price after subtracting the discount."}),children:(0,v.jsx)("span",{children:(0,v.jsx)(u.gc,{type:"solid",icon:"circle-info",iconClass:"fs-5 ms-1 text-gray-500"})})})]}),(0,v.jsx)(Q,{width:200,children:null!==(I=null===_e||void 0===_e||null===(T=_e.table_text)||void 0===T?void 0:T.product_url)&&void 0!==I?I:"Product URL"}),(0,v.jsx)(Q,{width:50,children:null!==(U=null===_e||void 0===_e||null===(E=_e.table_text)||void 0===E?void 0:E.product_id)&&void 0!==U?U:"Product Id"}),(0,v.jsx)(Q,{width:50,children:null!==(B=null===_e||void 0===_e||null===(M=_e.table_text)||void 0===M?void 0:M.category)&&void 0!==B?B:"Category"}),(0,v.jsx)(Q,{width:50,children:null!==(L=null===_e||void 0===_e||null===(O=_e.table_text)||void 0===O?void 0:O.sku)&&void 0!==L?L:"SKU"}),(0,v.jsx)(Q,{width:50,children:null!==(H=null===_e||void 0===_e||null===(K=_e.table_text)||void 0===K?void 0:K.tags)&&void 0!==H?H:"Tags"}),(0,v.jsx)("th",{className:"fw-bold text-nowrap text-end position-sticky end-0 pe-4",style:{minWidth:100},children:null!==(Y=null===_e||void 0===_e||null===(q=_e.table_text)||void 0===q?void 0:q.actions)&&void 0!==Y?Y:"Actions"})]})}),(0,v.jsx)("tbody",{children:(null===ve||void 0===ve?void 0:ve.length)>0&&!ue?ve.map(((e,l)=>(0,v.jsx)(b,{product:e,selectedProducts:ae,onProductSelect:this.onProductSelect,onEditPost:this.onEditPost,onDelete:this.deleteAllProduct,content:_e},l))):(0,v.jsx)("tr",{children:(0,v.jsx)("td",{className:"border-0",colSpan:"10",style:{textAlign:"center"},children:ue?(0,v.jsx)($.a,{bg:"body"}):(0,v.jsx)(Z.A,{title:null!==(J=null===_e||void 0===_e?void 0:_e.no_product)&&void 0!==J?J:"",desc:null!==(X=null===_e||void 0===_e?void 0:_e.no_product_desc)&&void 0!==X?X:"",icon:"product",height:"calc(100vh - 400px)"})})})})]}),(null===ve||void 0===ve?void 0:ve.length)>0&&(null===te||void 0===te?void 0:te.length)>1&&!ue?(0,v.jsxs)("ul",{className:"pagination pagination-sm mb-10 mt-5",children:[(0,v.jsx)("li",{className:"page-item",children:(0,v.jsx)("span",{className:"page-link cursor-pointer ".concat(1==ee?" disabled":" cursor-pointer"),onClick:this.nextPrev(ee-1),children:(0,v.jsx)(u.gc,{icon:"angle-left"})})}),te.map(((e,l)=>(0,v.jsx)("li",{id:"p_num_".concat(e),className:"page-item".concat(ee==e?" active":" cursor-pointer"," ").concat("..."==e?" disabled":""),onClick:()=>this.changePage(e),children:(0,v.jsx)("span",{className:"page-link",children:e})},l))),(0,v.jsx)("li",{className:"page-item",children:(0,v.jsx)("span",{className:"page-link cursor-pointer ".concat(ee==this.props.total_pages?" disabled":" cursor-pointer"),onClick:this.nextPrev(ee+1),children:(0,v.jsx)(u.gc,{icon:"angle-right"})})})]}):null]})]}):ge&&!ue?be?(0,v.jsx)(G,{isShopify:!0,show:ce,refreshProducts:this.refreshProducts,onDelete:this.onDelete,onHide:()=>this.setState({productSync:!1,productName:""}),product:re,stores:xe,addMagento:le,showMagento:e=>this.setState({addMagento:!0,productSync:!1,m_url:e}),showManualSyncModal:this.showManualSyncModal,content:null===_e||void 0===_e?void 0:_e.pop_sync}):(0,v.jsx)(R,{openManualSyncModal:()=>this.setState({manualSyncModal:!0}),openSyncProduct:e=>this.setState({productName:e,productSync:!0})}):null}),ce?(0,v.jsx)(G,{show:ce,refreshProducts:this.refreshProducts,onDelete:this.onDelete,onHide:()=>this.setState({productSync:!1,productName:""}),product:re,stores:xe,addMagento:le,showMagento:e=>this.setState({addMagento:!0,productSync:!1,m_url:e}),showManualSyncModal:this.showManualSyncModal,content:null===_e||void 0===_e?void 0:_e.pop_sync}):null,(0,v.jsx)(F,{show:de,onHide:()=>this.setState({uploadCsv:!1}),countAllPage:this.refreshProducts,content:null===_e||void 0===_e?void 0:_e.pop_import}),se?(0,v.jsx)(D,{showAddProduct:se,editProductData:oe,ACTION_PRODUCT_UPDATE:this.props.ACTION_PRODUCT_UPDATE,closePopup:()=>this.setState({showAddProduct:!1,editProductData:null}),ACTION_PRODUCT_ADD:this.props.ACTION_PRODUCT_ADD,content:null===_e||void 0===_e?void 0:_e.pop_add}):null,(0,v.jsx)(z,{show:ne,handleClose:()=>this.setState({manualSyncModal:!1}),uploadCsv:()=>this.setState({uploadCsv:!0,manualSyncModal:!1}),onAddProduct:()=>this.setState({showAddProduct:!0,manualSyncModal:!1})}),le&&(0,v.jsx)(W,{show:le,onHide:()=>this.setState({addMagento:!1}),refreshProducts:this.refreshProducts,m_url:me})]})]})}}const ee=(0,U.Ng)((e=>{var l,s,i,t;return{allProducts:null===(l=e.products)||void 0===l?void 0:l.allProducts,total_pages:null===(s=e.products)||void 0===s?void 0:s.total_pages,loadingProd_cat:null===(i=e.products)||void 0===i?void 0:i.loadingProd_cat,stores:null===(t=e.products)||void 0===t?void 0:t.connectedStores,data:e.products.loadingProd_cat,dataNew:e.products}}),(e=>({fetchProductList:(l,s,i,t,o)=>e((0,M.EU)(l,s,i,t,o)),ACTION_PRODUCT_ADD:(l,s)=>e((0,M.pV)(l,s)),ACTION_PRODUCT_UPDATE:(l,s)=>e((0,M.L1)(l,s)),ACTION_PRODUCT_DELETE:(l,s)=>e((0,M.HW)(l,s)),shopifyProducts:()=>e((0,M.Hx)()),STORE_DELETE:(l,s)=>e((0,M.yK)(l,s))})))((0,Y.A)(i.memo(X)))},61075:(e,l,s)=>{s.d(l,{A:()=>S});var i=s(9950),t=s(26661),o=s(86781),a=s(17595),n=s(68459),d=s(97937),c=s(73878),r=s(3302),u=s.n(r),m=s(75794),h=(s(34461),s(57182),s(93766),s(55856),s(67128),s(2772)),p=s(67446),v=s(70188),x=s(76955),g=s(51960),b=s(85608),f=s(54810),j=s(52867),_=s(44414);class y extends i.Component{constructor(e){super(e),this.state={backgroundModal:!1,ext:"",fileName:""},this.onBackgroundClose=e=>{this.uppy.cancelAll(),this.setState({backgroundModal:!1})},this.onBackgroundOpen=e=>{this.setState({backgroundModal:!0},(()=>{u()(".uppy-Dashboard-close").click((()=>{this.uppy.cancelAll(),this.setState({backgroundModal:!1})}))}))},this.uppy=new m.A({debug:!0,autoProceed:!1,restrictions:{maxFileSize:5e7,maxNumberOfFiles:1,minNumberOfFiles:1,allowedFileTypes:this.props.allowFiles}}).use(h.Ay,{target:"#a",params:{auth:{key:b.bG},steps:{store:{robot:b._8,bucket_region:b.YL,bucket:b.I2,key:b.jZ,secret:b.mD,path:this.props.isLocation?"request-feature/${file.id}.${file.ext}":b.yQ+"${file.id}.${file.ext}"}}},waitForEncoding:!0}).use(p.A,{target:m.A.Dashboard,companionUrl:b.ac}).use(v.A,{target:m.A.Dashboard,companionUrl:b.ac})}componentDidMount(){var e=this;this.uppy.on("transloadit:result",((l,s)=>{this.setState({ext:s.ext,fileName:s.basename}),e.props.onClickToupload(this.props.isLocation?"".concat(b.GG,"request-feature/").concat(s.id,".").concat(s.ext):"".concat(b.$r).concat(s.id,".").concat(s.ext),(()=>{setTimeout((()=>{this.uppy.cancelAll(),this.setState({backgroundModal:!1})}),300)}))}))}render(){var e,l,s,i,t,o;const{imageStyle:a,uploadedMedia:n,id:c,text:r}=this.props,{backgroundModal:u,ext:m,fileName:h}=this.state,p=e=>{switch(e){case"docx":return"file-doc";case"pdf":return"file-pdf";case"mp4":case"mov":return"file-video";default:return!1}};return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:"d-flex align-items-start justify-content-between flex-column py-1",children:n?(0,_.jsxs)("div",{className:"f-between w-100 bg-gray-100 rounded-2 p-4 align-items-center",children:[(0,_.jsxs)("div",{className:"d-flex flex-grow-1 align-items-center",style:{width:"calc(100% - 30px)"},children:[p(m)?(0,_.jsx)("div",{className:"f-center flex-shrink-0 me-3",style:{fontSize:"3rem"},children:(0,_.jsx)(f.gc,{type:"solid",icon:p(m),iconClass:"text-gray-700"})}):(0,_.jsx)(g.A,{id:"bg_image",className:"object-fit-cover rounded-2 me-3",src:n,height:60,width:60,alt:"",style:{maxHeight:60}}),m?(0,_.jsxs)("p",{className:"text-ellipsis fs-8 mb-0",children:[h,".",m]}):null]}),(0,_.jsx)(d.A,{variant:"icon",size:"sm",className:"rounded-circle bg-danger border-danger text-white h-20px w-20px",onClick:()=>this.props.onClickToupload("",(()=>{})),children:(0,_.jsx)(f.gc,{icon:"xmark"})})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(d.A,{id:c,variant:"light",className:"w-100",onClick:()=>this.setState({backgroundModal:!0}),children:[(0,_.jsx)(f.gc,{icon:"arrow-up-from-bracket"}),r||"Upload"]}),(0,_.jsxs)("p",{className:"text-gray-500 mt-1 fw-medium fs-9",children:[(0,_.jsx)(f.gc,{type:"solid",icon:"info-circle",iconClass:"me-1"}),(0,j.dz)(null!==(e=null===(l=window)||void 0===l||null===(s=l.APP_CONTENT)||void 0===s||null===(i=s.common)||void 0===i?void 0:i.allowed_file_types)&&void 0!==e?e:"",{types:null!==(t=null===(o=this.props.allowFiles)||void 0===o?void 0:o.join(", "))&&void 0!==t?t:""})]})]})}),u?(0,_.jsx)(x.KG,{animateOpenClose:!0,open:u,proudlyDisplayPoweredByUppy:!1,inline:!1,showProgressDetails:!0,height:750,browserBackButtonClose:!0,showRemoveButtonAfterComplete:!1,uppy:this.uppy,onRequestClose:this.onBackgroundClose,closeAfterFinish:!0,plugins:["Url"]}):null]})}}var N=s(66345),w=s(14313);class A extends i.Component{constructor(e){var l,s,i,t,o,a,n,d,c;super(e),this.content=null!==(l=null===(s=window)||void 0===s||null===(i=s.APP_CONTENT)||void 0===i?void 0:i.common)&&void 0!==l?l:{},this.submitForm=()=>{const{name:e,email:l,description:s,uploadedMedia:i}=this.state;let t=!(!e||(0,j.QT)(e)||0==String(e).trim()),o=!(!l||!(0,j.DT)(l)),a=!!(s&&s.length<=500);if(t&&o&&a){this.setState({isLoading:!0});const t={name:e,email:l,description:"<b>".concat(this.props.title,"</b>-").concat(s),file:i};(new w.A).post(N.xpU,t).then((e=>{var l,s,i,t;200==e.data.responseCode?((0,j.k1)(null!==(l=null===(s=e.data)||void 0===s?void 0:s.responseMessage)&&void 0!==l?l:""),setTimeout((()=>{var e,l,s,i,t,o;this.setState({isLoading:!1,name:null===(e=this.props.authorized)||void 0===e||null===(l=e.userData)||void 0===l||null===(s=l.user_data)||void 0===s?void 0:s.user.name,email:null===(i=this.props.authorized)||void 0===i||null===(t=i.userData)||void 0===t||null===(o=t.user_data)||void 0===o?void 0:o.user.emailId,description:"",uploadedMedia:"",uploadedUrl:"",nameErr:!1,emailErr:!1,descriptionErr:!1}),this.props.onCloseModel(!1)}),1e3)):(this.setState({isLoading:!1}),(0,j.r$)(null!==(i=null===(t=e.data)||void 0===t?void 0:t.responseMessage)&&void 0!==i?i:""))})).catch((e=>{var l,s,i,t,o;this.setState({isLoading:!1}),(0,j.r$)(null!==(l=null!==(s=null===e||void 0===e||null===(i=e.response)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.responseMessage)&&void 0!==s?s:null===(o=this.content)||void 0===o?void 0:o.some_error_occured)&&void 0!==l?l:"")}))}else this.setState({isLoading:!1,nameErr:!t,emailErr:!o,descriptionErr:!a})},this.onClickToupload=(e,l)=>this.setState({uploadedMedia:e},(()=>l())),this.onCloseModelFun=()=>{var e,l,s,i,t,o;this.setState({name:null===(e=this.props.authorized)||void 0===e||null===(l=e.userData)||void 0===l||null===(s=l.user_data)||void 0===s?void 0:s.user.name,email:null===(i=this.props.authorized)||void 0===i||null===(t=i.userData)||void 0===t||null===(o=t.user_data)||void 0===o?void 0:o.user.emailId,description:"",uploadedMedia:"",uploadedUrl:"",nameErr:!1,emailErr:!1,descriptionErr:!1}),this.props.onCloseModel(!1)},this.state={name:null===(t=this.props.authorized)||void 0===t||null===(o=t.userData)||void 0===o||null===(a=o.user_data)||void 0===a?void 0:a.user.name,email:null===(n=this.props.authorized)||void 0===n||null===(d=n.userData)||void 0===d||null===(c=d.user_data)||void 0===c?void 0:c.user.emailId,description:"",uploadedMedia:"",uploadedUrl:"",nameErr:!1,emailErr:!1,descriptionErr:!1,isLoading:!1}}render(){var e,l,s,i,c,r,u,m,h,p,v,x,g;const{show:b,title:f}=this.props,{name:j,email:N,description:w,nameErr:A,emailErr:C,descriptionErr:P,isLoading:S,uploadedMedia:k}=this.state,{content:D}=this;return(0,_.jsxs)(t.A,{id:"reqFeature",size:"lg",show:b,"aria-labelledby":"reqFeature",tabIndex:"0",centered:!0,backdrop:"static",onHide:this.onCloseModelFun,children:[(0,_.jsx)(t.A.Header,{closeButton:!0,children:(0,_.jsx)(t.A.Title,{children:null!==(e=null!==f&&void 0!==f?f:null===D||void 0===D?void 0:D.request_feature)&&void 0!==e?e:""})}),(0,_.jsxs)(t.A.Body,{className:"p-lg-7 p-3 demo_schedule position-relative",children:[(0,_.jsxs)(o.A,{className:"mb-3",children:[(0,_.jsxs)(a.A.Group,{as:n.A,md:"6",children:[(0,_.jsxs)(a.A.Label,{children:[null!==(l=null===D||void 0===D?void 0:D.full_name)&&void 0!==l?l:""," ",(0,_.jsx)("strong",{className:"text-danger",children:"*"})]}),(0,_.jsx)(a.A.Control,{id:"r_f_name",required:!0,type:"text",placeholder:null!==(s=null===D||void 0===D?void 0:D.full_name)&&void 0!==s?s:"",className:A?"is-invalid":"",value:j,onChange:e=>this.setState({name:e.target.value,nameErr:!1})}),A&&(0,_.jsx)("div",{className:"invalid-feedback",children:null!==(i=null===D||void 0===D?void 0:D.fill_full_name)&&void 0!==i?i:""})]}),(0,_.jsxs)(a.A.Group,{as:n.A,md:"6",children:[(0,_.jsxs)(a.A.Label,{children:[null!==(c=null===D||void 0===D?void 0:D.email)&&void 0!==c?c:""," ",(0,_.jsx)("strong",{className:"text-danger",children:"*"})]}),(0,_.jsx)(a.A.Control,{id:"r_f_email",required:!0,type:"email",placeholder:"example@example.com",className:C?"is-invalid":"",value:N,onChange:e=>this.setState({email:e.target.value,emailErr:!1})}),C&&(0,_.jsx)("div",{className:"invalid-feedback",children:""!=N?null!==(r=null===D||void 0===D?void 0:D.valid_email)&&void 0!==r?r:"":null!==(u=null===D||void 0===D?void 0:D.enter_email)&&void 0!==u?u:""})]})]}),(0,_.jsxs)(a.A.Group,{as:n.A,className:"mb-3",children:[(0,_.jsxs)(a.A.Label,{children:[null!==(m=null===D||void 0===D?void 0:D.description)&&void 0!==m?m:""," ",(0,_.jsx)("strong",{className:"text-danger",children:"*"})]}),(0,_.jsx)(a.A.Control,{as:"textarea",id:"r_f_desc",placeholder:null!==(h=null===D||void 0===D?void 0:D.enter_desc)&&void 0!==h?h:"",className:"".concat(P?"is-invalid":""," textarea-min-row-6"),maxLength:500,onChange:e=>this.setState({description:e.target.value,descriptionErr:!1}),value:w}),(0,_.jsxs)("div",{className:"f-between",children:[(0,_.jsx)("div",{className:"invalid-feedback d-block",children:P&&null!==(p=null===D||void 0===D?void 0:D.field_req)&&void 0!==p?p:""}),(0,_.jsxs)("span",{className:"fs-10 text-muted pt-1",children:[null===w||void 0===w?void 0:w.length,"/500"]})]})]}),(0,_.jsx)(a.A.Group,{as:n.A,className:"mb-3",children:(0,_.jsx)(y,{id:"sugg_doc",imageStyle:{paddingBottom:"66%"},uploadedMedia:k,onClickToupload:this.onClickToupload,text:null!==(v=null===D||void 0===D?void 0:D.upload_file)&&void 0!==v?v:"",allowFiles:["image/*",".docx",".pdf",".mp4",".mov"],isLocation:!0})})]}),(0,_.jsxs)(t.A.Footer,{children:[(0,_.jsx)(d.A,{id:"r_f_cancel",variant:"secondary",className:"ms-3 btn-min-w",onClick:this.onCloseModelFun,children:null!==(x=null===D||void 0===D?void 0:D.cancel)&&void 0!==x?x:""}),(0,_.jsx)(d.A,{id:"r_f_submit",className:"ms-3 btn-min-w ".concat(S?"spinner":""),onClick:this.submitForm,children:null!==(g=null===D||void 0===D?void 0:D.submit)&&void 0!==g?g:""})]})]})}}const C=(0,c.Ng)((e=>({authorized:e.authorized})))(A);class P extends i.Component{constructor(e){super(e),this.state={show:!1}}render(){const{title:e}=this.props,{show:l}=this.state;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("span",{onClick:()=>this.setState({show:!l}),children:this.props.children}),(0,_.jsx)(C,{show:l,onCloseModel:()=>this.setState({show:!1}),title:e})]})}}const S=P}}]);