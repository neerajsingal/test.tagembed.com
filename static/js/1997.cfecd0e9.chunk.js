"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[1997],{1997:(l,e,i)=>{i.r(e),i.d(e,{default:()=>_});var o=i(9950),a=i(73878),n=i(4342),t=i(97937),s=i(351),d=i(45358),r=i(34483),c=i(5830),v=i(1093),m=i(95942),u=i(42074),h=i(88053),x=i(59051),b=i.n(x),p=i(18633),g=i(54810),j=i(26806),y=i(80322),f=i(1391),w=i(52867),N=i(43929),C=i(54480),A=i(44414);class k extends o.Component{constructor(){super(...arguments),this.state={loading:!0,userRole:null},this.getCollaborators=l=>{const{setCollaboratorList:e}=this.props;(0,y.xl)().then(i=>{const o=""==l.collaborator||0==l.collaborator.activeAccount?3:0,{workspace:a}=i.data.responseData;e(a),this.setState({loading:!1,userRole:o})}).catch(l=>{this.setState({loading:!1},()=>{})})},this.modifyCollaborator=(l,e)=>{var i,o,a,n,t,s,d,r,c;const{updateCollaboratorPermission:v,deleteCollaborator:m}=this.props,u=null!==(i=null===(o=window)||void 0===o||null===(a=o.APP_CONTENT)||void 0===a?void 0:a.common)&&void 0!==i?i:null;(0,w.l1)({title:null!==(n=null===u||void 0===u?void 0:u.are_you_sure)&&void 0!==n?n:"",text:"delete"==e?null!==(t=null===u||void 0===u?void 0:u.delete_item)&&void 0!==t?t:"":null!==(s=null===u||void 0===u?void 0:u.modifying_setting)&&void 0!==s?s:"",icon:"warning",showCancelButton:!0,confirmButtonText:"delete"==e?null!==(d=null===u||void 0===u?void 0:u.yes_delete)&&void 0!==d?d:"":null!==(r=null===u||void 0===u?void 0:u.yes_change)&&void 0!==r?r:"",confirmButtonColor:"delete"!=e?"var(--bs-success)":"",cancelButtonText:null!==(c=null===u||void 0===u?void 0:u.cancel)&&void 0!==c?c:""}).then(i=>{i.isConfirmed&&("delete"==e?m({collaborators:String(l)}):v(l))})}}componentDidMount(){const{userData:l}=this.props;l&&this.getCollaborators(l)}componentWillReceiveProps(l){const{userData:e}=l;JSON.stringify(e)!=JSON.stringify(this.props.userData)&&this.getCollaborators(e)}render(){var l,e,i,o,a,x,y,f,C,k,_,D,U,S,B,P,T,L;const{loading:Y,userRole:z}=this.state,{collaboratorList:M,userData:I}=this.props,O=null!==(l=null===(e=window)||void 0===e?void 0:e.APP_CONTENT)&&void 0!==l?l:{},{collab:R,common:W,sideBar:H}=O,J=(0,w.C2)();return(0,A.jsx)(N.A,{userData:I,crumbs:[{name:null!==(i=null===H||void 0===H?void 0:H.collaborator)&&void 0!==i?i:"",link:"/home",icon:"grid-2",imgUrl:null===I||void 0===I||null===(o=I.user)||void 0===o?void 0:o.picture},{name:null!==(a=null===H||void 0===H?void 0:H.home)&&void 0!==a?a:"",link:"/home"},{name:null!==(x=null===H||void 0===H?void 0:H.collaborator)&&void 0!==x?x:""}],children:(0,A.jsx)(d.A,{fluid:J,className:"container-collaborator",children:(0,A.jsxs)(s.A,{children:[(0,A.jsxs)(s.A.Header,{className:"f-between d-flex",children:[(0,A.jsx)("h2",{className:"me-2 h4 my-3",children:null!==(y=null===R||void 0===R?void 0:R.title)&&void 0!==y?y:""}),(0,A.jsx)("div",{className:"f-center",children:(0,A.jsxs)(u.N_,{to:"/collaborator/add",className:"btn btn-primary my-2 btn-sm",title:null!==(f=null===R||void 0===R?void 0:R.invite)&&void 0!==f?f:"",children:[(0,A.jsx)(g.gc,{icon:"plus"}),null!==(C=null===R||void 0===R?void 0:R.invite)&&void 0!==C?C:""]})})]}),(0,A.jsx)(s.A.Body,{style:J?{height:"calc(100vh - 155px)",overflowY:"auto"}:{height:"calc(100vh - 255px)",overflowY:"auto"},children:(0,A.jsx)("div",{style:{minHeight:"calc(100vh - 287px)"},children:Y?(0,A.jsx)(p.a,{}):M.length>0?(0,A.jsx)("div",{className:"table-responsive",children:(0,A.jsxs)(v.A,{size:"lg",className:"align-middle gs-0 gy-3",children:[(0,A.jsx)("thead",{className:"thead-light",children:(0,A.jsx)("tr",{children:[{name:null!==(k=null===W||void 0===W?void 0:W.collaborator)&&void 0!==k?k:"",width:160},{name:null!==(_=null===W||void 0===W?void 0:W.invited)&&void 0!==_?_:"",width:130},{name:null!==(D=null===W||void 0===W?void 0:W.status)&&void 0!==D?D:"",width:100},{name:null!==(U=null===W||void 0===W?void 0:W.permission)&&void 0!==U?U:"",width:100},{name:null!==(S=null===W||void 0===W?void 0:W.invited_by)&&void 0!==S?S:"",width:120},{name:null!==(B=null===W||void 0===W?void 0:W.action)&&void 0!==B?B:"",width:70}].map((l,e)=>(0,A.jsx)("th",{className:"fw-bold text-nowrap ".concat("Actions"==l.name?"text-end":""),style:{minWidth:l.width},children:l.name},e))})}),(0,A.jsx)("tbody",{children:M.map(l=>{var e,i,o,a,s,d,v,x,p,j;return(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:(0,A.jsxs)("div",{className:"d-flex align-items-center",children:[(0,A.jsx)(h.A,{className:"symbol symbol-40 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:40,symbolClass:"symbol-label fs-6 bg-primary",name:l["UserCollab.name"],profileUrl:l["UserCollab.picture"],networkId:""}),(0,A.jsxs)("div",{className:"overflow-hidden",style:{maxWidth:200},children:[(0,A.jsx)("p",{className:"text-gray-dark fw-semibold mb-0 text-ellipsis fs-8",children:l["UserCollab.name"]}),(0,A.jsx)("span",{className:"fs-9 mb-0 text-gray-500 fw-medium text-ellipsis d-block",children:l["UserCollab.emailId"]})]})]})}),(0,A.jsxs)("td",{children:[(0,A.jsx)("p",{className:"text-gray-900 fw-medium mb-0 text-nowrap",children:b()(l["UserCollab.created"]).format("Do MMM YYYY")}),(0,A.jsx)("span",{className:"fs-9 fw-medium text-gray-500 text-nowrap",children:b().utc(new Date(l["UserCollab.created"])).format("h:mm a")})]}),(0,A.jsx)("td",{children:2!=l.status?(0,A.jsx)("label",{className:"form-check form-switch",children:(0,A.jsx)("input",{className:"form-check-input",type:"checkbox",checked:1==l.status,onChange:()=>this.props.updateStatus(l)})}):(0,A.jsx)(n.A,{bg:"",className:"badge-light-warning",children:null!==(e=null===W||void 0===W?void 0:W.pending)&&void 0!==e?e:""})}),(0,A.jsx)("td",{children:(0,A.jsx)("div",{className:"d-flex align-items-center",children:3==z?(0,A.jsxs)(r.A,{style:{minWidth:200},children:[(0,A.jsx)(r.A.Toggle,{variant:"secondary",className:"d-flex align-items-center w-100 justify-content-between bg-white fs-9",children:1==l.role?null!==(i=null===W||void 0===W?void 0:W.admin)&&void 0!==i?i:"":null!==(o=null===W||void 0===W?void 0:W.manager)&&void 0!==o?o:""}),(0,A.jsxs)(r.A.Menu,{className:"w-100",children:[(0,A.jsx)(r.A.Item,{onClick:()=>1==l.role?(0,w.r$)("Collaborator is already an admin."):this.modifyCollaborator(l,"change"),children:null!==(a=null===W||void 0===W?void 0:W.admin)&&void 0!==a?a:""},0),(0,A.jsx)(r.A.Item,{onClick:()=>2==l.role?(0,w.r$)("Collaborator is already a manager."):this.props.navigate("/collaborator/edit/".concat(l.id,"?permission=1")),children:null!==(s=null===W||void 0===W?void 0:W.manager)&&void 0!==s?s:""},1)]})]}):1==l.role?null!==(d=null===W||void 0===W?void 0:W.admin)&&void 0!==d?d:"":null!==(v=null===W||void 0===W?void 0:W.manager)&&void 0!==v?v:""})}),(0,A.jsx)("td",{children:(0,A.jsxs)("div",{className:"d-flex align-items-center cursor-pointer text-decoration-none",children:[(0,A.jsx)(h.A,{className:"symbol symbol-36 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:36,symbolClass:"symbol-label fs-6 bg-primary",name:l["UserAdmin.name"],profileUrl:l["UserAdmin.picture"]}),(0,A.jsx)("p",{className:"text-gray-dark fw-medium mb-0 text-ellipsis",children:l["UserAdmin.name"]})]})}),(0,A.jsx)("td",{className:"pr-0 text-end",children:(0,A.jsxs)("div",{className:"d-flex align-items-center justify-content-end",children:[(0,A.jsx)(c.A,{placement:"top",overlay:(0,A.jsx)(m.A,{children:null!==(x=null===W||void 0===W?void 0:W.edit)&&void 0!==x?x:""}),children:(0,A.jsx)(u.N_,{to:"/collaborator/edit/".concat(l.id),id:"col-edit-".concat(l.id),className:"btn btn-icon btn-sm btn-active-primary ms-2",title:null!==(p=null===W||void 0===W?void 0:W.edit)&&void 0!==p?p:"",children:(0,A.jsx)(g.gc,{type:"solid",icon:"pen"})})}),(0,A.jsx)(c.A,{placement:"top",overlay:(0,A.jsx)(m.A,{children:null!==(j=null===W||void 0===W?void 0:W.remove)&&void 0!==j?j:""}),children:(0,A.jsx)(t.A,{id:"col-remove-".concat(l.id),variant:"icon",size:"sm",className:"btn-active-danger ms-2","aria-label":"delete",onClick:()=>this.modifyCollaborator(l.id,"delete"),children:(0,A.jsx)(g.gc,{type:"solid",icon:"trash-can"})})})]})})]})})})]})}):(0,A.jsx)("div",{className:"f-center",style:{minHeight:"calc(100vh - 260px)"},children:(0,A.jsx)(j.A,{title:null!==(P=null===R||void 0===R?void 0:R.no_collab)&&void 0!==P?P:"",desc:null!==(T=null===R||void 0===R?void 0:R.no_collab_desc)&&void 0!==T?T:"",icon:"user-plus",iconDark:"user-plus-dark",button:{text:null!==(L=null===R||void 0===R?void 0:R.invite)&&void 0!==L?L:"",action:()=>this.props.navigate("/collaborator/add")},isFullScreen:!1})})})})]})})})}}const _=(0,a.Ng)(l=>{var e,i;return{collaboratorList:l.collaborator.collaboratorList,userData:null===(e=l.authorized)||void 0===e||null===(i=e.userData)||void 0===i?void 0:i.user_data}},l=>({deleteCollaborator:e=>l((0,y.gS)(e)),setCollaboratorList:e=>l({type:C.J_g,payload:e}),updateCollaboratorPermission:e=>l((0,y.LA)(e)),updateStatus:e=>l((0,y.yB)(e))}))((0,f.A)(k))}}]);